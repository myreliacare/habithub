<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
 <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
 <meta http-equiv="Pragma" content="no-cache">
 <meta http-equiv="Expires" content="0">
 <!-- Version 2.0 - Resources Edit/Delete Fix -->
 <meta name="mobile-web-app-capable" content="yes">
 <meta name="apple-mobile-web-app-capable" content="yes">
 <title>Kasey's Habit Hub</title>
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
 <style>
 * {
 word-wrap: break-word;
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 -webkit-tap-highlight-color: transparent;
 }

 html {
 width: 100%;
 height: 100%;
 background: #3d2f31 !important;
 }

 body {
 font-family: 'Cormorant', Georgia, 'Times New Roman', serif;
 background: #3d2f31 !important;
 min-height: 100vh;
 padding: 80px 16px 16px;
 color: #e0e0e0;
 position: relative;
 width: 100%;
 overflow-x: hidden;
 -webkit-overflow-scrolling: touch;
 }

 .container {
 max-width: 800px;
 margin: 0 auto;
 position: relative;
 }

 .sync-status {
 position: absolute;
 top: 140px;
 right: 24px;
 background: #3d2f31;
 border: 1px solid #444;
 padding: 8px;
 border-radius: 50%;
 z-index: 1000;
 width: 32px;
 height: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 }

 .sync-dot {
 width: 12px;
 height: 12px;
 border-radius: 50%;
 background: #666;
 }

 .sync-status.synced .sync-dot {
 background: #7ba886;
 animation: pulse 2s infinite;
 }

 .sync-status.connecting .sync-dot {
 background: #999;
 animation: pulse 1s infinite;
 }

 .sync-status.error .sync-dot {
 background: #d67373;
 }

 @keyframes pulse {
 0%, 100% { opacity: 1; }
 50% { opacity: 0.5; }
 }

 .btn {
 background: transparent;
 border: 1px solid #444;
 color: #999;
 padding: 8px 16px;
 cursor: pointer;
 font-size: 0.85rem;
 font-weight: 600;
 transition: all 0.2s ease;
 font-family: inherit;
 text-decoration: none;
 display: inline-block;
 }

 .btn:hover {
 background: #b59197;
 color: #f2ebe0;
 border-color: #b59197;
 }

 

 

 

 

 

 .hub-tab {
 display: none;
 }

 .hub-tab.active {
 display: block;
 }

 .section {
 background: #EBE0D6;
 border: 1px solid #b59197;
 padding: 24px;
 margin-bottom: 24px;
 max-width: 800px;
 margin-left: auto;
 margin-right: auto;
 }

 .section-title {
 font-size: 0.85rem;
 font-weight: 700;
 letter-spacing: 0.15em;
 text-transform: uppercase;
 color: #b59197;
 margin-bottom: 20px;
 text-align: center;
 }

 .bingo-section {
 background: #EBE0D6;
 padding: 20px 16px;
 border: 1px solid #b59197;
 margin-bottom: 16px;
 }

 h1 {
 text-align: center;
 color: #b59197;
 margin-bottom: 4px;
 font-size: 0.85rem;
 font-weight: 600;
 letter-spacing: 0.15em;
 text-transform: uppercase;
 }

 .main-title {
 text-align: center;
 color: #b59197;
 margin-bottom: 16px;
 font-family: 'Dancing Script', cursive;
 font-size: 2.8rem;
 font-weight: 400;
 letter-spacing: 0.02em;
 line-height: 1.2;
 }

 .subtitle {
 text-align: center;
 color: #999999;
 margin-bottom: 16px;
 font-size: 0.85rem;
 font-weight: 500;
 }

 .date-display {
 text-align: center;
 color: #999999;
 margin-bottom: 20px;
 font-size: 0.85rem;
 font-weight: 500;
 }

 .bingo-grid {
 display: grid;
 grid-template-columns: repeat(4, 1fr);
 gap: 2px;
 margin-bottom: 20px;
 background: #3d2f31;
 max-width: 500px;
 margin-left: auto;
 margin-right: auto;
 }

 .bingo-cell {
 aspect-ratio: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 font-size: 0.95rem;
 font-weight: 750;
 cursor: pointer;
 transition: all 0.2s ease;
 padding: 8px;
 background: #EBE0D6;
 color: #b59197;
 position: relative;
 line-height: 1.3;
 }

 .bingo-cell.completed {
 background: #b59197;
 color: #f2ebe0;
 }

 .bingo-cell.free-space {
 background: #b59197;
 color: #f2ebe0;
 font-weight: 700;
 cursor: default;
 text-transform: uppercase;
 letter-spacing: 0.1em;
 font-size: 0.85rem;
 }

 .controls {
 display: flex;
 gap: 12px;
 justify-content: center;
 margin-bottom: 20px;
 flex-wrap: wrap;
 }

 .controls .btn {
 flex: 1;
 min-width: 120px;
 padding: 12px 20px;
 font-size: 1rem;
 font-weight: 700;
 }

 .stats {
 text-align: center;
 padding: 16px;
 background: #EBE0D6;
 display: flex;
 justify-content: space-around;
 gap: 20px;
 }

 .stats-item {
 color: #999999;
 font-size: 0.85rem;
 font-weight: 700;
 }

 .stats-item span {
 color: #b59197;
 font-size: 1.8rem;
 font-weight: 750;
 display: block;
 margin-bottom: 4px;
 }

 .celebration {
 position: fixed;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 background: #3d2f31;
 padding: 40px;
 box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
 text-align: center;
 display: none;
 z-index: 1000;
 border: 1px solid #4a4a4a;
 }

 .celebration.show {
 display: block;
 }

 .celebration h2 {
 color: #b59197;
 margin-bottom: 12px;
 font-size: 2rem;
 font-weight: 400;
 letter-spacing: 0.1em;
 }

 .celebration p {
 color: #999;
 margin-bottom: 24px;
 }

 .confetti {
 position: fixed;
 width: 10px;
 height: 10px;
 background: #b59197;
 position: fixed;
 left: 50%;
 animation: confetti-fall 3s linear forwards;
 z-index: 9999;
 }

 @keyframes confetti-fall {
 to {
 transform: translateY(100vh) rotate(720deg);
 opacity: 0;
 }
 }

 .resource-category {
 margin-bottom: 1px;
 }

 .resource-header {
 background: #3d2f31;
 padding: 14px 14px;
 cursor: pointer;
 display: flex;
 justify-content: space-between;
 align-items: center;
 transition: background 0.2s;
 border: 1px solid #333;
 }

 .resource-header:hover {
 background: #333;
 }

 .resource-name {
 color: #b59197;
 font-size: 1.1rem;
 font-weight: 600;
 }

 .resource-arrow {
 color: #999;
 transition: transform 0.2s;
 }

 .resource-category.active .resource-arrow {
 transform: rotate(180deg);
 color: #b59197;
 }

 .resource-content {
 display: none;
 background: #3d2f31;
 padding: 8px 6px;
 border: 1px solid #333;
 border-top: none;
 }

 .resource-category.active .resource-content {
 display: block;
 }

 /* Exercise Day Collapsible Sections */
 .exercise-day {
 margin-bottom: 12px;
 }

 .exercise-day-header {
 background: #EBE0D6;
 padding: 12px 10px;
 border-left: 3px solid #b59197;
 cursor: pointer;
 display: flex;
 justify-content: space-between;
 align-items: center;
 transition: background 0.2s;
 }

 .exercise-day-header:hover {
 background: #f2ebe0;
 }

 .exercise-day-title {
 color: #b59197;
 font-size: 1.1rem;
 font-weight: 600;
 margin: 0;
 }

 .exercise-day-arrow {
 color: #b59197;
 font-size: 1.2rem;
 transition: transform 0.3s;
 }

 .exercise-day.active .exercise-day-arrow {
 transform: rotate(180deg);
 }

 .exercise-day-content {
 display: none;
 background: #EBE0D6;
 padding: 6px 4px;
 border-left: 3px solid #b59197;
 border-top: none;
 }

 .exercise-day.active .exercise-day-content {
 display: block;
 }

 /* Override inline white boxes to reduce padding */
 .exercise-day-content > div {
 padding: 8px 10px !important;
 margin-bottom: 6px !important;
 border: none !important;
 background: rgba(255,255,255,0.85) !important;
 }
 .exercise-day-content ol,
 .exercise-day-content ul {
 padding-left: 14px !important;
 line-height: 1.45 !important;
 }
 .exercise-day-content li {
 font-size: 0.85rem;
 margin-bottom: 4px;
 }
 .exercise-day-content h3 {
 font-size: 1rem;
 margin: 0 0 6px 0;
 }

 /* Collapsible Tapping Section */
 .tapping-collapsible {
 margin-top: 12px;
 }

 .tapping-header {
 background: #b59197;
 padding: 10px 14px;
 cursor: pointer;
 display: flex;
 justify-content: space-between;
 align-items: center;
 border-radius: 3px;
 transition: background 0.2s;
 }

 .tapping-header:hover {
 background: #a57f85;
 }

 .tapping-header-text {
 color: #f2ebe0;
 font-size: 0.9rem;
 font-weight: 600;
 margin: 0;
 }

 .tapping-arrow {
 color: #f2ebe0;
 font-size: 1rem;
 transition: transform 0.3s;
 }

 .tapping-collapsible.active .tapping-arrow {
 transform: rotate(180deg);
 }

 .tapping-content {
 display: none;
 padding: 12px;
 background: #f5f0ed;
 border-left: 3px solid #b59197;
 }

 .tapping-collapsible.active .tapping-content {
 display: block;
 }

 .resource-item {
 background: #EBE0D6;
 padding: 12px;
 margin-bottom: 10px;
 display: flex;
 justify-content: space-between;
 align-items: flex-start;
 gap: 12px;
 border-left: 3px solid #b59197;
 }

 .resource-item-content {
 flex: 1;
 }

 .resource-item-title {
 color: #b59197;
 font-size: 1rem;
 font-weight: 700;
 margin-bottom: 4px;
 }

 .resource-item-link {
 color: #7a6668;
 font-size: 0.85rem;
 font-weight: 500;
 word-break: break-all;
 text-decoration: none;
 display: block;
 margin-bottom: 6px;
 }

 .resource-item-link:hover {
 text-decoration: underline;
 }

 .resource-item-note {
 color: #7a6668;
 font-size: 0.85rem;
 line-height: 1.4;
 font-style: italic;
 }

 .resource-item-actions {
 display: flex;
 gap: 4px;
 }

 .resource-video-toggle {
 display: inline-flex;
 align-items: center;
 gap: 6px;
 background: transparent;
 border: 1px solid #b59197;
 color: #b59197;
 padding: 4px 10px;
 font-size: 0.8rem;
 cursor: pointer;
 margin-top: 6px;
 border-radius: 4px;
 font-family: inherit;
 }
 .resource-video-toggle:hover {
 background: rgba(181,145,151,0.1);
 }
 .resource-video-toggle .toggle-arrow {
 display: inline-block;
 transition: transform 0.2s;
 font-size: 0.7rem;
 }
 .resource-video-toggle.open .toggle-arrow {
 transform: rotate(90deg);
 }
 .resource-video-wrapper {
 display: none;
 margin-top: 8px;
 }
 .resource-video-wrapper.open {
 display: block;
 }

 .add-resource-btn {
 background: transparent;
 border: 1px solid #444;
 color: #999;
 padding: 8px 16px;
 cursor: pointer;
 font-size: 0.85rem;
 transition: all 0.2s ease;
 margin-top: 12px;
 font-family: inherit;
 }

 .add-resource-btn:hover {
 background: #b59197;
 color: #f2ebe0;
 border-color: #b59197;
 }

 .empty-state {
 text-align: center;
 color: #666;
 padding: 20px;
 }

 .add-event-btn {
 width: 100%;
 margin-top: 12px;
 background: transparent;
 border: 1px solid #444;
 color: #999;
 padding: 8px 16px;
 cursor: pointer;
 font-size: 0.85rem;
 transition: all 0.2s ease;
 font-family: inherit;
 }

 .add-event-btn:hover {
 background: #b59197;
 color: #f2ebe0;
 border-color: #b59197;
 }

 .event-form {
 display: none;
 position: fixed;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 background: #3d2f31;
 padding: 20px;
 border: 1px solid #b59197;
 z-index: 1001;
 max-width: 500px;
 width: 90%;
 max-height: 80vh;
 overflow-y: auto;
 box-shadow: 0 4px 20px rgba(0,0,0,0.5);
 }

 .event-form.active {
 display: block;
 }

 .event-form-overlay {
 display: none;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: rgba(0, 0, 0, 0.7);
 z-index: 1000;
 }

 .event-form-overlay.active {
 display: block;
 }

 .form-group {
 margin-bottom: 15px;
 }

 .form-group label {
 display: block;
 color: #999;
 font-size: 0.85rem;
 font-weight: 600;
 margin-bottom: 6px;
 text-transform: uppercase;
 letter-spacing: 0.05em;
 }

 .form-group input,
 .form-group textarea {
 width: 100%;
 background: #3d2f31;
 border: 1px solid #444;
 color: #b59197;
 padding: 10px;
 font-size: 1rem;
 font-family: inherit;
 }

 .form-actions {
 display: flex;
 gap: 10px;
 justify-content: flex-end;
 }

 .form-actions button[type="submit"] {
 border-color: #b59197;
 color: #b59197;
 background: transparent;
 padding: 8px 16px;
 cursor: pointer;
 font-size: 0.85rem;
 transition: all 0.2s ease;
 font-family: inherit;
 }

 .form-actions button[type="submit"]:hover {
 background: #b59197;
 color: #f2ebe0;
 }

 .video-grid {
 display: grid;
 grid-template-columns: repeat(3, 1fr);
 gap: 3px;
 margin-top: 16px;
 }

 .video-thumb {
 position: relative;
 aspect-ratio: 1;
 overflow: hidden;
 cursor: pointer;
 background: #3d2f31;
 }

 .video-thumb video,
 .video-thumb img {
 width: 100%;
 height: 100%;
 object-fit: cover;
 display: block;
 }

 .video-thumb-overlay {
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 padding: 6px 8px;
 background: linear-gradient(transparent, rgba(0,0,0,0.7));
 color: #fff;
 font-size: 0.7rem;
 font-weight: 600;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
 }

 .video-thumb-play {
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 width: 36px;
 height: 36px;
 background: rgba(181,145,151,0.85);
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 pointer-events: none;
 }

 .video-thumb-play::after {
 content: '';
 display: block;
 width: 0;
 height: 0;
 border-style: solid;
 border-width: 7px 0 7px 12px;
 border-color: transparent transparent transparent #fff;
 margin-left: 2px;
 }

 .video-link-thumb {
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 width: 100%;
 height: 100%;
 background: linear-gradient(135deg, #3d2f31 0%, #5a4345 100%);
 color: #b59197;
 text-decoration: none;
 padding: 12px;
 text-align: center;
 }

 .video-link-icon {
 font-size: 1.6rem;
 margin-bottom: 4px;
 }

 .video-link-label {
 font-size: 0.65rem;
 color: #999;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
 max-width: 100%;
 }

 /* Video Detail Modal */
 .video-detail-modal {
 display: none;
 position: fixed;
 top: 0; left: 0; right: 0; bottom: 0;
 background: rgba(0,0,0,0.92);
 z-index: 10000;
 padding: 0;
 flex-direction: column;
 }
 .video-detail-modal.active {
 display: flex;
 }
 .video-detail-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 14px 16px;
 flex-shrink: 0;
 }
 .video-detail-title {
 color: #b59197;
 font-size: 1rem;
 font-weight: 700;
 flex: 1;
 margin-right: 12px;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
 }
 .video-detail-close {
 background: none;
 border: none;
 color: #999;
 font-size: 1.8rem;
 cursor: pointer;
 padding: 0 4px;
 line-height: 1;
 }
 .video-detail-body {
 flex: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 padding: 0 8px;
 overflow: hidden;
 }
 .video-detail-body video {
 max-width: 100%;
 max-height: 100%;
 background: #000;
 }
 .video-detail-footer {
 padding: 12px 16px;
 display: flex;
 justify-content: space-between;
 align-items: center;
 flex-shrink: 0;
 }
 .video-detail-tags {
 display: flex;
 flex-wrap: wrap;
 gap: 6px;
 flex: 1;
 }

 .video-tag {
 background: #3d2f31;
 color: #999;
 padding: 4px 10px;
 font-size: 0.75rem;
 border: 1px solid #444;
 }

 .video-detail-delete {
 background: transparent;
 border: 1px solid #c97a7a;
 color: #c97a7a;
 padding: 6px 14px;
 cursor: pointer;
 font-size: 0.8rem;
 font-family: inherit;
 margin-left: 12px;
 }

 .prompt-question {
 background: #3d2f31;
 padding: 20px;
 margin-bottom: 20px;
 border-left: 3px solid #b59197;
 }

 .prompt-label {
 font-size: 0.85rem;
 font-weight: 600;
 color: #999;
 text-transform: uppercase;
 letter-spacing: 0.05em;
 margin-bottom: 8px;
 }

 .prompt-text {
 color: #b59197;
 font-size: 1.25rem;
 font-weight: 500;
 line-height: 1.5;
 font-style: italic;
 }

 .answer-box {
 background: #3d2f31;
 padding: 20px;
 margin-bottom: 20px;
 }

 .answer-person {
 font-size: 0.85rem;
 font-weight: 600;
 color: #b59197;
 text-transform: uppercase;
 letter-spacing: 0.05em;
 margin-bottom: 12px;
 }

 .answer-text {
 color: #e0e0e0;
 line-height: 1.6;
 font-size: 1.05rem;
 white-space: pre-wrap;
 }

 .todo-container {
 background: #3d2f31;
 border: 1px solid #b59197;
 padding: 24px;
 margin-bottom: 24px;
 }

 .todo-input-group {
 display: flex;
 gap: 8px;
 margin-bottom: 20px;
 }

 .todo-input {
 flex: 1;
 background: #3d2f31;
 border: 1px solid #444;
 color: #b59197;
 padding: 12px;
 font-size: 1rem;
 font-family: inherit;
 }

 .todo-add-btn {
 background: transparent;
 border: 1px solid #b59197;
 color: #b59197;
 padding: 12px 24px;
 cursor: pointer;
 font-size: 0.85rem;
 font-weight: 600;
 transition: all 0.2s ease;
 font-family: inherit;
 }

 .todo-add-btn:hover {
 background: #b59197;
 color: #f2ebe0;
 }

 .todo-list {
 display: flex;
 flex-direction: column;
 gap: 12px;
 }

 .todo-item {
 background: #EBE0D6;
 padding: 16px;
 display: flex;
 align-items: center;
 gap: 12px;
 border-left: 3px solid #b59197;
 transition: all 0.2s ease;
 }

 .todo-item.completed {
 opacity: 0.6;
 border-left-color: #666;
 }

 .todo-checkbox {
 width: 20px;
 height: 20px;
 cursor: pointer;
 accent-color: #b59197;
 }

 .todo-text {
 flex: 1;
 color: #3d2f31;
 font-size: 1rem;
 line-height: 1.4;
 
 font-weight: 600;}

 .todo-item.completed .todo-text {
 text-decoration: line-through;
 color: #7a6668;
 }

 .todo-delete {
 background: transparent;
 border: 1px solid #b59197;
 color: #b59197;
 padding: 6px 12px;
 cursor: pointer;
 font-size: 0.85rem;
 font-weight: 600;
 transition: all 0.2s ease;
 font-family: inherit;
 }

 .todo-delete:hover {
 background: #d67373;
 color: #f2ebe0;
 border-color: #d67373;
 }

 .todo-empty {
 text-align: center;
 color: #666;
 padding: 40px 20px;
 font-size: 1rem;
 font-style: italic;
 }

 @media (max-width: 768px) {
 .btn, button {
 font-size: 0.85rem;
 padding: 8px 12px;
 }

 .bingo-grid {
 max-width: 100%;
 gap: 2px;
 }

 .bingo-cell {
 aspect-ratio: auto;
 min-height: 90px;
 font-size: 0.85rem;
 font-weight: 750;
 padding: 8px 4px;
 line-height: 1.3;
 }

 .bingo-cell.free-space {
 font-size: 0.85rem;
 font-weight: 700;
 }

 .controls {
 flex-direction: column;
 }

 .controls .btn {
 width: 100%;
 min-width: unset;
 }

 .sync-status {
 top: 80px;
 right: 16px;
 width: 28px;
 height: 28px;
 padding: 6px;
 }

 .sync-dot {
 width: 10px;
 height: 10px;
 }
 }

 @media (max-width: 480px) {
 body {
 padding: 8px;
 }

 .container {
 padding: 0;
 }

 .bingo-section {
 padding: 10px 6px;
 }

 .main-title {
 font-size: 2rem;
 margin-bottom: 10px;
 font-weight: 400;
 }

 .subtitle {
 font-size: 0.85rem;
 margin-bottom: 10px;
 font-weight: 500;
 }

 .date-display {
 font-size: 0.85rem;
 margin-bottom: 12px;
 font-weight: 500;
 }

 .bingo-grid {
 gap: 2px;
 margin-bottom: 12px;
 }

 .bingo-cell {
 aspect-ratio: auto;
 min-height: 80px;
 font-size: 0.8rem;
 font-weight: 750;
 padding: 6px 3px;
 line-height: 1.3;
 }

 .bingo-cell.free-space {
 font-size: 0.85rem;
 font-weight: 700;
 letter-spacing: 0.05em;
 }

 .controls {
 gap: 8px;
 }

 .controls .btn {
 padding: 8px 12px;
 font-size: 0.75rem;
 }

 .stats {
 padding: 12px;
 gap: 12px;
 }

 .stats-item {
 font-size: 0.75rem;
 }

 .stats-item span {
 font-size: 1.2rem;
 }
 }

 /* Habits Editor Modal */
 .habits-modal-overlay {
 position: fixed; top: 0; left: 0; right: 0; bottom: 0;
 background: rgba(0, 0, 0, 0.8); z-index: 2000;
 display: none; align-items: center; justify-content: center;
 padding: 20px;
 }
 .habits-modal-overlay.visible { display: flex; }
 .habits-modal {
 background: #3d2f31; border: 1px solid rgba(181, 145, 151, 0.4);
 width: 100%; max-width: 500px; max-height: 85vh;
 overflow-y: auto; padding: 24px;
 }
 .habits-modal-header {
 display: flex; justify-content: space-between; align-items: center;
 margin-bottom: 20px; padding-bottom: 12px;
 border-bottom: 1px solid rgba(181, 145, 151, 0.2);
 }
 .habits-modal-title { font-size: 1.1rem; color: #f2ebe0; }
 .habits-modal-close {
 background: transparent; border: none; color: #c9a9a6;
 font-size: 1.5rem; cursor: pointer; padding: 0; line-height: 1;
 }
 .habits-modal-close:hover { color: #f2ebe0; }
 .habits-list { margin-bottom: 20px; max-height: 400px; overflow-y: auto; }
 .habit-item {
 display: flex; align-items: center; gap: 10px;
 padding: 10px 12px; margin-bottom: 6px;
 background: rgba(20, 20, 20, 0.4);
 border-left: 2px solid #b59197;
 }
 .habit-item input {
 flex: 1; background: transparent; border: none;
 color: #f2ebe0; font-size: 0.85rem; font-family: inherit;
 padding: 4px 0;
 }
 .habit-item input:focus { outline: none; }
 .habit-delete {
 background: transparent; border: none;
 color: rgba(201, 169, 166, 0.5); cursor: pointer;
 font-size: 1rem; padding: 4px 8px;
 }
 .habit-delete:hover { color: #c9a9a6; }
 .add-habit-row { display: flex; gap: 8px; margin-bottom: 16px; }
 .add-habit-row input {
 flex: 1; background: rgba(20, 20, 20, 0.5);
 border: 1px solid rgba(181, 145, 151, 0.3); color: #f2ebe0;
 padding: 10px 12px; font-size: 0.85rem; font-family: inherit;
 }
 .add-habit-row input:focus { outline: none; border-color: rgba(181, 145, 151, 0.5); }
 .add-habit-row input::placeholder { color: rgba(242, 235, 224, 0.4); }
 .add-habit-btn {
 background: #b59197; border: none; color: #f2ebe0;
 padding: 10px 16px; cursor: pointer; font-size: 0.85rem; font-family: inherit;
 }
 .add-habit-btn:hover { background: #c9a9a6; }
 .habits-modal-actions {
 display: flex; gap: 10px; justify-content: flex-end;
 padding-top: 16px; border-top: 1px solid rgba(181, 145, 151, 0.2);
 }
 .habits-save-btn {
 background: #b59197; border: none; color: #f2ebe0;
 padding: 10px 20px; cursor: pointer; font-size: 0.85rem; font-family: inherit;
 }
 .habits-save-btn:hover { background: #c9a9a6; }
 .habits-cancel-btn {
 background: transparent; border: 1px solid rgba(181, 145, 151, 0.4);
 color: #c9a9a6; padding: 10px 20px; cursor: pointer;
 font-size: 0.85rem; font-family: inherit;
 }
 .habits-cancel-btn:hover { border-color: rgba(181, 145, 151, 0.6); }
 .habit-count { font-size: 0.75rem; color: rgba(242, 235, 224, 0.5); margin-bottom: 12px; }


 .journal-back-btn {
 position: absolute;
 top: 20px;
 left: 20px;
 background: transparent;
 border: 1px solid #b59197;
 color: #b59197;
 padding: 10px 20px;
 cursor: pointer;
 font-size: 0.9rem;
 font-family: inherit;
 transition: all 0.2s ease;
 }

 .journal-back-btn:hover {
 background: #b59197;
 color: #fff;
 }
 /* Journal styles */
 .journal-locked {
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
 background: rgba(235, 224, 214, 0.98);
 display: flex;
 align-items: center;
 justify-content: center;
 z-index: 10000;
 }

 .journal-password-box {
 background: #fff;
 padding: 40px;
 border: 2px solid #b59197;
 box-shadow: 0 10px 40px rgba(181, 145, 151, 0.3);
 text-align: center;
 max-width: 400px;
 }

 .journal-lock-icon-DISABLED {
 font-size: 3rem;
 color: #b59197;
 margin-bottom: 20px;
 }

 .journal-password-title {
 font-family: 'Dancing Script', cursive;
 font-size: 2rem;
 color: #b59197;
 margin-bottom: 12px;
 font-weight: 500;
 }

 .journal-password-subtitle {
 color: #999;
 font-size: 0.85rem;
 margin-bottom: 24px;
 }

 .journal-password-input {
 width: 100%;
 padding: 12px;
 border: 2px solid #b59197;
 background: #3d2f31;
 color: #f2ebe0;
 font-size: 1rem;
 text-align: center;
 font-family: inherit;
 margin-bottom: 16px;
 }

 .journal-password-input:focus {
 outline: none;
 border-color: #b59197;
 box-shadow: 0 0 0 2px rgba(181, 145, 151, 0.2);
 }

 .journal-unlock-btn {
 background: #b59197;
 color: #fff;
 border: none;
 padding: 12px 32px;
 font-size: 1rem;
 font-weight: 600;
 cursor: pointer;
 transition: all 0.2s;
 font-family: inherit;
 }

 .journal-unlock-btn:hover {
 background: #c5a1a7;
 }

 .journal-error {
 color: #d67373;
 font-size: 0.85rem;
 margin-top: 8px;
 display: none;
 }

 .journal-error.show {
 display: block;
 }

 .journal-header {
 text-align: center;
 margin-bottom: 32px;
 }

 .journal-title {
 font-family: 'Dancing Script', cursive;
 font-size: 2.5rem;
 color: #b59197;
 margin-bottom: 8px;
 font-weight: 500;
 }

 .journal-subtitle {
 color: #7ba886;
 font-size: 0.85rem;
 font-style: italic;
 }

 .journal-entry-form {
 background: #fff;
 padding: 24px;
 margin-bottom: 24px;
 border: 2px solid #b59197;
 box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
 }

 .journal-form-date {
 font-family: 'Dancing Script', cursive;
 font-size: 1.5rem;
 color: #b59197;
 margin-bottom: 16px;
 font-weight: 500;
 }

 .journal-textarea {
 width: 100%;
 min-height: 200px;
 padding: 16px;
 border: 1px solid #b59197;
 background: #F7EBF0;
 color: #b59197;
 font-size: 1rem;
 line-height: 1.8;
 font-family: inherit;
 resize: vertical;
 }

 .journal-textarea:focus {
 outline: none;
 border-color: #b59197;
 box-shadow: 0 0 0 2px rgba(181, 145, 151, 0.2);
 }

 .journal-textarea::placeholder {
 color: rgba(181, 145, 151, 0.5);
 }

 .journal-save-btn {
 background: #b59197;
 color: #fff;
 border: none;
 padding: 12px 28px;
 font-size: 0.85rem;
 font-weight: 600;
 cursor: pointer;
 transition: all 0.2s;
 font-family: inherit;
 margin-top: 12px;
 }

 .journal-save-btn:hover {
 background: #c5a1a7;
 }

 .journal-entries {
 margin-top: 32px;
 }

 .journal-entry {
 background: #fff;
 padding: 24px;
 margin-bottom: 20px;
 border-left: 4px solid #b59197;
 box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
 position: relative;
 }

 .journal-entry-date {
 font-family: 'Dancing Script', cursive;
 font-size: 1.3rem;
 color: #b59197;
 margin-bottom: 12px;
 font-weight: 500;
 }

 .journal-entry-time {
 font-size: 0.8rem;
 color: #7ba886;
 margin-left: 8px;
 }

 .journal-entry-text {
 color: #e0d2d0;
 line-height: 1.8;
 white-space: pre-wrap;
 font-size: 1rem;
 }

 .journal-entry-delete {
 position: absolute;
 top: 16px;
 right: 16px;
 background: transparent;
 border: 1px solid #b59197;
 color: #b59197;
 padding: 6px 12px;
 font-size: 0.75rem;
 cursor: pointer;
 transition: all 0.2s;
 font-family: inherit;
 }

 .journal-entry-delete:hover {
 background: #d67373;
 color: #b59197;
 border-color: #d67373;
 }

 .journal-empty {
 text-align: center;
 padding: 60px 20px;
 color: #999;
 font-style: italic;
 }

 .journal-heart {
 color: #b59197;
 margin: 0 4px;
 }

 
 /* Top Navigation Bar */
 .top-nav {
 position: fixed;
 top: 0; left: 0; right: 0;
 background: #2a1f21;
 border-bottom: 1px solid rgba(163, 184, 153, 0.2);
 z-index: 9999;
 padding: 0 24px;
 font-family: 'Philosopher', Georgia, serif;
 }
 .nav-container {
 max-width: 1200px;
 margin: 0 auto;
 display: flex;
 align-items: center;
 justify-content: space-between;
 height: 56px;
 }
 .nav-logo {
 font-size: 1.1rem;
 font-weight: 700;
 color: #a3b899;
 text-decoration: none;
 white-space: nowrap;
 }
 .nav-links { display: flex; gap: 28px; align-items: center; }
 .nav-link {
 color: rgba(242, 235, 224, 0.6);
 text-decoration: none;
 font-size: 0.88rem;
 font-weight: 500;
 white-space: nowrap;
 transition: color 0.2s;
 }
 .nav-link:hover { color: #f2ebe0; }
 .nav-link.active { color: #a3b899; }

 @media (max-width: 768px) {
 body {
 padding-top: 80px;
 }

 .btn, button {
 font-size: 0.85rem;
 padding: 8px 12px;
 }

 #currentDayDisplay {
 min-width: 180px !important;
 font-size: 1rem !important;
 }
 }

 @media (max-width: 480px) {
 #currentDayDisplay {
 min-width: 160px !important;
 font-size: 0.95rem !important;
 }
 }


 /* Section Navigation Dropdown */
 .section-nav-dropdown {
 margin-bottom: 24px;
 }

 .section-dropdown {
 width: 100%;
 background: #EBE0D6;
 border: 2px solid #b59197;
 color: #3d2f31;
 padding: 14px 16px;
 font-size: 1rem;
 font-weight: 600;
 font-family: inherit;
 cursor: pointer;
 appearance: none;
 background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23b59197' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
 background-repeat: no-repeat;
 background-position: right 16px center;
 padding-right: 40px;
 }

 .section-dropdown:hover {
 background: #f2ebe0;
 border-color: #b59197;
 }

 .section-dropdown:focus {
 outline: none;
 border-color: #b59197;
 box-shadow: 0 0 0 2px rgba(181, 145, 151, 0.2);
 }

 .section-dropdown option {
 background: #EBE0D6;
 color: #3d2f31;
 padding: 10px;
 }

 /* Wellness Schedule Styles */
 .day-card {
 background: #EBE0D6;
 border: 1px solid #b59197;
 margin-bottom: 12px;
 border-radius: 4px;
 overflow: hidden;
 width: 100%;
 max-width: 760px;
 margin-left: auto;
 margin-right: auto;
 text-align: left;
 }

 .day-header {
 padding: 20px;
 cursor: pointer;
 display: flex;
 justify-content: space-between;
 align-items: center;
 transition: background 0.2s;
 }

 .day-header:hover {
 background: rgba(181, 145, 151, 0.1);
 }

 .day-name {
 font-size: 1.3rem;
 font-weight: 600;
 color: #3d2f31;
 }

 .day-preview {
 color: #7a6668;
 font-size: 0.9rem;
 margin-top: 4px;
 }

 .arrow {
 color: #b59197;
 font-size: 1.2rem;
 transition: transform 0.3s;
 }

 .day-card.expanded .arrow {
 transform: rotate(180deg);
 }

 .day-details {
 max-height: 0;
 overflow: hidden;
 transition: max-height 0.3s ease;
 background: #f2ebe0;
 }

 .day-card.expanded .day-details {
 max-height: 3000px;
 }

 .schedule-section {
 padding: 20px;
 border-top: 1px solid rgba(181, 145, 151, 0.2);
 }

 .section-header {
 color: #b59197;
 font-size: 1rem;
 text-transform: uppercase;
 letter-spacing: 0.1em;
 margin-bottom: 12px;
 font-weight: 600;
 }

 .schedule-item {
 background: #EBE0D6;
 padding: 12px;
 margin-bottom: 8px;
 border-left: 3px solid #a3b899;
 display: flex;
 align-items: flex-start;
 gap: 12px;
 }

 .schedule-time {
 color: #7a6668;
 font-weight: 600;
 min-width: 80px;
 font-size: 0.9rem;
 }

 .schedule-content {
 flex: 1;
 }

 .schedule-title {
 color: #3d2f31;
 font-weight: 600;
 margin-bottom: 4px;
 font-size: 1rem;
 }

 .schedule-details {
 color: #3d2f31;
 font-size: 0.95rem;
 line-height: 1.5;
 }

 .schedule-details strong {
 color: #b59197;
 font-weight: 700;
 }

 .schedule-details em {
 color: #7a6668;
 font-style: italic;
 }

 /* Exercise Phase Styles */
 .exercise-phase-card {
 background: #f2ebe0;
 border: 1px solid #b59197;
 padding: 20px;
 margin-bottom: 16px;
 border-radius: 4px;
 }

 .phase-header {
 color: #b59197;
 font-size: 1.1rem;
 font-weight: 700;
 margin-bottom: 8px;
 text-transform: uppercase;
 letter-spacing: 0.05em;
 }

 .phase-goal {
 color: #7a6668;
 font-size: 0.9rem;
 font-style: italic;
 margin-bottom: 16px;
 }

 .exercise-day {
 background: #EBE0D6;
 padding: 12px;
 margin-bottom: 8px;
 border-left: 3px solid #a3b899;
 color: #3d2f31;
 font-size: 0.95rem;
 }

 .exercise-day strong {
 color: #3d2f31;
 font-weight: 700;
 }

 .exercise-details {
 color: #7a6668;
 font-size: 0.85rem;
 margin-top: 4px;
 font-style: italic;
 }

 
 img {
 max-width: 100%;
 height: auto;
 }

 /* ===== HAMBURGER MENU ===== */
 .nav-refresh {
        display: block;
        background: none;
        border: none;
        color: #b59197;
        font-size: 1.4rem;
        cursor: pointer;
        padding: 2px 0;
        z-index: 10001;
        line-height: 1;
    }
    .nav-refresh:active {
        transform: rotate(180deg);
        transition: transform 0.3s;
    }
    .nav-hamburger {
     display: none;
     background: none;
     border: none;
     cursor: pointer;
     padding: 10px;
     z-index: 10001;
 }
 .nav-hamburger span {
     display: block;
     width: 24px;
     height: 2px;
     background: #a3b899;
     margin: 5px 0;
     transition: all 0.3s ease;
 }
 .nav-hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
 .nav-hamburger.open span:nth-child(2) { opacity: 0; }
 .nav-hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }
 .nav-overlay {
     display: none;
     position: fixed;
     top: 0; left: 0; right: 0; bottom: 0;
     background: #2a1f21;
     z-index: 10000;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     gap: 8px;
 }
 .nav-overlay.open { display: flex; }
 .nav-link-mobile {
     color: rgba(242, 235, 224, 0.7);
     text-decoration: none;
     font-size: 1.3rem;
     font-family: 'Philosopher', Georgia, serif;
     font-weight: 500;
     padding: 18px 40px;
     transition: color 0.2s;
     display: block;
     width: 100%;
     text-align: center;
 }
 .nav-link-mobile:hover { color: #f2ebe0; }
 .nav-link-mobile.active { color: #a3b899; }
 @media (max-width: 768px) {
     .nav-hamburger { display: block; }
     .nav-links { display: none; }
 }

 @keyframes spin { to { transform: rotate(360deg); } }


        /* ===== NAV OVERRIDE - GOLD STANDARD ===== */
        .top-nav {
            position: fixed !important;
            top: 0 !important; left: 0 !important; right: 0 !important;
            background: #2a1f21 !important;
            border-bottom: 1px solid rgba(163, 184, 153, 0.2) !important;
            z-index: 9999 !important;
            padding: 0 24px !important;
            font-family: 'Philosopher', Georgia, serif !important;
        }
        .nav-container {
            max-width: 1200px !important;
            margin: 0 auto !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
            height: 56px !important;
        }
        .nav-logo {
            font-size: 1.1rem !important;
            font-weight: 700 !important;
            color: #a3b899 !important;
            text-decoration: none !important;
            white-space: nowrap !important;
        }
        .nav-links { display: flex !important; gap: 28px !important; align-items: center !important; }
        .nav-link {
            color: rgba(242, 235, 224, 0.6) !important;
            text-decoration: none !important;
            font-size: 0.88rem !important;
            font-weight: 500 !important;
            white-space: nowrap !important;
            transition: color 0.2s !important;
            letter-spacing: normal !important;
            display: inline !important;
            min-height: auto !important;
            min-width: auto !important;
        }
        .nav-link:hover { color: #f2ebe0 !important; }
        .nav-link.active { color: #a3b899 !important; }
        .nav-hamburger {
            display: none !important;
            background: none !important;
            border: none !important;
            cursor: pointer !important;
            padding: 10px !important;
            z-index: 10001 !important;
        }
        .nav-hamburger span {
            display: block !important; width: 24px !important; height: 2px !important;
            background: #a3b899 !important; margin: 5px 0 !important;
            transition: all 0.3s ease !important;
            border-radius: 0 !important;
        }
        .nav-hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px) !important; }
        .nav-hamburger.open span:nth-child(2) { opacity: 0 !important; }
        .nav-hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px) !important; }
        .nav-overlay {
            display: none !important;
            position: fixed !important;
            top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important;
            background: #2a1f21 !important;
            z-index: 10000 !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 0 !important;
            opacity: 1 !important;
        }
        .nav-overlay.open { display: flex !important; }
        .nav-link-mobile {
            color: rgba(242, 235, 224, 0.7) !important;
            text-decoration: none !important;
            font-size: 1.05rem !important;
            font-family: 'Philosopher', Georgia, serif !important;
            font-weight: 500 !important;
            padding: 12px 40px !important;
            transition: color 0.2s !important;
            display: block !important;
            width: 100% !important;
            text-align: center !important;
            letter-spacing: normal !important;
        }
        .nav-link-mobile:hover { color: #f2ebe0 !important; }
        .nav-link-mobile.active { color: #a3b899 !important; }
        @media (max-width: 768px) {
            .nav-hamburger { display: block !important; }
            .nav-links { display: none !important; }
            .nav-container { height: 56px !important; }
            .nav-logo { font-size: 1.1rem !important; }
            .top-nav { padding: 0 24px !important; }
        }
        @media (max-width: 480px) {
            .nav-container { height: 56px !important; }
            .nav-logo { font-size: 1.1rem !important; }
            .top-nav { padding: 0 24px !important; }
        }
        /* ===== END NAV OVERRIDE ===== */
        /* ===== MOBILE OPTIMIZATION ===== */
        html, body {
            overflow-x: hidden !important;
            max-width: 100vw !important;
        }
        /* Prevent iOS auto-zoom on input focus */
        @media screen and (max-width: 768px) {
            input, textarea, select {
                font-size: 16px !important;
            }
            /* Wider resource content on mobile */
            .section {
                padding: 14px 10px;
            }
            .resource-content {
                padding: 4px 2px;
            }
            .exercise-day-content {
                padding: 8px 6px;
            }
            .exercise-day-content > div {
                padding: 8px !important;
            }
            .exercise-day-header {
                padding: 10px 10px;
            }
            .exercise-day-title {
                font-size: 0.95rem;
            }
        }
        /* ===== END MOBILE OPTIMIZATION ===== */
 </style>
</head>
<body>
 <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">Our Life Hub</a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="kasey-hub.html" class="nav-link active">Kasey</a>
                <a href="charlie-hub.html" class="nav-link">Charlie</a>
                <a href="our-dreams.html" class="nav-link">Us ♡</a>
                <a href="meal-plan.html" class="nav-link">Meals</a>
                <a href="settings.html" class="nav-link">Settings</a>
            </div>
            <div style="display:flex;align-items:center;gap:2px;"><button class="nav-refresh" onclick="location.reload(true)" aria-label="Refresh" title="Refresh page">↻</button>
            <button class="nav-hamburger" id="navHamburger" onclick="toggleNav()" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button></div>
        </div>
    </nav>
    <div class="nav-overlay" id="navOverlay" onclick="toggleNav()">
        <a href="index.html" class="nav-link-mobile">Home</a>
        <a href="kasey-hub.html" class="nav-link-mobile active">Kasey</a>
        <a href="charlie-hub.html" class="nav-link-mobile">Charlie</a>
        <a href="our-dreams.html" class="nav-link-mobile">Us ♡</a>
        <a href="meal-plan.html" class="nav-link-mobile">Meals</a>
        <a href="settings.html" class="nav-link-mobile">Settings</a>
    </div>


 <div class="container">
 <div class="section-nav-dropdown">
 <select id="sectionSelect" class="section-dropdown" onchange="switchTabFromDropdown()">
 <option value="bingo">Habits & Wellness</option>
 <option value="todo">To-Do List</option>
 <option value="resources">Resources</option>
 <option value="videos">Video Hub</option>
 <option value="journal">Journal</option>
 <option value="prompt">Daily Prompt</option>
 </select>
 </div>

 <!-- BINGO TAB -->
 <div id="bingo-tab" class="hub-tab active">
 <!-- My Daily Wellness Schedule -->
 <div class="section" style="margin-bottom: 24px; text-align: center;">
 
 <!-- Day Navigation -->
 <div style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;">
 <button onclick="changeDay(-1)" style="background: transparent; border: 1px solid #b59197; color: #b59197; padding: 6px 12px; cursor: pointer; font-size: 0.85rem; font-family: inherit; white-space: nowrap;">←</button>
 <div id="currentDayDisplay" style="color: #b59197; font-weight: 600; font-size: 1.1rem; min-width: 220px; text-align: center;"></div>
 <button onclick="changeDay(1)" style="background: transparent; border: 1px solid #b59197; color: #b59197; padding: 6px 12px; cursor: pointer; font-size: 0.85rem; font-family: inherit; white-space: nowrap;">→</button>
 </div>

 <!-- Day-specific schedules -->
 <div id="dailyScheduleContainer" style="display: flex; flex-direction: column; align-items: center;"></div>
 </div>

 <div class="bingo-section">
 <div class="main-title" style="margin-top: 12px;">Daily Habits Bingo</div>
 <p class="subtitle">Click squares to mark complete • Get 4 in a row to win</p>
 <div class="date-display" id="dateDisplay"></div>
 
 <div class="bingo-grid" id="bingoGrid"></div>
 
 <div class="controls">
 <button class="btn" onclick="resetBoard()">Reset Today</button>
 <button class="btn" onclick="shuffleBoard()">Shuffle Habits</button>
 </div>

 <div class="stats">
 <div class="stats-item">
 <span id="completedCount">0</span>
 Complete
 </div>
 <div class="stats-item">
 <span id="bingoCount">0</span>
 Bingos
 </div>
 </div>
 </div>
 </div>

 <!-- TO-DO LIST TAB -->
 <div id="todo-tab" class="hub-tab">
 <div class="todo-container">
 <h2 class="section-title">Current To-Dos</h2>
 
 <div class="todo-input-group">
 <input 
 type="text" 
 id="todoInput" 
 class="todo-input" 
 placeholder="Add a new task..."
 onkeypress="if(event.key === 'Enter') addTodo()"
 >
 <button class="todo-add-btn" onclick="addTodo()">Add</button>
 </div>

 <div id="todoList" class="todo-list">
 <div class="todo-empty">No tasks yet. Add your first one above!</div>
 </div>
 </div>

 <div class="todo-container" style="margin-top: 24px; border-left: 3px solid #7ba886;">
 <h2 class="section-title" style="color: #7ba886;">Future To-Dos</h2>
 <p style="font-size: 0.8rem; color: rgba(123,168,134,0.7); margin-bottom: 12px;">Things to get to when the time is right</p>
 
 <div class="todo-input-group">
 <input 
 type="text" 
 id="futureTodoInput" 
 class="todo-input" 
 placeholder="Add a future task..."
 onkeypress="if(event.key === 'Enter') addFutureTodo()"
 >
 <button class="todo-add-btn" onclick="addFutureTodo()" style="background: #7ba886; border-color: #7ba886;">Add</button>
 </div>

 <div id="futureTodoList" class="todo-list">
 <div class="todo-empty">No future tasks yet.</div>
 </div>
 </div>
 </div>

 <!-- RESOURCES TAB -->
 <div id="resources-tab" class="hub-tab">
 <div class="section">
 <h2 class="section-title">Habit Resources</h2>
 
 <!-- Dynamic Resources Heading -->


 <!-- Dynamic Resources Heading -->

 <div class="event-form-overlay" id="resourceFormOverlay" onclick="hideAddResourceForm()"></div>
 <div class="event-form" id="resourceForm">
 <form onsubmit="event.preventDefault(); addResource(event);">
 <input type="hidden" id="resourceCategory" name="category">
 <div class="form-group">
 <label>Title</label>
 <input type="text" name="title" required>
 </div>
 <div class="form-group">
 <label>Upload Image/Video (optional)</label>
 <input type="file" name="file" accept="image/*,video/*" id="resourceFile" onchange="handleResourceUpload()">
 <div style="text-align: center; color: #999; margin: 8px 0; font-size: 0.85rem;">&mdash; OR &mdash;</div>
 </div>
 <div class="form-group">
 <label>Link (optional)</label>
 <input type="url" name="link" id="resourceLink">
 </div>
 <div class="form-group">
 <label>Notes (optional)</label>
 <textarea name="note" rows="3"></textarea>
 </div>
 <div class="form-actions">
 <button type="button" class="btn" onclick="hideAddResourceForm()">Cancel</button>
 <button type="submit" class="btn">Save Resource</button>
 </div>
 </form>
 </div>
 
 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'meditate')">
 <span class="resource-name">Meditate</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="meditate-content">
 <div id="meditate-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('meditate')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'exercise')">
 <span class="resource-name">Exercise</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="exercise-content">
 
 <!-- Daily Corrective Warm-Up (Do Before Every Workout) -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">Daily Corrective Warm-Up</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">8 min | Perform before all workouts</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <ol style="color: #3d2f31; line-height: 2; padding-left: 20px;">
 <li><strong>Diaphragmatic breathing + TrA engagement</strong> — Supine, knees bent. Inhale through nose, ribcage expands laterally. Exhale, gently draw belly to spine (20% effort). Hold 5 sec. <em>10 breaths</em></li>
 <li><strong>Chin tucks</strong> — Supine, tongue on roof of mouth. Gentle "double chin" nodding. Hold 10 sec. <em>10 reps</em></li>
 <li><strong>Pelvic tilts</strong> — Supine, knees bent. Flatten low back to floor, then release. <em>10 reps, 5-sec holds</em></li>
 <li><strong>Cat-cow with Schroth breathing</strong> — Quadruped. Cow: breathe into concave side. Cat: exhale fully. <em>8 slow cycles</em></li>
 <li><strong>Scapular setting</strong> — Prone, arms at sides. Squeeze shoulder blades "back and down." Hold 6 sec. <em>10 reps</em></li>
 </ol>
 </div>
 </div>
 </div>

 <!-- MONDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">MONDAY: Corrective + Pilates Core</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">45 min | Foam roller, band, yoga block</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Myofascial Release (8 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Thoracic spine foam rolling</strong> — Roller under shoulder blades, gentle extensions. <em>3 min</em></li>
 <li><strong>Pec release with lacrosse ball</strong> — Against wall at chest height. <em>90 sec each side</em></li>
 <li><strong>Upper trap/levator release</strong> — Ball between shoulder blade and spine. <em>2 min</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Corrective Stretches (6 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Doorway pec stretch</strong> — Forearm on frame at 90°. <em>30 sec × 2 each side</em></li>
 <li><strong>Upper trap stretch</strong> — Ear to shoulder, gentle hand assist. <em>30 sec each side</em></li>
 <li><strong>Chin tuck with levator stretch</strong> — Tuck chin, rotate toward armpit. <em>30 sec each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Pilates Core Activation (20 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Dead bug with TrA</strong> — Maintain low back contact with floor. <em>3 sets × 8 each side</em></li>
 <li><strong>Modified hundred</strong> — Knees at 90°. Arm pumps: inhale 5, exhale 5. <em>50-100 pumps</em></li>
 <li><strong>Bird-dog</strong> — No rotation through pelvis. 5-sec holds. <em>3 sets × 10 each side</em></li>
 <li><strong>Modified side plank (from knee)</strong> — Keep body straight. <em>Hold 20-30 sec × 3 each side</em></li>
 <li><strong>Bridge with marching</strong> — Lift hips, alternate lifting feet 2 inches. <em>3 sets × 8 each side</em></li>
 <li><strong>Prone Y raises</strong> — Lift arms 2-3 inches, squeeze lower traps. <em>Hold 3 sec × 12 reps</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Scoliosis-Specific Work (8 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Schroth elongation stretch</strong> — Stand tall, arms overhead. Breathe into concave side. <em>5 breaths × 3 sets</em></li>
 <li><strong>Side-lying rotation</strong> — Convex side down, top arm reaches up. <em>8 reps each side</em></li>
 <li><strong>Asymmetrical kneeling stretch</strong> — Opposite arm overhead, lean away. <em>30 sec × 2 each side</em></li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Cool-down (3 min):</strong> Child's pose (60 sec), partial hang from pull-up bar (30-60 sec)</p>
 </div>
 </div>
 </div>

 <!-- TUESDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">TUESDAY: Upper Body Strength + Mobility</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">45 min | Dumbbells, band, pull-up bar, parallel bars</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Myofascial Release (4 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Lat foam rolling</strong> — Side-lying, armpit to mid-ribcage. <em>90 sec each side</em></li>
 <li><strong>Posterior shoulder ball release</strong> — Rear delt/infraspinatus. <em>60 sec each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Strength Circuit (25 min) — 3 rounds, 60-90 sec rest</h4>
 <ol style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Band pull-aparts</strong> — Squeeze shoulder blades. <em>15 reps</em></li>
 <li><strong>Dumbbell rows (single arm, supported)</strong> — Keep core braced, no rotation. <em>10 reps each arm</em></li>
 <li><strong>Wall slides</strong> — Arms in "goal post," maintain wall contact. <em>12 reps</em></li>
 <li><strong>Face pulls with band</strong> — Pull to face, externally rotate shoulders. <em>12 reps</em></li>
 <li><strong>Assisted pull-up negatives or inverted rows</strong> — 5-sec slow lowers OR inverted rows. <em>5 negatives or 8 rows</em></li>
 <li><strong>Prone T raises</strong> — Arms out, thumbs up. Squeeze middle traps. <em>12 reps, 2-sec holds</em></li>
 </ol>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Deep Neck Flexor Strengthening (5 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Supine chin tuck with head lift</strong> — Lift head 1 inch. <em>Hold 5-10 sec × 8 reps</em></li>
 <li><strong>Prone chin tuck</strong> — Forehead on block, tuck against gravity. <em>8 reps × 5-sec holds</em></li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Cool-down (3 min):</strong> Thread the needle (8 reps each side), chest opener over foam roller (60 sec)</p>
 </div>
 </div>
 </div>

 <!-- WEDNESDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">WEDNESDAY: Active Recovery Yoga Flow</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">40 min | Yoga blocks (2), foam roller | Hold 5-8 breaths</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Sequence 1: Spinal Mobility</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Tabletop circles</strong> — Make circles with ribcage. <em>8 each direction</em></li>
 <li><strong>Puppy pose</strong> — Chest toward floor, blocks under forehead if needed</li>
 <li><strong>Thread the needle</strong> — Each side, 5 breaths</li>
 <li><strong>Modified sphinx pose</strong> — Gentle thoracic extension, avoid lumbar hyperextension</li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Sequence 2: Hip Opening (Toe-Safe)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>90-90 hip stretch</strong> — Both legs at 90°, lean toward front shin. <em>5 breaths each side</em></li>
 <li><strong>Figure-four stretch</strong> — Supine, ankle crossed over knee. <em>8 breaths each side</em></li>
 <li><strong>Happy baby</strong> — Hold outer feet, gentle rock side to side</li>
 <li><strong>Supine spinal twist</strong> — Knees to one side, arms in T. <em>5 breaths each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Sequence 3: Standing Balance (Modified)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Tree pose</strong> — Foot on ankle/calf (NOT knee). Keep standing foot flat. <em>30 sec each side</em></li>
 <li><strong>Warrior II</strong> — Back foot flat, toes forward. <em>5 breaths each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Restorative Holds (8 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Legs up the wall</strong> — <em>3 minutes</em></li>
 <li><strong>Supported fish pose</strong> — Roller under thoracic spine, knees bent. <em>3 minutes</em></li>
 <li><strong>Savasana with breathing</strong> — <em>2 minutes</em></li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Foot Mobility (2 min):</strong> Ankle circles (10 each direction), towel scrunches (1 min), toe spreads (5 sec × 5 reps)</p>
 </div>
 </div>
 </div>

 <!-- THURSDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">THURSDAY: Corrective + Lower Body Strength</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">50 min | Dumbbells, band, stepper platform, yoga block</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Myofascial Release (6 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Glute/piriformis with ball</strong> — Sit on ball, cross ankle over knee. <em>2 min each side</em></li>
 <li><strong>Hip flexor/TFL foam rolling</strong> — Side-lying, roller at hip. <em>90 sec each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Hip Mobility (6 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Kneeling hip flexor stretch</strong> — Tuck pelvis, lean forward. <em>30 sec × 2 each side</em></li>
 <li><strong>90-90 hip transitions</strong> — Flow between rotations. <em>8 transitions</em></li>
 <li><strong>Frog stretch</strong> — Knees wide, rock hips back. <em>60 seconds</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Strength Circuit (22 min) — 3 rounds, 60 sec rest</h4>
 <ol style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Glute bridges</strong> — Drive through heels, squeeze at top. <em>15 reps</em></li>
 <li><strong>Clamshells with band</strong> — Band above knees, open top knee. <em>15 reps each side</em></li>
 <li><strong>Wall sit</strong> — Feet flat, no toe push. <em>Hold 30-45 seconds</em></li>
 <li><strong>Side-lying hip abduction</strong> — Lift and lower with control. <em>12 reps each side</em></li>
 <li><strong>Step-up (heel emphasis)</strong> — Push through heel, not toes. <em>10 each leg</em></li>
 <li><strong>Romanian deadlift</strong> — Light weight, hinge at hips. <em>10 reps</em></li>
 </ol>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Scoliosis-Specific Hip Work (5 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Single-leg bridge</strong> — Keep pelvis level, hold 3 sec at top. <em>8 reps each side</em></li>
 <li><strong>Side plank hip dips (from knee)</strong> — Lower and lift hip. <em>8 reps each side</em></li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Cool-down (3 min):</strong> Modified pigeon (block under hip, 60 sec each side), supine twist (30 sec each side), partial hang (45 sec)</p>
 </div>
 </div>
 </div>

 <!-- FRIDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">FRIDAY: Rest or Gentle Walking</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">Rest day or 20-30 min walk</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <p style="color: #3d2f31; margin-bottom: 12px;">Complete rest day OR optional 20-30 minute comfortable treadmill walk with minimal incline.</p>
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <p style="color: #3d2f31; margin-bottom: 10px;"><strong>If walking:</strong> Wear supportive shoes with rocker soles. Keep pace conversational.</p>
 <p style="color: #3d2f31; margin-bottom: 0;"><strong>Optional pain-relief:</strong> Heat on tight areas, 5 min diaphragmatic breathing, gentle chin tucks (10 reps)</p>
 </div>
 </div>
 </div>

 <!-- SATURDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">SATURDAY: Full Body Calisthenics + Cardio</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">50 min | Parallel bars, band, dumbbells, treadmill</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Low-Impact Cardio (12 min)</h4>
 <p style="color: #3d2f31; margin: 0;">Choose one: Treadmill incline walk (3-5%, moderate pace) • Cycling • Rebounder gentle bounce (keep feet flat)</p>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Calisthenics Circuit (22 min) — 4 rounds, 45 sec rest</h4>
 <ol style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Supported squat</strong> — Hold bars for balance, drive through heels. <em>12 reps</em></li>
 <li><strong>Incline push-up on bars</strong> — Feet on floor, lower chest to bar level. <em>10 reps</em></li>
 <li><strong>Bent-over reverse fly</strong> — Light dumbbells, fly arms out. <em>12 reps</em></li>
 <li><strong>Pallof press (anti-rotation)</strong> — Band at chest height, resist rotation. <em>10 reps each side</em></li>
 <li><strong>Single-leg Romanian deadlift</strong> — Light dumbbell, hinge on one leg. <em>8 each side</em></li>
 <li><strong>Supported dips (partial)</strong> — Lower 1/4 depth OR tricep dips on platform. <em>8 reps</em></li>
 </ol>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Core Finisher (5 min)</h4>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li><strong>Plank</strong> — From forearms, modify from knees if needed. <em>30-45 sec × 2</em></li>
 <li><strong>Dead bug</strong> — Slow, controlled. <em>10 each side</em></li>
 <li><strong>Side plank holds</strong> — <em>20 seconds each side</em></li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Cool-down (3 min):</strong> Standing forward fold (soft knees), chest opener against wall, neck stretches</p>
 </div>
 </div>
 </div>

 <!-- SUNDAY -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">SUNDAY: Deep Mobility + Myofascial Release</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">40 min | Foam roller, ball, yoga blocks, band | 2 min per area</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Full-Body Myofascial Release (20 min)</h4>
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Neck/Upper Back:</strong></p>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px; margin-bottom: 12px;">
 <li>Suboccipital release — 2 balls at skull base, gentle nod "yes" and "no" • <em>2 min</em></li>
 <li>Upper trap/levator release — Ball against wall • <em>2 min each side</em></li>
 <li>Thoracic spine rolling — Roller mid-back, arms crossed, gentle extensions • <em>3 min</em></li>
 </ul>
 
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Shoulders/Chest:</strong></p>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px; margin-bottom: 12px;">
 <li>Pec minor release — Ball below collarbone • <em>90 sec each side</em></li>
 <li>Lat release — Side-lying on roller • <em>90 sec each side</em></li>
 </ul>
 
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Lower Back/Hips:</strong> (Never roll directly on lumbar spine)</p>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li>Glute max release — Sit on roller, lean to side • <em>2 min each side</em></li>
 <li>Piriformis with ball — Seated, ankle crossed over knee • <em>2 min each side</em></li>
 <li>TFL/IT band — Side-lying, hip to above knee • <em>90 sec each side</em></li>
 <li>Hip flexor release — Prone, ball below hip crease • <em>90 sec each side</em></li>
 </ul>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 12px; border: 1px solid #d4b5ba;">
 <h4 style="color: #3d2f31; margin-bottom: 10px; font-size: 1.05rem;">Mobility Flow (15 min)</h4>
 <p style="color: #3d2f31; margin-bottom: 8px;"><strong>Thoracic:</strong> Open book (8 each side) • Foam roller extension (10 reps) • Cat-cow (10 cycles)</p>
 <p style="color: #3d2f31; margin-bottom: 8px;"><strong>Hip:</strong> World's greatest stretch modified (5 each side) • Frog pose (60 sec) • Pigeon supported (60 sec each side)</p>
 <p style="color: #3d2f31; margin: 0;"><strong>Spinal Decompression:</strong> Child's pose with reach (30 sec each side) • Dead hang partial (2 × 30 sec)</p>
 </div>

 <div style="background: #f5f0ed; padding: 12px; border-left: 3px solid #b59197;">
 <p style="color: #3d2f31; margin: 0;"><strong>Closing (5 min):</strong> Supine twist (60 sec each side), happy baby (60 sec), legs up wall (2 min), 10 diaphragmatic breaths</p>
 </div>
 </div>
 </div>

 <!-- FLARE DAY PROTOCOL -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">Pain Flare Day Protocol</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">20 min | When pain increases</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <ol style="color: #3d2f31; line-height: 2; padding-left: 20px;">
 <li>Heat application — 10 min on most painful area</li>
 <li>Diaphragmatic breathing — 3 minutes</li>
 <li>Gentle cat-cow — 10 very slow cycles</li>
 <li>Supine twist — 60 sec each side</li>
 <li>Targeted myofascial release — 3-4 min on most painful area</li>
 <li>Legs up wall — 5 minutes</li>
 <li>Ice application — 10 min post-movement if inflammation present</li>
 </ol>
 <p style="color: #3d2f31; margin-top: 12px; font-weight: 600;">Skip strength entirely. Return to normal programming when pain returns to baseline (24-48 hours).</p>
 </div>
 </div>
 </div>

 <!-- EXERCISES TO AVOID -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">Exercises to Strictly Avoid</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">Scoliosis & toe arthritis contraindications</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Scoliosis Contraindications:</strong></p>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px; margin-bottom: 16px;">
 <li>Heavy axial loading (back squats, heavy overhead press)</li>
 <li>Russian twists or loaded rotation</li>
 <li>Deep backbends/hyperextension</li>
 <li>Traditional sit-ups/crunches</li>
 <li>Inversion tables (without medical guidance)</li>
 </ul>
 
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Toe Arthritis Contraindications:</strong></p>
 <ul style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li>Traditional calf raises (pushing through toes)</li>
 <li>Deep lunges (excessive toe flexion)</li>
 <li>Jumping/plyometrics</li>
 <li>Running</li>
 <li>Downward dog with full toe dorsiflexion</li>
 </ul>
 </div>
 </div>
 </div>

 <!-- PROGRESSION TIMELINE -->
 <div class="exercise-day">
 <div class="exercise-day-header" onclick="this.parentElement.classList.toggle('active')">
 <div>
 <h3 class="exercise-day-title">Progression Over 12 Weeks</h3>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.9rem;">How to progress safely</p>
 </div>
 <span class="exercise-day-arrow">&#9660;</span>
 </div>
 <div class="exercise-day-content">
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Weeks 1-4 (Foundation):</strong> Perfect form, lightest weights, 2 sets, 20-30 sec holds</p>
 <p style="color: #3d2f31; margin-bottom: 12px;"><strong>Weeks 5-8 (Building):</strong> 30-45 sec holds, add resistance bands, 3 sets, +2-3 lbs dumbbells</p>
 <p style="color: #3d2f31; margin: 0;"><strong>Weeks 9-12 (Strengthening):</strong> 45-60 sec holds, single-leg variations, full side planks, tempo work (3-4 sec eccentrics)</p>
 </div>
 </div>
 </div>

 <div id="exercise-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('exercise')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'meals')">
 <span class="resource-name">Healthy Meals</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="meals-content">
 <!-- Chocolate Banana Smoothie Recipe -->
 <div style="background: #EBE0D6; padding: 12px; border-left: 3px solid #b59197; margin-bottom: 16px;">
 <div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer; padding: 4px 0;" onclick="var c=document.getElementById('smoothie-details');c.classList.toggle('open');this.querySelector('.toggle-arrow').classList.toggle('open');">
 <h3 style="color: #3d2f31; margin: 0; font-size: 1.1rem;">Chocolate Banana Smoothie Recipe</h3>
 <span class="toggle-arrow" style="color:#b59197;font-size:0.8rem;transition:transform 0.2s;">▶</span>
 </div>
 <p style="color: #7a6668; margin: 4px 0 0 0; font-style: italic; font-size: 0.85rem;">~322 cal, ~43g protein — after workout</p>
 <div class="resource-video-wrapper" id="smoothie-details">
 <div style="margin-top: 12px;">
 <div style="background: #fff; padding: 16px; margin-bottom: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px;">Ingredients:</h4>
 <table style="width: 100%; color: #3d2f31; font-size: 0.95rem;">
 <tr><td style="padding: 4px 0;">Unsweetened almond milk</td><td style="text-align: right;">1 cup (30 cal, 1g protein)</td></tr>
 <tr><td style="padding: 4px 0;">Unsweetened cacao powder</td><td style="text-align: right;">1.5 tbsp (18 cal, 1g protein)</td></tr>
 <tr><td style="padding: 4px 0;">ON Gold Standard Banana Cream whey</td><td style="text-align: right;">1 scoop (120 cal, 24g protein)</td></tr>
 <tr><td style="padding: 4px 0;">Vital Proteins chocolate collagen</td><td style="text-align: right;">~1/2 scoop (42 cal, 11g protein)</td></tr>
 <tr><td style="padding: 4px 0;">L-glutamine</td><td style="text-align: right;">5g (20 cal, 5g protein)</td></tr>
 <tr><td style="padding: 4px 0;">Nature's Way MCT oil</td><td style="text-align: right;">1 tsp (45 cal, 0g protein)</td></tr>
 <tr><td style="padding: 4px 0;">Frozen spinach (optional)</td><td style="text-align: right;">1 cup (7 cal, 1g protein)</td></tr>
 <tr><td style="padding: 4px 0;">Frozen blueberries (optional)</td><td style="text-align: right;">1/2 cup (40 cal, 0g protein)</td></tr>
 <tr style="border-top: 2px solid #b59197;"><td style="padding: 8px 0;"><strong>TOTAL:</strong></td><td style="text-align: right;"><strong>~322 cal, ~43g protein</strong></td></tr>
 </table>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px;">Instructions:</h4>
 <ol style="color: #3d2f31; line-height: 1.8; padding-left: 20px;">
 <li>Add almond milk + cacao powder to blender first</li>
 <li>Then add: protein, collagen, L-glutamine, MCT oil</li>
 <li>Add frozen spinach and blueberries last</li>
 <li>Blend 45–60 seconds</li>
 <li>Take your pills with the first few sips</li>
 </ol>
 </div>

 <div style="background: #fff; padding: 16px; margin-bottom: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px;">Pills to Take WITH Smoothie (need the fat):</h4>
 <ul style="color: #3d2f31; line-height: 1.8; list-style-type: none; padding-left: 0;">
 <li> Thorne Basic Nutrients 2/Day (1 cap)</li>
 <li> Sports Research Omega-3 (1-2 softgels)</li>
 <li> Jarrow QH-Absorb CoQ10 200mg (1 softgel)</li>
 <li> Nutricost Riboflavin 400mg (1 cap)</li>
 </ul>
 </div>

 <div style="background: #f5f0ed; padding: 12px;">
 <p style="color: #3d2f31; margin: 0;"><strong>Remember:</strong> Creatine is SEPARATE — mix your flavored creatine (5g) in water at 10 AM before leaving. No banana needed — Banana Cream protein handles the flavor. This is your only caffeine for the day (~15–20mg from cacao).</p>
 </div>
 </div>
 </div>
 </div>
 <div id="meals-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('meals')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'read')">
 <span class="resource-name">Read</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="read-content">
 <div id="read-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('read')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'walk')">
 <span class="resource-name">Walk / Podcasts</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="walk-content">
 <div id="walk-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('walk')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'tapping')">
 <span class="resource-name">EFT Tapping</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="tapping-content">
 <div id="tapping-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('tapping')">+ Add Resource</button>
 </div>
 </div>

 <div class="resource-category">
 <div class="resource-header" onclick="toggleResource(event, 'altar')">
 <span class="resource-name">Altar Time</span>
 <span class="resource-arrow">&#9660;</span>
 </div>
 <div class="resource-content" id="altar-content">
 <!-- Complete Altar Time Guide -->
 <div style="background: #EBE0D6; padding: 20px; border-left: 3px solid #b59197; margin-bottom: 16px;">
 <h3 style="color: #3d2f31; margin-bottom: 16px; font-size: 1.1rem;">Your 20-Minute Morning Sacred Ritual (8:30 AM)</h3>
 <p style="color: #3d2f31; margin-bottom: 20px; font-style: italic;">This is your grounding ritual. The order matters — breathwork calms the nervous system first, tapping clears emotional blocks, journaling sets your intention.</p>
 
 <!-- Step 1: Cyclic Sighing -->
 <div style="background: #fff; padding: 16px; margin-bottom: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px; font-size: 1rem;">Step 1: Cyclic Sighing (5 min)</h4>
 <p style="color: #3d2f31; margin-bottom: 12px;">Sit comfortably at your altar. This breathing pattern activates the parasympathetic nervous system more effectively than box breathing. Stanford research showed it as the single most effective breathwork for mood improvement.</p>
 
 <div style="background: #f5f0ed; padding: 12px; margin-top: 12px;">
 <strong style="color: #3d2f31; display: block; margin-bottom: 8px;">How to Do It:</strong>
 <div style="color: #3d2f31; line-height: 1.8;">
 1. <strong>Inhale #1:</strong> Breathe in through your nose (fill lungs ~halfway)<br>
 2. <strong>Inhale #2:</strong> Without exhaling, take a second short inhale through nose (fill lungs completely)<br>
 3. <strong>Exhale:</strong> Long, slow exhale through your mouth (twice as long as the inhales combined)<br>
 4. <strong>Repeat:</strong> 5 minutes. No timer needed — just feel when you're settled.
 </div>
 </div>
 </div>

 <!-- Step 2: EFT Tapping -->
 <div style="background: #fff; padding: 16px; margin-bottom: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px; font-size: 1rem;">Step 2: EFT Tapping (7-8 min)</h4>
 <p style="color: #3d2f31; margin-bottom: 12px;">Emotional Freedom Technique. Tap each point ~7 times while speaking your setup statement and reminder phrases.</p>
 
 <strong style="color: #3d2f31; display: block; margin-bottom: 8px;">Tapping Points (in order):</strong>
 <div style="background: #f5f0ed; padding: 12px; margin-bottom: 12px;">
 <table style="width: 100%; color: #3d2f31; font-size: 0.95rem;">
 <tr><td style="padding: 6px 0;"><strong>Karate chop</strong></td><td>Side of hand (pinky side) — Tap while saying full setup statement 3x</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Top of head</strong></td><td>Crown — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Eyebrow</strong></td><td>Inner edge of eyebrow — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Side of eye</strong></td><td>Bone at outer corner — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Under eye</strong></td><td>Bone under eye (center) — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Under nose</strong></td><td>Between nose and upper lip — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Chin</strong></td><td>Crease between lower lip and chin — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Collarbone</strong></td><td>Just below collarbone, 1 inch from center — ~7 taps + reminder phrase</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Under arm</strong></td><td>~4 inches below armpit — ~7 taps + reminder phrase</td></tr>
 </table>
 </div>

 <strong style="color: #3d2f31; display: block; margin-bottom: 8px;">Setup Statement Template:</strong>
 <p style="color: #3d2f31; font-style: italic; margin-bottom: 12px; background: #f5f0ed; padding: 12px;">
 "Even though I [feel/have/am struggling with ___], I deeply and completely accept myself."
 </p>

 <strong style="color: #3d2f31; display: block; margin-bottom: 8px;">Ideas for Daily Tapping Focus:</strong>
 <div style="background: #f5f0ed; padding: 12px;">
 <div style="color: #3d2f31; line-height: 1.8;">
 <strong>Overwhelmed / ADHD brain fog:</strong> "Even though my mind feels scattered, I choose to trust myself."<br>
 <strong>Pain / tension:</strong> "Even though my neck/shoulders hurt, I choose to release this tension."<br>
 <strong>Low motivation:</strong> "Even though I don't feel like doing anything, I accept where I am right now."<br>
 <strong>Self-doubt:</strong> "Even though I don't trust myself, I'm learning to."<br>
 <strong>Anxiety about the day:</strong> "Even though I'm anxious about today, I am safe and capable."<br>
 <strong>General morning check-in:</strong> "Even though I'm still waking up, I choose to show up for myself today."
 </div>
 </div>
 </div>

 <!-- Step 3: Journaling -->
 <div style="background: #fff; padding: 16px; border: 1px solid #d4b5ba;">
 <h4 style="color: #b59197; margin-bottom: 12px; font-size: 1rem;">Step 3: Journaling (5-7 min)</h4>
 <p style="color: #3d2f31; margin-bottom: 12px;">Keep a dedicated journal at your altar. Don't overthink it. Pick ONE prompt or free-write.</p>
 
 <strong style="color: #3d2f31; display: block; margin-bottom: 8px;">Rotating Daily Prompts:</strong>
 <div style="background: #f5f0ed; padding: 12px;">
 <table style="width: 100%; color: #3d2f31; font-size: 0.95rem;">
 <tr><td style="padding: 6px 0;"><strong>Monday:</strong></td><td>What am I building this week? What's one thing I want to accomplish?</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Tuesday:</strong></td><td>What am I grateful for right now? (3 things, be specific)</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Wednesday:</strong></td><td>What am I holding onto that I need to release?</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Thursday:</strong></td><td>What does my highest self want me to know today?</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Friday:</strong></td><td>What did I do well this week? Where did I show up for myself?</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Saturday:</strong></td><td>Free write — whatever comes up. No rules.</td></tr>
 <tr><td style="padding: 6px 0;"><strong>Sunday:</strong></td><td>What do I need more of? Less of? What's one intention for next week?</td></tr>
 </table>
 </div>
 
 <p style="color: #7a6668; margin-top: 16px; font-style: italic; border-top: 1px solid #d4b5ba; padding-top: 16px;">
 <strong>PERMISSION:</strong> This is YOUR sacred time. Light a candle, pull a tarot card, say a prayer — whatever feels right. The structure above is a framework, not a cage. Some mornings you'll spend the whole 20 min journaling. Some mornings you'll spend it all tapping. Follow your intuition.
 </p>
 </div>
 </div>
 <div id="altar-items"></div>
 <button class="add-resource-btn" onclick="showAddResourceForm('altar')">+ Add Resource</button>
 </div>
 </div>
 </div>
 </div>

 <!-- VIDEOS TAB -->
 <div id="videos-tab" class="hub-tab">
 <div class="section">
 <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
 <div>
 <h2 class="section-title" style="margin-bottom: 2px;">Video Hub</h2>
 <div id="videoCount" style="font-size: 0.8rem; color: #7a6668;"></div>
 </div>
 <button class="add-event-btn" onclick="toggleVideoForm()" style="margin:0;">+ Add</button>
 </div>
 
 <div class="event-form" id="videoForm">
 <form onsubmit="event.preventDefault(); addVideo(event);">
 <div class="form-group">
 <label>Video Title</label>
 <input type="text" name="title" required>
 </div>
 <div class="form-group">
 <label>Upload Video from Phone</label>
 <input type="file" name="video" accept="video/*" id="videoFile" onchange="handleVideoUpload()">
 <div id="videoUploadStatus" style="margin-top: 6px; font-size: 0.82rem; color: #7ba886; display: none;"></div>
 <div style="text-align: center; color: #999; margin: 8px 0; font-size: 0.85rem;">&mdash; OR &mdash;</div>
 </div>
 <div class="form-group">
 <label>Video Link (TikTok, YouTube, etc)</label>
 <input type="url" name="link" id="videoLink">
 </div>
 <div class="form-group">
 <label>Tags (comma separated)</label>
 <input type="text" name="tags" placeholder="motivation, exercise, meditation">
 </div>
 <div class="form-actions">
 <button type="button" class="btn" onclick="toggleVideoForm()">Cancel</button>
 <button type="submit" class="btn" id="videoSaveBtn">Save Video</button>
 </div>
 </form>
 </div>

 <div id="videosList" class="video-grid">
 <div class="empty-state" style="grid-column: 1/-1;">No videos yet. Add your first motivational video!</div>
 </div>
 </div>
 </div>

 <!-- Video Detail Modal -->
 <div class="video-detail-modal" id="videoDetailModal" onclick="if(event.target===this)closeVideoDetail()">
 <div class="video-detail-header">
 <div class="video-detail-title" id="videoDetailTitle"></div>
 <button class="video-detail-close" onclick="closeVideoDetail()">×</button>
 </div>
 <div class="video-detail-body" id="videoDetailBody"></div>
 <div class="video-detail-footer">
 <div class="video-detail-tags" id="videoDetailTags"></div>
 <button class="video-detail-delete" id="videoDetailDelete">Delete</button>
 </div>
 </div>


 <!-- JOURNAL TAB -->
 <div id="journal-tab" class="hub-tab">
 <div class="journal-locked" id="journalLocked">
 <a href="kasey-hub.html" class="journal-back-btn">← Back to Hub</a>
 <div class="journal-password-box">
 
 <div class="journal-password-title">My Private Journal</div>
 <div class="journal-password-subtitle">Enter password to unlock</div>
 <input type="password" id="journalPassword" class="journal-password-input" placeholder="Password" onkeypress="if(event.key==='Enter') unlockJournal()">
 <button class="journal-unlock-btn" onclick="unlockJournal()">Unlock</button>
 <div class="journal-error" id="journalError">Incorrect password. Try again.</div>
 </div>
 </div>

 <div class="todo-container" style="display: none;" id="journalContent">
 <div class="journal-header">
 <div class="journal-title">My Journal</div>
 <div class="journal-subtitle">A space for your thoughts <span class="journal-heart"></span></div>
 </div>

 <div class="journal-entry-form">
 <div class="journal-form-date" id="journalFormDate"></div>
 <textarea id="journalTextarea" class="journal-textarea" placeholder="Dear Journal,

What's on my mind today..."></textarea>
 <button class="journal-save-btn" onclick="saveJournalEntry()">Save Entry</button>
 </div>

 <div class="journal-entries" id="journalEntries">
 <div class="journal-empty">No entries yet. Start writing! <span class="journal-heart"></span></div>
 </div>
 </div>
 </div>

 <!-- PROMPT TAB -->
 <div id="prompt-tab" class="hub-tab">
 <div class="section">
 <h2 class="section-title">Today's Prompt</h2>
 
 <div class="prompt-question">
 <div class="prompt-label">Question of the Day</div>
 <div class="prompt-text" id="promptQuestionHub"></div>
 </div>

 <div id="currentAnswerBox" style="display: none; margin-bottom: 20px;">
 <div class="answer-box">
 <div class="answer-person">Your Current Answer</div>
 <div class="answer-text" id="currentAnswer"></div>
 </div>
 </div>

 <div class="event-form active">
 <form onsubmit="saveAnswer(event)">
 <div class="form-group">
 <label id="answerLabel">Your Answer</label>
 <textarea name="answer" rows="6" required id="answerInput"></textarea>
 </div>
 <div class="form-actions">
 <button type="submit" class="btn">Save Answer</button>
 </div>
 </form>
 </div>
 </div>
 </div>
 </div>

 <div class="celebration" id="celebration">
 <h2>BINGO!</h2>
 <p>Amazing work! You got 4 in a row!</p>
 <button class="btn" onclick="closeCelebration()">Continue</button>
 </div>

 <!-- Habits Editor Modal -->
 <div class="habits-modal-overlay" id="habitsModalOverlay" onclick="closeHabitsEditor(event)">
 <div class="habits-modal" onclick="event.stopPropagation()">
 <div class="habits-modal-header">
 <div class="habits-modal-title">Edit My Habits</div>
 <button class="habits-modal-close" onclick="closeHabitsEditor()">&times;</button>
 </div>
 <div class="habit-count" id="habitCount">20 habits (16 shown on bingo card)</div>
 <div class="habits-list" id="habitsList"></div>
 <div class="add-habit-row">
 <input type="text" id="newHabitInput" placeholder="Add new habit..." onkeypress="if(event.key==='Enter') addNewHabit()">
 <button class="add-habit-btn" onclick="addNewHabit()">+</button>
 </div>
 <div class="habits-modal-actions">
 <button class="habits-cancel-btn" onclick="closeHabitsEditor()">Cancel</button>
 <button class="habits-save-btn" onclick="saveHabitsChanges()">Save Changes</button>
 </div>
 </div>
 </div>

 <script>
 const defaultKaseyHabits = [
 "Drink 8 Glasses of Water",
 "Exercise 30+ Minutes",
 "Eat a Healthy Meal",
 "Read 10+ Pages",
 "Meditate",
 "Subliminals & Rampages",
 "Journal",
 "Walk 8k Steps",
 "Stretch",
 "Vibration Plate",
 "Take Vitamins & Supplements",
 "Morning Routine",
 "Evening Routine",
 "Do Laundry",
 "Altar Time",
 "Tidy Living Space",
 "Dry Brushing & Face Massage",
 "EFT Tapping",
 "Spend Time Outside",
 "No Social Media in the Morning"
 ];

 let kaseyHabits = [...defaultKaseyHabits];
 let editingHabits = [];

 // Load custom habits from localStorage
 function loadCustomHabits() {
 const saved = localStorage.getItem('kaseyCustomHabits');
 if (saved) {
 const parsed = JSON.parse(saved);
 if (parsed && parsed.length >= 16) {
 kaseyHabits = parsed;
 }
 }
 }

 // Habits Editor Functions
 function openHabitsEditor() {
 editingHabits = [...kaseyHabits];
 renderHabitsList();
 document.getElementById('habitsModalOverlay').classList.add('visible');
 }

 function closeHabitsEditor(event) {
 if (event && event.target !== event.currentTarget) return;
 document.getElementById('habitsModalOverlay').classList.remove('visible');
 }

 function renderHabitsList() {
 const list = document.getElementById('habitsList');
 document.getElementById('habitCount').textContent = `${editingHabits.length} habits (16 shown on bingo card)`;
 
 list.innerHTML = editingHabits.map((habit, index) => `
 <div class="habit-item">
 <input type="text" value="${habit}" onchange="updateHabit(${index}, this.value)">
 <button class="habit-delete" onclick="deleteHabit(${index})">×</button>
 </div>
 `).join('');
 }

 function updateHabit(index, value) {
 editingHabits[index] = value.trim();
 }

 function deleteHabit(index) {
 if (editingHabits.length <= 16) {
 alert('You need at least 16 habits for the bingo card!');
 return;
 }
 editingHabits.splice(index, 1);
 renderHabitsList();
 }

 function addNewHabit() {
 const input = document.getElementById('newHabitInput');
 const value = input.value.trim();
 if (!value) return;
 
 editingHabits.push(value);
 input.value = '';
 renderHabitsList();
 }

 function saveHabitsChanges() {
 editingHabits = editingHabits.filter(h => h.trim() !== '');
 
 if (editingHabits.length < 16) {
 alert('You need at least 16 habits for the bingo card!');
 return;
 }
 
 kaseyHabits = [...editingHabits];
 localStorage.setItem('kaseyCustomHabits', JSON.stringify(kaseyHabits));
 shuffleBoard();
 closeHabitsEditor();
 }

 const dailyPrompts = [
 "What's one thing I did today that made you smile?",
 "What's your favorite memory of us from this past month?",
 "What's one way I can support you better this week?",
 "What's something you're grateful for about our relationship?",
 "What's a goal you have for us as a couple?",
 "What's one thing you admire about me?",
 "What's your favorite thing we do together?",
 "What's something new you'd like to try together?",
 "What's a challenge we've overcome together that you're proud of?",
 "What makes you feel most loved by me?",
 "What's something you've learned about yourself through our relationship?",
 "What's a small gesture I do that means a lot to you?",
 "What's your favorite quality about our relationship?",
 "What's something you're excited about for our future?",
 "What's one way we've grown together recently?",
 "What's a tradition you'd like to start with us?",
 "What's something I do that makes you laugh?",
 "What's your favorite way to spend quality time together?",
 "What's something you want to accomplish together this year?",
 "What's one thing about our relationship that makes you feel secure?",
 "What's a moment when you felt really connected to me?",
 "What's something you appreciate about how we handle disagreements?",
 "What's your favorite inside joke or moment between us?",
 "What's one way our relationship has changed you for the better?",
 "What's something you'd like more of in our relationship?",
 "What's a compliment you wish you heard more often?",
 "What's your favorite physical gesture of affection from me?",
 "What's something I do that helps you feel understood?",
 "What's a dream you have for us that we haven't talked about yet?",
 "What's one thing that always brightens your day when I do it?"
 ];

 const defaultResources = {
 meditate: [
 { title: 'Insight Timer', link: 'https://insighttimer.com', note: 'Free guided meditations. Huge library.' },
 { title: 'Headspace', link: 'https://www.headspace.com', note: '10-min daily meditations. Great for beginners.' }
 ],
 exercise: [
 { title: 'Yoga with Adriene', link: 'https://www.youtube.com/@yogawithadriene', note: '30-day programs, all levels.' },
 { title: 'Rebounder Workouts', link: 'https://www.youtube.com/results?search_query=rebounder+workout', note: 'Low impact cardio, fun!' }
 ],
 meals: [
 { title: 'Budget Bytes', link: 'https://www.budgetbytes.com', note: 'Easy, affordable, healthy recipes.' }
 ],
 read: [
 { title: 'Atomic Habits by James Clear', link: null, note: 'THE book for building habits.' },
 { title: 'The Mountain Is You by Brianna Wiest', link: null, note: 'About self-sabotage and growth.' }
 ],
 walk: [
 { title: 'Unlocking Us - Bren&eacute; Brown', link: null, note: 'Podcast about vulnerability and courage.' }
 ],
 tapping: [
 { title: 'Brad Yates YouTube', link: 'https://www.youtube.com/@BradYates', note: 'Huge free library of tapping videos.' }
 ],
 altar: [
 { title: 'Daily tarot pull', link: null, note: 'One card. "What do I need to know today?"' },
 { title: 'New moon intentions', link: null, note: 'Write intentions, place on altar with crystals.' }
 ]
 };

 let boardState = [];
 let currentHabits = [];
 let videos = [];
 let resources = {};
 let todos = [];
 let pendingResourceFile = null;
 let pendingResourceBlob = null;
 let pendingVideoFile = null;
 let pendingVideoBlob = null; // Raw blob for IndexedDB storage

 // ===== IndexedDB Video Storage =====
 const VIDEODB_NAME = 'kaseyVideoHub';
 const VIDEODB_VERSION = 1;
 const VIDEODB_STORE = 'videoFiles';

 function openVideoDB() {
   return new Promise((resolve, reject) => {
     const request = indexedDB.open(VIDEODB_NAME, VIDEODB_VERSION);
     request.onupgradeneeded = (e) => {
       const db = e.target.result;
       if (!db.objectStoreNames.contains(VIDEODB_STORE)) {
         db.createObjectStore(VIDEODB_STORE, { keyPath: 'id' });
       }
     };
     request.onsuccess = () => resolve(request.result);
     request.onerror = () => reject(request.error);
   });
 }

 async function saveVideoBlob(id, blob, type, name) {
   const db = await openVideoDB();
   return new Promise((resolve, reject) => {
     const tx = db.transaction(VIDEODB_STORE, 'readwrite');
     tx.objectStore(VIDEODB_STORE).put({ id, blob, type, name });
     tx.oncomplete = () => resolve();
     tx.onerror = () => reject(tx.error);
   });
 }

 async function getVideoBlob(id) {
   const db = await openVideoDB();
   return new Promise((resolve, reject) => {
     const tx = db.transaction(VIDEODB_STORE, 'readonly');
     const req = tx.objectStore(VIDEODB_STORE).get(id);
     req.onsuccess = () => resolve(req.result || null);
     req.onerror = () => reject(req.error);
   });
 }

 async function deleteVideoBlob(id) {
   const db = await openVideoDB();
   return new Promise((resolve, reject) => {
     const tx = db.transaction(VIDEODB_STORE, 'readwrite');
     tx.objectStore(VIDEODB_STORE).delete(id);
     tx.oncomplete = () => resolve();
     tx.onerror = () => reject(tx.error);
   });
 }
 // ===== End IndexedDB =====

 // TO-DO LIST FUNCTIONS
 function loadTodos() {
 const savedData = loadFromStorage('todos_kasey');
 if (savedData) {
 todos = savedData;
 } else {
 const saved = localStorage.getItem('todos_kasey');
 if (saved) {
 todos = JSON.parse(saved);
 saveToStorage('todos_kasey', todos);
 } else {
 todos = [];
 }
 }
 renderTodos();
 
 setupStorageListener('todos_kasey', (data) => {
 todos = data;
 renderTodos();
 });
 }

 function saveTodos() {
 localStorage.setItem('todos_kasey', JSON.stringify(todos));
 saveToStorage('todos_kasey', todos);
 }

 function addTodo() {
 const input = document.getElementById('todoInput');
 const text = input.value.trim();
 
 if (text === '') return;
 
 const todo = {
 id: Date.now(),
 text: text,
 completed: false,
 createdAt: new Date().toISOString()
 };
 
 todos.unshift(todo);
 saveTodos();
 renderTodos();
 input.value = '';
 }

 function toggleTodo(id) {
 const todo = todos.find(t => t.id === id);
 if (todo) {
 todo.completed = !todo.completed;
 saveTodos();
 renderTodos();
 }
 }

 function deleteTodo(id) {
 todos = todos.filter(t => t.id !== id);
 saveTodos();
 renderTodos();
 }

 // Make functions globally accessible
 window.addTodo = addTodo;
 window.toggleTodo = toggleTodo;
 window.deleteTodo = deleteTodo;

 // ===== FUTURE TO-DOS =====
 let futureTodos = [];
 const defaultFutureTodos = [
 { id: 1, text: 'Human Rights Certification Training through USIDHR', completed: false, createdAt: new Date().toISOString() },
 { id: 2, text: 'Fear Free Pet Sitter Training', completed: false, createdAt: new Date().toISOString() },
 { id: 3, text: 'Learn to crochet', completed: false, createdAt: new Date().toISOString() },
 { id: 4, text: 'Clean up photo albums on phone', completed: false, createdAt: new Date().toISOString() },
 { id: 5, text: 'Unpack boxes in house', completed: false, createdAt: new Date().toISOString() },
 { id: 6, text: 'Sort everything', completed: false, createdAt: new Date().toISOString() }
 ];

 function loadFutureTodos() {
 const saved = localStorage.getItem('futureTodos_kasey');
 if (saved) {
 futureTodos = JSON.parse(saved);
 } else {
 futureTodos = JSON.parse(JSON.stringify(defaultFutureTodos));
 saveFutureTodos();
 }
 renderFutureTodos();
 }

 function saveFutureTodos() {
 localStorage.setItem('futureTodos_kasey', JSON.stringify(futureTodos));
 }

 function addFutureTodo() {
 const input = document.getElementById('futureTodoInput');
 const text = input.value.trim();
 if (text === '') return;
 futureTodos.unshift({
 id: Date.now(),
 text: text,
 completed: false,
 createdAt: new Date().toISOString()
 });
 saveFutureTodos();
 renderFutureTodos();
 input.value = '';
 }

 function toggleFutureTodo(id) {
 const todo = futureTodos.find(t => t.id === id);
 if (todo) {
 todo.completed = !todo.completed;
 saveFutureTodos();
 renderFutureTodos();
 }
 }

 function deleteFutureTodo(id) {
 futureTodos = futureTodos.filter(t => t.id !== id);
 saveFutureTodos();
 renderFutureTodos();
 }

 function moveToCurrent(id) {
 const todo = futureTodos.find(t => t.id === id);
 if (todo) {
 futureTodos = futureTodos.filter(t => t.id !== id);
 todo.id = Date.now();
 todo.completed = false;
 todos.unshift(todo);
 saveFutureTodos();
 saveTodos();
 renderFutureTodos();
 renderTodos();
 }
 }

 function renderFutureTodos() {
 const list = document.getElementById('futureTodoList');
 if (futureTodos.length === 0) {
 list.innerHTML = '<div class="todo-empty">No future tasks yet.</div>';
 return;
 }
 list.innerHTML = futureTodos.map(todo => `
 <div class="todo-item${todo.completed ? ' completed' : ''}">
 <input 
 type="checkbox" 
 class="todo-checkbox" 
 ${todo.completed ? 'checked' : ''}
 onchange="window.toggleFutureTodo(${todo.id})"
 >
 <div class="todo-text">${escapeHtml(todo.text)}</div>
 <button class="todo-delete" onclick="window.moveToCurrent(${todo.id})" style="color: #7ba886; opacity: 1;" title="Move to Current">↑</button>
 <button class="todo-delete" onclick="window.deleteFutureTodo(${todo.id})">Delete</button>
 </div>
 `).join('');
 }

 window.addFutureTodo = addFutureTodo;
 window.toggleFutureTodo = toggleFutureTodo;
 window.deleteFutureTodo = deleteFutureTodo;
 window.moveToCurrent = moveToCurrent;
 // ===== END FUTURE TO-DOS =====

 window.showAddResourceForm = showAddResourceForm;
 window.hideAddResourceForm = hideAddResourceForm;
 window.addResource = addResource;
 window.editResource = editResource;
 window.deleteResource = deleteResource;
 window.toggleResource = toggleResource;
 window.handleResourceUpload = handleResourceUpload;
 window.addNewHabit = addNewHabit;
 window.changeDay = changeDay;
 window.closeCelebration = closeCelebration;
 window.closeHabitsEditor = closeHabitsEditor;
 window.deleteHabit = deleteHabit;
 window.deleteJournalEntry = deleteJournalEntry;
 window.deleteVideo = deleteVideo;
 window.resetBoard = resetBoard;
 window.saveHabitsChanges = saveHabitsChanges;
 window.saveJournalEntry = saveJournalEntry;
 window.shuffleBoard = shuffleBoard;
 window.toggleVideoForm = toggleVideoForm;
 window.unlockJournal = unlockJournal;
 window.addVideo = addVideo;
 window.saveAnswer = saveAnswer;

 function renderTodos() {
 const list = document.getElementById('todoList');
 
 if (todos.length === 0) {
 list.innerHTML = '<div class="todo-empty">No tasks yet. Add your first one above!</div>';
 return;
 }
 
 list.innerHTML = todos.map(todo => `
 <div class="todo-item${todo.completed ? ' completed' : ''}">
 <input 
 type="checkbox" 
 class="todo-checkbox" 
 ${todo.completed ? 'checked' : ''}
 onchange="window.toggleTodo(${todo.id})"
 >
 <div class="todo-text">${escapeHtml(todo.text)}</div>
 <button class="todo-delete" onclick="window.deleteTodo(${todo.id})">Delete</button>
 </div>
 `).join('');
 }

 function escapeHtml(text) {
 const div = document.createElement('div');
 div.textContent = text;
 return div.innerHTML;
 }

 // STORAGE FUNCTIONS (localStorage)
 function saveToStorage(collectionName, data) {
 localStorage.setItem(collectionName, JSON.stringify(data));
 }

 function loadFromStorage(collectionName) {
 const saved = localStorage.getItem(collectionName);
 return saved ? JSON.parse(saved) : null;
 }

 function setupStorageListener(collectionName, callback) {
 // No-op for localStorage (no real-time sync)
 }

 function switchTab(e, tab) {
 document.querySelectorAll('.hub-tab').forEach(t => t.classList.remove('active'));
 document.getElementById(`${tab}-tab`).classList.add('active');

 if (tab === 'prompt') loadHubPrompt();
 else if (tab === 'resources') renderAllResources();
 }

 function switchTabFromDropdown() {
 const dropdown = document.getElementById('sectionSelect');
 const selectedTab = dropdown.value;
 
 document.querySelectorAll('.hub-tab').forEach(t => t.classList.remove('active'));
 document.getElementById(`${selectedTab}-tab`).classList.add('active');

 if (selectedTab === 'prompt') loadHubPrompt();
 else if (selectedTab === 'resources') renderAllResources();
 }

 function goToWorkout() {
 // Switch to resources tab
 document.querySelectorAll('.hub-tab').forEach(t => t.classList.remove('active'));
 document.getElementById('resources-tab').classList.add('active');
 document.getElementById('sectionSelect').value = 'resources';
 renderAllResources();

 // Open exercise category
 const exerciseCat = document.querySelector('#exercise-content')?.closest('.resource-category');
 if (exerciseCat) exerciseCat.classList.add('active');

 // Find today's day name and expand it
 const dayNames = ['SUNDAY','MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY'];
 const todayName = dayNames[new Date().getDay()];
 const dayHeaders = document.querySelectorAll('.exercise-day-title');
 dayHeaders.forEach(h => {
 if (h.textContent.toUpperCase().includes(todayName)) {
 const dayEl = h.closest('.exercise-day');
 if (dayEl) {
 dayEl.classList.add('active');
 setTimeout(() => dayEl.scrollIntoView({ behavior: 'smooth', block: 'start' }), 200);
 }
 }
 });
 }

 function initBoard() {
 const today = new Date().toDateString();
 const savedDate = localStorage.getItem('bingoDate_kasey');
 const boardVersion = localStorage.getItem('bingoVersion_kasey');
 
 // Force reset if switching from 5x5 to 4x4
 if (boardVersion !== '4x4') {
 localStorage.removeItem('bingoState_kasey');
 localStorage.setItem('bingoVersion_kasey', '4x4');
 localStorage.setItem('bingoDate_kasey', today);
 shuffleBoard();
 } else if (savedDate !== today) {
 localStorage.removeItem('bingoState_kasey');
 localStorage.setItem('bingoDate_kasey', today);
 shuffleBoard();
 } else {
 const savedData = loadFromStorage('bingoState_kasey');
 if (savedData && savedData.habits && savedData.habits.length === 16) {
 currentHabits = savedData.habits;
 boardState = savedData.state;
 } else {
 const saved = localStorage.getItem('bingoState_kasey');
 if (saved) {
 const data = JSON.parse(saved);
 if (data.habits && data.habits.length === 16) {
 currentHabits = data.habits;
 boardState = data.state;
 saveToStorage('bingoState_kasey', data);
 } else {
 shuffleBoard();
 }
 } else {
 shuffleBoard();
 }
 }
 }
 
 updateDateDisplay();
 renderBoard();
 updateStats();
 
 setupStorageListener('bingoState_kasey', (data) => {
 if (data.habits && data.habits.length === 16) {
 currentHabits = data.habits;
 boardState = data.state;
 renderBoard();
 updateStats();
 }
 });
 }

 function updateDateDisplay() {
 const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
 document.getElementById('dateDisplay').textContent = new Date().toLocaleDateString('en-US', options);
 }

 function shuffleBoard() {
 // Save which habits are currently completed
 const completedHabits = new Set();
 currentHabits.forEach((habit, index) => {
 if (boardState[index]) {
 completedHabits.add(habit);
 }
 });

 // Shuffle and get new habits
 const shuffled = [...kaseyHabits].sort(() => Math.random() - 0.5).slice(0, 16);
 currentHabits = shuffled;
 
 // Restore completed state for ALL habits that were completed, even if they're on the new board
 boardState = new Array(16).fill(false);
 currentHabits.forEach((habit, index) => {
 if (completedHabits.has(habit)) {
 boardState[index] = true;
 }
 });

 saveState();
 renderBoard();
 updateStats();
 }

 function renderBoard() {
 const grid = document.getElementById('bingoGrid');
 grid.innerHTML = '';
 
 currentHabits.forEach((habit, index) => {
 const cell = document.createElement('div');
 cell.className = 'bingo-cell';
 cell.textContent = habit;
 
 if (boardState[index]) cell.classList.add('completed');
 cell.onclick = () => toggleCell(index);
 
 grid.appendChild(cell);
 });
 }

 function toggleCell(index) {
 boardState[index] = !boardState[index];
 saveState();
 renderBoard();
 updateStats();
 checkBingo();
 }

 function resetBoard() {
 boardState = new Array(16).fill(false);
 saveState();
 renderBoard();
 updateStats();
 }

 function saveState() {
 const data = {
 habits: currentHabits,
 state: boardState
 };
 localStorage.setItem('bingoState_kasey', JSON.stringify(data));
 saveToStorage('bingoState_kasey', data);
 }

 function updateStats() {
 const completed = boardState.filter(Boolean).length;
 document.getElementById('completedCount').textContent = completed;
 document.getElementById('bingoCount').textContent = countBingos();
 }

 function countBingos() {
 let count = 0;
 // Check rows (4 rows)
 for (let i = 0; i < 4; i++) {
 if (boardState.slice(i * 4, i * 4 + 4).every(Boolean)) count++;
 }
 // Check columns (4 columns)
 for (let i = 0; i < 4; i++) {
 if ([0, 1, 2, 3].every(j => boardState[i + j * 4])) count++;
 }
 // Check diagonals
 if ([0, 5, 10, 15].every(i => boardState[i])) count++; // Top-left to bottom-right
 if ([3, 6, 9, 12].every(i => boardState[i])) count++; // Top-right to bottom-left
 return count;
 }

 function checkBingo() {
 const prevCount = parseInt(localStorage.getItem('prevBingoCount_kasey') || '0');
 const currentCount = countBingos();
 if (currentCount > prevCount) showCelebration();
 localStorage.setItem('prevBingoCount_kasey', currentCount);
 }

 function showCelebration() {
 document.getElementById('celebration').classList.add('show');
 createConfetti();
 }

 function closeCelebration() {
 document.getElementById('celebration').classList.remove('show');
 }

 function createConfetti() {
 const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#ffd93d', '#a8e6cf', '#ff8b94', '#c7ceea', '#b4f8c8', '#ffa07a', '#98d8c8'];
 for (let i = 0; i < 100; i++) {
 setTimeout(() => {
 const confetti = document.createElement('div');
 confetti.className = 'confetti';
 confetti.style.left = Math.random() * 100 + '%';
 confetti.style.top = '-10px';
 confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
 const size = Math.random() * 8 + 6;
 confetti.style.width = size + 'px';
 confetti.style.height = size + 'px';
 const duration = Math.random() * 2 + 2;
 confetti.style.animationDuration = duration + 's';
 document.body.appendChild(confetti);
 setTimeout(() => confetti.remove(), duration * 1000);
 }, i * 30);
 }
 }

 function loadResources() {
 // Load saved resources, or use defaults only if nothing saved
 const savedData = localStorage.getItem('resources_kasey');
 if (savedData) {
 resources = JSON.parse(savedData);
 // Ensure all default categories exist (merge, don't replace)
 for (const cat of Object.keys(defaultResources)) {
 if (!resources[cat]) {
 resources[cat] = JSON.parse(JSON.stringify(defaultResources[cat]));
 }
 }
 } else {
 resources = JSON.parse(JSON.stringify(defaultResources));
 try { localStorage.setItem('resources_kasey', JSON.stringify(resources)); } catch(e) {}
 }

 // Migrate: strip any legacy base64 data to free localStorage
 let migrated = false;
 for (const cat of Object.keys(resources)) {
 resources[cat] = resources[cat].map(item => {
 if (item.file && item.file.data) {
 migrated = true;
 return { ...item, file: { type: item.file.type, name: item.file.name, size: item.file.size || 0, id: item.file.id || ('legacy_res_' + Date.now()) } };
 }
 return item;
 });
 }
 if (migrated) {
 try { localStorage.setItem('resources_kasey', JSON.stringify(resources)); } catch(e) {}
 }
 
 renderAllResources();
 }

 function saveResources() {
 // Strip base64 data before saving to localStorage — only metadata
 const metadataOnly = {};
 for (const [cat, items] of Object.entries(resources)) {
 metadataOnly[cat] = items.map(item => {
 if (item.file && item.file.data) {
 return { ...item, file: { type: item.file.type, name: item.file.name, size: item.file.size || 0, id: item.file.id } };
 }
 return item;
 });
 }
 try {
 localStorage.setItem('resources_kasey', JSON.stringify(metadataOnly));
 } catch(e) {
 try {
 localStorage.removeItem('resources_kasey');
 localStorage.setItem('resources_kasey', JSON.stringify(metadataOnly));
 } catch(e2) {
 console.warn('localStorage full for resources');
 }
 }
 }

 function handleResourceUpload() {
 const fileInput = document.getElementById('resourceFile');
 const file = fileInput.files[0];
 if (file) {
 const sizeMB = (file.size / 1024 / 1024).toFixed(1);
 if (file.size > 200 * 1024 * 1024) {
 alert('File too large (' + sizeMB + 'MB). Max is 200MB.');
 fileInput.value = '';
 return;
 }
 pendingResourceBlob = file;
 pendingResourceFile = {
 type: file.type,
 name: file.name,
 size: file.size
 };
 document.getElementById('resourceLink').value = '';
 }
 }

 function toggleResource(e, category) {
 e.target.closest('.resource-category').classList.toggle('active');
 }

 function renderAllResources() {
 Object.keys(resources).forEach(category => {
 renderResourceCategory(category); // async but fire-and-forget is fine here
 });
 }

 async function renderResourceCategory(category) {
 const container = document.getElementById(`${category}-items`);
 if (!container) {
 return;
 }

 if (!resources[category] || resources[category].length === 0) {
 container.innerHTML = '<div class="empty-state">No resources yet. Add your first one!</div>';
 return;
 }

 container.innerHTML = '';
 for (const [index, item] of resources[category].entries()) {
 const itemDiv = document.createElement('div');
 itemDiv.className = 'resource-item';
 
 let mediaContent = '';
 let isVideo = false;
 if (item.file && item.file.id) {
 // Load from IndexedDB
 try {
 const stored = await getVideoBlob(item.file.id);
 if (stored && stored.blob) {
 const blob = (stored.blob instanceof Blob) ? stored.blob : new Blob([stored.blob], { type: stored.type });
 const blobUrl = URL.createObjectURL(blob);
 if (item.file.type.startsWith('image')) {
 mediaContent = `<img src="${blobUrl}" style="max-width: 200px; margin-bottom: 8px; border-radius: 4px;">`;
 } else if (item.file.type.startsWith('video')) {
 isVideo = true;
 mediaContent = `<video controls style="width: 100%; max-width: 400px; margin-bottom: 8px;"><source src="${blobUrl}" type="${item.file.type}"></video>`;
 }
 }
 } catch(e) {
 mediaContent = '<div style="color:#c97a7a;font-size:0.85rem;">File not found in storage</div>';
 }
 } else if (item.file && item.file.data) {
 // Legacy base64 format
 if (item.file.type.startsWith('image')) {
 mediaContent = `<img src="${item.file.data}" style="max-width: 200px; margin-bottom: 8px; border-radius: 4px;">`;
 } else if (item.file.type.startsWith('video')) {
 isVideo = true;
 mediaContent = `<video controls style="width: 100%; max-width: 400px; margin-bottom: 8px;"><source src="${item.file.data}" type="${item.file.type}"></video>`;
 }
 }

 // Wrap videos in collapsible toggle if item has a title
 if (isVideo && item.title) {
 const toggleId = 'resvid_' + category + '_' + index;
 mediaContent = `
 <button class="resource-video-toggle" onclick="var w=document.getElementById('${toggleId}');w.classList.toggle('open');this.classList.toggle('open');">
 <span class="toggle-arrow">▶</span> Watch Video
 </button>
 <div class="resource-video-wrapper" id="${toggleId}">
 ${mediaContent}
 </div>`;
 }
 
 itemDiv.innerHTML = `
 <div class="resource-item-content">
 <div class="resource-item-title">${item.title}</div>
 ${mediaContent}
 ${item.link ? `<a href="${item.link}" target="_blank" class="resource-item-link">${item.link}</a>` : ''}
 ${item.note ? `<div class="resource-item-note">${item.note}</div>` : ''}
 </div>
 <div class="resource-item-actions">
 <button class="btn" onclick="editResource('${category}', ${index})" style="padding: 4px 8px; min-width: auto;" title="Edit">✎</button>
 <button class="btn" onclick="deleteResource('${category}', ${index})" style="padding: 4px 8px; min-width: auto;" title="Delete">&times;</button>
 </div>
 `;
 container.appendChild(itemDiv);
 }
 }

 function showAddResourceForm(category) {
 document.getElementById('resourceCategory').value = category;
 document.getElementById('resourceForm').classList.add('active');
 document.getElementById('resourceFormOverlay').classList.add('active');
 document.body.style.overflow = 'hidden'; // Prevent background scrolling
 }

 function hideAddResourceForm() {
 const form = document.getElementById('resourceForm');
 form.classList.remove('active');
 document.getElementById('resourceFormOverlay').classList.remove('active');
 form.querySelector('form').reset();
 document.body.style.overflow = ''; // Restore scrolling
 pendingResourceFile = null;
 pendingResourceBlob = null;
 // Clear edit state
 delete form.dataset.editIndex;
 delete form.dataset.editCategory;
 }

 async function addResource(e) {
 e.preventDefault();
 const formData = new FormData(e.target);
 const category = formData.get('category');
 const form = document.getElementById('resourceForm');
 const fileId = 'res_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);
 
 const resource = {
 title: formData.get('title'),
 link: formData.get('link') || null,
 note: formData.get('note') || null,
 file: pendingResourceFile ? { type: pendingResourceFile.type, name: pendingResourceFile.name, size: pendingResourceFile.size, id: fileId } : null
 };

 try {
 // Save blob to IndexedDB if there's a file
 if (pendingResourceBlob) {
 await saveVideoBlob(fileId, pendingResourceBlob, pendingResourceFile.type, pendingResourceFile.name);
 }

 // Check if we're editing
 if (form.dataset.editIndex !== undefined && form.dataset.editIndex !== '') {
 const index = parseInt(form.dataset.editIndex);
 // Keep existing file if no new file uploaded
 if (!resource.file && resources[category][index].file) {
 resource.file = resources[category][index].file;
 } else if (resource.file && resources[category][index].file && resources[category][index].file.id) {
 // Delete old blob if replacing
 try { await deleteVideoBlob(resources[category][index].file.id); } catch(e) {}
 }
 resources[category][index] = resource;
 delete form.dataset.editIndex;
 delete form.dataset.editCategory;
 } else {
 if (!resources[category]) resources[category] = [];
 resources[category].push(resource);
 }
 
 saveResources();
 renderResourceCategory(category);
 hideAddResourceForm();
 pendingResourceFile = null;
 pendingResourceBlob = null;
 } catch(err) {
 console.error('Resource save error:', err);
 alert('Could not save file: ' + (err.message || 'Unknown error'));
 }
 }

 async function deleteResource(category, index) {
 if (confirm('Delete this resource?')) {
 const item = resources[category][index];
 if (item.file && item.file.id) {
 try { await deleteVideoBlob(item.file.id); } catch(e) {}
 }
 resources[category].splice(index, 1);
 saveResources();
 renderResourceCategory(category);
 }
 }

 function editResource(category, index) {
 const resource = resources[category][index];
 
 // Populate the form with existing data
 document.getElementById('resourceCategory').value = category;
 document.querySelector('#resourceForm input[name="title"]').value = resource.title || '';
 document.querySelector('#resourceForm input[name="link"]').value = resource.link || '';
 document.querySelector('#resourceForm textarea[name="note"]').value = resource.note || '';
 
 // Store the index being edited
 document.getElementById('resourceForm').dataset.editIndex = index;
 document.getElementById('resourceForm').dataset.editCategory = category;
 
 // Show the form
 showAddResourceForm(category);
 }

 function handleVideoUpload() {
 const fileInput = document.getElementById('videoFile');
 const status = document.getElementById('videoUploadStatus');
 const saveBtn = document.getElementById('videoSaveBtn');
 const file = fileInput.files[0];
 if (file) {
 const sizeMB = (file.size / 1024 / 1024).toFixed(1);
 if (file.size > 200 * 1024 * 1024) {
 alert('Video too large (' + sizeMB + 'MB). Max is 200MB.\n\nFor very large videos, upload to YouTube and paste the link instead.');
 fileInput.value = '';
 return;
 }
 status.style.display = 'block';
 status.innerHTML = '<span style="display:inline-block;width:12px;height:12px;border:2px solid rgba(123,168,134,0.3);border-top-color:#7ba886;border-radius:50%;animation:spin 0.6s linear infinite;vertical-align:middle;margin-right:6px;"></span> Processing video (' + sizeMB + 'MB)...';
 saveBtn.disabled = true;
 saveBtn.style.opacity = '0.5';

 // Store as blob reference instead of base64
 pendingVideoBlob = file;
 pendingVideoFile = {
 type: file.type,
 name: file.name,
 size: file.size
 };
 document.getElementById('videoLink').value = '';
 status.innerHTML = '&#10004; Video ready (' + sizeMB + 'MB)';
 status.style.color = '#7ba886';
 saveBtn.disabled = false;
 saveBtn.style.opacity = '1';
 }
 }

 function loadVideos() {
 const savedData = loadFromStorage('videos_kasey');
 if (savedData) {
 videos = savedData;
 } else {
 const saved = localStorage.getItem('videos_kasey');
 if (saved) {
 videos = JSON.parse(saved);
 } else {
 videos = [];
 }
 }
 // Migrate: strip any legacy base64 data from memory & storage
 let migrated = false;
 videos = videos.map(v => {
 if (v.file && v.file.data) {
 migrated = true;
 return { ...v, file: { type: v.file.type, name: v.file.name, size: v.file.size || 0, id: v.id || ('legacy_' + Date.now()) } };
 }
 return v;
 });
 if (migrated) {
 try { localStorage.setItem('videos_kasey', JSON.stringify(videos)); } catch(e) {}
 }
 renderVideos();
 }

 function saveVideos() {
 // Strip any legacy base64 data before saving metadata to localStorage
 const metadataOnly = videos.map(v => {
 if (v.file && v.file.data) {
 // Legacy video with base64 — strip the data, keep metadata
 return { ...v, file: { type: v.file.type, name: v.file.name, size: v.file.size || 0, id: v.id || v.file.id } };
 }
 return v;
 });
 try {
 localStorage.setItem('videos_kasey', JSON.stringify(metadataOnly));
 } catch(e) {
 // If localStorage is full, try clearing old cached data first
 try {
 localStorage.removeItem('videos_kasey');
 localStorage.setItem('videos_kasey', JSON.stringify(metadataOnly));
 } catch(e2) {
 console.warn('localStorage full, saving to IndexedDB only');
 }
 }
 }

 function toggleVideoForm() {
 const form = document.getElementById('videoForm');
 form.classList.toggle('active');
 if (!form.classList.contains('active')) {
 form.querySelector('form').reset();
 pendingVideoFile = null;
 pendingVideoBlob = null;
 const status = document.getElementById('videoUploadStatus');
 if (status) { status.style.display = 'none'; status.innerHTML = ''; }
 const saveBtn = document.getElementById('videoSaveBtn');
 if (saveBtn) { saveBtn.disabled = false; saveBtn.style.opacity = '1'; saveBtn.style.cssText = ''; saveBtn.textContent = 'Save Video'; }
 }
 }

 async function addVideo(e) {
 e.preventDefault();
 const saveBtn = document.getElementById('videoSaveBtn');
 const status = document.getElementById('videoUploadStatus');
 const origText = saveBtn.textContent;

 // Show saving state
 saveBtn.textContent = '';
 saveBtn.style.cssText = 'position:relative;pointer-events:none;min-width:90px;color:transparent;border-color:#7ba886;background:rgba(123,168,134,0.1);';
 const spinner = document.createElement('span');
 spinner.style.cssText = 'position:absolute;top:50%;left:50%;width:14px;height:14px;margin:-7px 0 0 -7px;border:2px solid rgba(123,168,134,0.3);border-top-color:#7ba886;border-radius:50%;animation:spin 0.6s linear infinite;';
 saveBtn.appendChild(spinner);

 const formData = new FormData(e.target);
 const videoId = 'vid_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);

 const video = {
 id: videoId,
 title: formData.get('title'),
 link: formData.get('link') || null,
 file: pendingVideoFile ? { type: pendingVideoFile.type, name: pendingVideoFile.name, size: pendingVideoFile.size, id: videoId } : null,
 tags: formData.get('tags') ? formData.get('tags').split(',').map(t => t.trim()) : [],
 dateAdded: new Date().toISOString()
 };

 try {
 // Save blob to IndexedDB if there's a file
 if (pendingVideoBlob) {
 await saveVideoBlob(videoId, pendingVideoBlob, pendingVideoFile.type, pendingVideoFile.name);
 }
 videos.push(video);
 saveVideos(); // Only metadata to localStorage (won't throw)
 } catch(err) {
 console.error('Video save error:', err);
 saveBtn.textContent = origText;
 saveBtn.style.cssText = '';
 alert('Could not save video: ' + (err.message || 'Unknown error') + '\nTry using a link instead.');
 return;
 }

 renderVideos();
 pendingVideoFile = null;
 pendingVideoBlob = null;

 saveBtn.textContent = 'Saved!';
 saveBtn.style.cssText = 'border-color:#7ba886;color:#7ba886;pointer-events:none;min-width:90px;';
 
 setTimeout(function() {
 saveBtn.textContent = origText;
 saveBtn.style.cssText = '';
 e.target.reset();
 if (status) { status.style.display = 'none'; status.innerHTML = ''; }
 toggleVideoForm();
 }, 800);
 }

 async function renderVideos() {
 const list = document.getElementById('videosList');
 const countEl = document.getElementById('videoCount');
 if (countEl) countEl.textContent = videos.length > 0 ? videos.length + ' video' + (videos.length !== 1 ? 's' : '') : '';
 
 if (videos.length === 0) {
 list.innerHTML = '<div class="empty-state" style="grid-column:1/-1;">No videos yet. Add your first motivational video!</div>';
 return;
 }

 list.innerHTML = '';
 for (const [index, video] of videos.entries()) {
 const thumb = document.createElement('div');
 thumb.className = 'video-thumb';

 if (video.file && (video.file.id || video.file.data)) {
 // Uploaded video — generate thumbnail from first frame
 let blobUrl = null;
 if (video.file.id) {
 try {
 const stored = await getVideoBlob(video.file.id);
 if (stored && stored.blob) {
 const blob = (stored.blob instanceof Blob) ? stored.blob : new Blob([stored.blob], { type: stored.type });
 blobUrl = URL.createObjectURL(blob);
 }
 } catch(e) {}
 } else if (video.file.data) {
 blobUrl = video.file.data;
 }

 if (blobUrl) {
 // Use a muted video element as the thumbnail preview
 thumb.innerHTML = `
 <video muted preload="metadata" src="${blobUrl}#t=0.5" style="pointer-events:none;"></video>
 <div class="video-thumb-play"></div>
 <div class="video-thumb-overlay">${video.title || ''}</div>
 `;
 thumb.onclick = () => openVideoDetail(index, blobUrl);
 } else {
 thumb.innerHTML = `
 <div class="video-link-thumb">
 <div class="video-link-icon">⚠</div>
 <div class="video-link-label">${video.title || 'Not found'}</div>
 </div>
 `;
 }
 } else if (video.link) {
 // Link-only video
 thumb.innerHTML = `
 <div class="video-link-thumb">
 <div class="video-link-icon">▶</div>
 <div style="color:#b59197;font-size:0.75rem;font-weight:600;margin-bottom:4px;">${video.title || 'Video'}</div>
 <div class="video-link-label">${video.link.replace(/https?:\/\/(www\.)?/, '').split('/')[0]}</div>
 </div>
 `;
 thumb.onclick = () => openVideoDetail(index, null);
 }

 list.appendChild(thumb);
 }
 }

 function openVideoDetail(index, blobUrl) {
 const video = videos[index];
 const modal = document.getElementById('videoDetailModal');
 const title = document.getElementById('videoDetailTitle');
 const body = document.getElementById('videoDetailBody');
 const tags = document.getElementById('videoDetailTags');
 const delBtn = document.getElementById('videoDetailDelete');

 title.textContent = video.title || 'Untitled';

 if (blobUrl) {
 body.innerHTML = `<video controls autoplay playsinline style="width:100%;max-height:70vh;"><source src="${blobUrl}" type="${video.file.type}"></video>`;
 } else if (video.link) {
 body.innerHTML = `
 <div style="text-align:center;">
 <a href="${video.link}" target="_blank" style="color:#b59197;font-size:1.1rem;text-decoration:none;display:block;padding:40px;">
 <div style="font-size:3rem;margin-bottom:12px;">▶</div>
 Open in ${video.link.includes('tiktok') ? 'TikTok' : video.link.includes('youtu') ? 'YouTube' : 'Browser'}
 <div style="color:#999;font-size:0.8rem;margin-top:8px;word-break:break-all;">${video.link}</div>
 </a>
 </div>`;
 }

 tags.innerHTML = video.tags.length > 0
 ? video.tags.map(t => `<span class="video-tag">${t}</span>`).join('')
 : '';

 delBtn.onclick = () => {
 deleteVideo(index);
 closeVideoDetail();
 };

 modal.classList.add('active');
 document.body.style.overflow = 'hidden';
 }

 function closeVideoDetail() {
 const modal = document.getElementById('videoDetailModal');
 // Pause any playing video
 const vid = modal.querySelector('video');
 if (vid) vid.pause();
 modal.classList.remove('active');
 document.body.style.overflow = '';
 }
 window.openVideoDetail = openVideoDetail;
 window.closeVideoDetail = closeVideoDetail;

 async function deleteVideo(index) {
 if (confirm('Delete this video?')) {
 const video = videos[index];
 // Clean up IndexedDB blob if exists
 if (video.file && video.file.id) {
 try { await deleteVideoBlob(video.file.id); } catch(e) {}
 }
 videos.splice(index, 1);
 saveVideos();
 renderVideos();
 }
 }

 function loadHubPrompt() {
 const today = new Date();
 const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
 const promptIndex = dayOfYear % dailyPrompts.length;
 document.getElementById('promptQuestionHub').textContent = dailyPrompts[promptIndex];

 const savedAnswers = loadFromStorage('dailyPromptAnswers') || {};
 
 if (savedAnswers.date === today.toDateString() && savedAnswers.kasey) {
 document.getElementById('currentAnswerBox').style.display = 'block';
 document.getElementById('currentAnswer').textContent = savedAnswers.kasey;
 document.getElementById('answerLabel').textContent = 'Update Your Answer';
 document.getElementById('answerInput').value = savedAnswers.kasey;
 } else {
 document.getElementById('currentAnswerBox').style.display = 'none';
 document.getElementById('answerLabel').textContent = 'Your Answer';
 document.getElementById('answerInput').value = '';
 }
 }

 function saveAnswer(e) {
 e.preventDefault();
 const answer = new FormData(e.target).get('answer');
 const today = new Date().toDateString();

 let savedAnswers = loadFromStorage('dailyPromptAnswers') || {};
 savedAnswers.date = today;
 savedAnswers.kasey = answer;
 localStorage.setItem('dailyPromptAnswers', JSON.stringify(savedAnswers));
 saveToStorage('dailyPromptAnswers', savedAnswers);
 
 loadHubPrompt();
 alert('Your answer has been saved! It will appear on the homepage.');
 }

 // Journal functionality
 let journalEntries = [];

 function unlockJournal() {
 const password = document.getElementById('journalPassword').value;
 if (password === 'bunnies333') {
 document.getElementById('journalLocked').style.display = 'none';
 document.getElementById('journalContent').style.display = 'block';
 document.getElementById('journalPassword').value = '';
 document.getElementById('journalError').classList.remove('show');
 loadJournalEntries();
 updateJournalFormDate();
 } else {
 document.getElementById('journalError').classList.add('show');
 document.getElementById('journalPassword').value = '';
 }
 }

 function updateJournalFormDate() {
 const now = new Date();
 const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
 document.getElementById('journalFormDate').textContent = now.toLocaleDateString('en-US', options);
 }

 async function saveJournalEntry() {
 const text = document.getElementById('journalTextarea').value.trim();
 if (!text) {
 alert('Please write something first!');
 return;
 }

 const now = new Date();
 const entry = {
 id: now.getTime(),
 text: text,
 date: now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }),
 time: now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true }),
 timestamp: now.toISOString()
 };

 journalEntries.unshift(entry);
 await saveJournalToFirebase();
 renderJournalEntries();
 document.getElementById('journalTextarea').value = '';
 }

 async function deleteJournalEntry(id) {
 if (confirm('Delete this journal entry? This cannot be undone.')) {
 journalEntries = journalEntries.filter(e => e.id !== id);
 await saveJournalToFirebase();
 renderJournalEntries();
 }
 }

 async function saveJournalToFirebase() {
 localStorage.setItem('journalEntries_kasey', JSON.stringify(journalEntries));
 await syncToFirebase('journalEntries_kasey', journalEntries);
 }

 async function loadJournalEntries() {
 const firebaseData = await loadFromFirebase('journalEntries_kasey');
 if (firebaseData) {
 journalEntries = firebaseData;
 } else {
 const saved = localStorage.getItem('journalEntries_kasey');
 if (saved) {
 journalEntries = JSON.parse(saved);
 await syncToFirebase('journalEntries_kasey', journalEntries);
 }
 }
 renderJournalEntries();
 
 setupFirebaseListener('journalEntries_kasey', (data) => {
 journalEntries = data;
 renderJournalEntries();
 });
 }

 function renderJournalEntries() {
 const container = document.getElementById('journalEntries');
 
 if (journalEntries.length === 0) {
 container.innerHTML = '<div class="journal-empty">No entries yet. Start writing!</div>';
 return;
 }

 container.innerHTML = '';
 journalEntries.forEach(entry => {
 const entryDiv = document.createElement('div');
 entryDiv.className = 'journal-entry';
 entryDiv.innerHTML = `
 <button class="journal-entry-delete" onclick="deleteJournalEntry(${entry.id})">Delete</button>
 <div class="journal-entry-date">
 ${entry.date}
 <span class="journal-entry-time">${entry.time}</span>
 </div>
 <div class="journal-entry-text">${entry.text}</div>
 `;
 container.appendChild(entryDiv);
 });
 }

 // Daily Schedule System
 let currentViewingDay = new Date().getDay(); // 0 = Sunday, 1 = Monday, etc.

 const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

 const weeklySchedule = {
 0: { // Sunday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Deep Mobility + Myofascial Release (40 min)<br><em>Full-body release (20 min) → Mobility flow (15 min) → Closing sequence (5 min)<br>See Resources > Exercise > SUNDAY for complete details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Opening to Receive</strong><br>
<strong>Top of head:</strong> "I am safe receiving good things"<br>
<strong>Eyebrow:</strong> "Good things are already on their way to me"<br>
<strong>Side of eye:</strong> "I don't have to earn miracles"<br>
<strong>Under eye:</strong> "Abundance is my natural state"<br>
<strong>Under nose:</strong> "I release the belief that suffering makes me worthy"<br>
<strong>Chin:</strong> "I am worthy simply because I exist"<br>
<strong>Collarbone:</strong> "The universe is rigged in my favor"<br>
<strong>Under arm:</strong> "I allow myself to believe in good outcomes"<br><br>
<strong style="color: #b59197;">Round 2 — Shifting Focus to What's Working</strong><br>
<strong>Top of head:</strong> "There is so much good already here"<br>
<strong>Eyebrow:</strong> "I have clients who trust me"<br>
<strong>Side of eye:</strong> "I have skills that are valuable"<br>
<strong>Under eye:</strong> "I have a partner who shows up with me"<br>
<strong>Under nose:</strong> "My body is healing and getting stronger"<br>
<strong>Chin:</strong> "I am surrounded by love — Wizzy, Moo, Charlie"<br>
<strong>Collarbone:</strong> "Every day I am building something that matters"<br>
<strong>Under arm:</strong> "I choose to see the evidence of my magic"<br><br>
<strong style="color: #b59197;">Round 3 — Claiming What's Coming</strong><br>
<strong>Top of head:</strong> "Money flows to me easily and often"<br>
<strong>Eyebrow:</strong> "My business is growing because I show up"<br>
<strong>Side of eye:</strong> "Opportunities find me because I'm visible"<br>
<strong>Under eye:</strong> "I magnetize exactly what I need, exactly when I need it"<br>
<strong>Under nose:</strong> "The right clients are seeking me out right now"<br>
<strong>Chin:</strong> "I trust the timing of my life completely"<br>
<strong>Collarbone:</strong> "I am a powerful creator of my reality"<br>
<strong>Under arm:</strong> "Good things happen to me. Good things happen FOR me."`,
 journalPrompt: 'What did this week teach me? What am I calling in for next week?'
 },
 evening: {
 skincare: '1. Clay mask<br>2. Double cleanse<br>3. Essence<br>4. Niacinamide<br>5. Eye retinal<br>6. Snail cream'
 }
 },
 1: { // Monday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Corrective + Pilates Core (45 min)<br><em>Myofascial release (8 min) → Corrective stretches (6 min) → Pilates core (20 min) → Scoliosis work (8 min)<br>See Resources > Exercise > MONDAY for full details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Honor the Grief (don't skip this)</strong><br>
<strong>Top of head:</strong> "The world feels absurd sometimes"<br>
<strong>Eyebrow:</strong> "There is so much pain and chaos out there"<br>
<strong>Side of eye:</strong> "I grieve for the world I wish we had"<br>
<strong>Under eye:</strong> "It's heavy carrying this awareness"<br>
<strong>Under nose:</strong> "The financial stress sits in my body too"<br>
<strong>Chin:</strong> "The bills are real. The pressure is real."<br>
<strong>Collarbone:</strong> "I feel the weight of all of it"<br>
<strong>Under arm:</strong> "And I'm allowed to feel every bit of this"<br><br>
<strong style="color: #b59197;">Round 2 — The Pivot (not bypassing — bridging)</strong><br>
<strong>Top of head:</strong> "What if the grief means I care deeply"<br>
<strong>Eyebrow:</strong> "What if caring deeply is my strength"<br>
<strong>Side of eye:</strong> "The absurdity allows me to be absurd myself"<br>
<strong>Under eye:</strong> "I can grieve AND still build"<br>
<strong>Under nose:</strong> "Money stress is temporary — I've survived worse"<br>
<strong>Chin:</strong> "I am building something real right now"<br>
<strong>Collarbone:</strong> "I choose to find joy in the building"<br>
<strong>Under arm:</strong> "Joy doesn't betray my grief — it honors it"<br><br>
<strong style="color: #b59197;">Round 3 — Defiance & Becoming</strong><br>
<strong>Top of head:</strong> "I am becoming someone I'm deeply proud of"<br>
<strong>Eyebrow:</strong> "I build my life in the middle of the chaos"<br>
<strong>Side of eye:</strong> "That takes more courage than most people will ever understand"<br>
<strong>Under eye:</strong> "The money is figuring itself out as I show up"<br>
<strong>Under nose:</strong> "I trust myself to handle what comes"<br>
<strong>Chin:</strong> "I am devoted to my own becoming"<br>
<strong>Collarbone:</strong> "I choose joy as an act of defiance"<br>
<strong>Under arm:</strong> "I choose myself, again and again"`,
 journalPrompt: 'What does choosing myself look like this week? What\'s one area where I\'m committed to showing up for me?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. Essence (damp skin)<br>3. Niacinamide<br>4. Eye retinal<br>5. Snail cream'
 }
 },
 2: { // Tuesday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Upper Body Strength + Mobility (45 min)<br><em>Myofascial release (4 min) → Strength circuit (25 min, 3 rounds) → Deep neck flexor work (5 min)<br>See Resources > Exercise > TUESDAY for full details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Opening to Receive</strong><br>
<strong>Top of head:</strong> "I am safe receiving good things"<br>
<strong>Eyebrow:</strong> "Good things are already on their way to me"<br>
<strong>Side of eye:</strong> "I don't have to earn miracles"<br>
<strong>Under eye:</strong> "Abundance is my natural state"<br>
<strong>Under nose:</strong> "I release the belief that suffering makes me worthy"<br>
<strong>Chin:</strong> "I am worthy simply because I exist"<br>
<strong>Collarbone:</strong> "The universe is rigged in my favor"<br>
<strong>Under arm:</strong> "I allow myself to believe in good outcomes"<br><br>
<strong style="color: #b59197;">Round 2 — Shifting Focus to What's Working</strong><br>
<strong>Top of head:</strong> "There is so much good already here"<br>
<strong>Eyebrow:</strong> "I have clients who trust me"<br>
<strong>Side of eye:</strong> "I have skills that are valuable"<br>
<strong>Under eye:</strong> "I have a partner who shows up with me"<br>
<strong>Under nose:</strong> "My body is healing and getting stronger"<br>
<strong>Chin:</strong> "I am surrounded by love — Wizzy, Moo, Charlie"<br>
<strong>Collarbone:</strong> "Every day I am building something that matters"<br>
<strong>Under arm:</strong> "I choose to see the evidence of my magic"<br><br>
<strong style="color: #b59197;">Round 3 — Claiming What's Coming</strong><br>
<strong>Top of head:</strong> "Money flows to me easily and often"<br>
<strong>Eyebrow:</strong> "My business is growing because I show up"<br>
<strong>Side of eye:</strong> "Opportunities find me because I'm visible"<br>
<strong>Under eye:</strong> "I magnetize exactly what I need, exactly when I need it"<br>
<strong>Under nose:</strong> "The right clients are seeking me out right now"<br>
<strong>Chin:</strong> "I trust the timing of my life completely"<br>
<strong>Collarbone:</strong> "I am a powerful creator of my reality"<br>
<strong>Under arm:</strong> "Good things happen to me. Good things happen FOR me."`,
 journalPrompt: 'What good is already present in my life right now? What evidence do I have that I\'m on the right track?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. BHA & wait 15 min<br>3. Essence<br>4. Niacinamide<br>5. Eye retinal<br>6. Snail cream'
 }
 },
 3: { // Wednesday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Active Recovery Yoga Flow (40 min)<br><em>Spinal mobility → Hip opening (toe-safe) → Standing balance → Restorative holds (8 min)<br>See Resources > Exercise > WEDNESDAY for full details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Honor the Grief (don't skip this)</strong><br>
<strong>Top of head:</strong> "The world feels absurd sometimes"<br>
<strong>Eyebrow:</strong> "There is so much pain and chaos out there"<br>
<strong>Side of eye:</strong> "I grieve for the world I wish we had"<br>
<strong>Under eye:</strong> "It's heavy carrying this awareness"<br>
<strong>Under nose:</strong> "The financial stress sits in my body too"<br>
<strong>Chin:</strong> "The bills are real. The pressure is real."<br>
<strong>Collarbone:</strong> "I feel the weight of all of it"<br>
<strong>Under arm:</strong> "And I'm allowed to feel every bit of this"<br><br>
<strong style="color: #b59197;">Round 2 — The Pivot (not bypassing — bridging)</strong><br>
<strong>Top of head:</strong> "What if the grief means I care deeply"<br>
<strong>Eyebrow:</strong> "What if caring deeply is my strength"<br>
<strong>Side of eye:</strong> "The absurdity allows me to be absurd myself"<br>
<strong>Under eye:</strong> "I can grieve AND still build"<br>
<strong>Under nose:</strong> "Money stress is temporary — I've survived worse"<br>
<strong>Chin:</strong> "I am building something real right now"<br>
<strong>Collarbone:</strong> "I choose to find joy in the building"<br>
<strong>Under arm:</strong> "Joy doesn't betray my grief — it honors it"<br><br>
<strong style="color: #b59197;">Round 3 — Defiance & Becoming</strong><br>
<strong>Top of head:</strong> "I am becoming someone I'm deeply proud of"<br>
<strong>Eyebrow:</strong> "I build my life in the middle of the chaos"<br>
<strong>Side of eye:</strong> "That takes more courage than most people will ever understand"<br>
<strong>Under eye:</strong> "The money is figuring itself out as I show up"<br>
<strong>Under nose:</strong> "I trust myself to handle what comes"<br>
<strong>Chin:</strong> "I am devoted to my own becoming"<br>
<strong>Collarbone:</strong> "I choose joy as an act of defiance"<br>
<strong>Under arm:</strong> "I choose myself, again and again"`,
 journalPrompt: 'Am I avoiding anything that I know I need to face?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. Essence (damp skin)<br>3. Niacinamide<br>4. Eye retinal<br>5. Snail cream'
 }
 },
 4: { // Thursday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Corrective + Lower Body Strength (50 min)<br><em>Myofascial release (6 min) → Hip mobility (6 min) → Strength circuit (22 min, 3 rounds) → Scoliosis hip work (5 min)<br>See Resources > Exercise > THURSDAY for full details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Releasing Old Stories</strong><br>
<strong>Top of head:</strong> "I release the story that I'm not enough"<br>
<strong>Eyebrow:</strong> "I release the fear that I'll always struggle"<br>
<strong>Side of eye:</strong> "I let go the need to explain myself. It's perfectly safe to be misunderstood"<br>
<strong>Under eye:</strong> "I don't need to prove anything to anyone"<br>
<strong>Under nose:</strong> "My past does not define my future"<br>
<strong>Chin:</strong> "I am not my doubts or fears"<br>
<strong>Collarbone:</strong> "I am safe letting go of the victim that I once was"<br>
<strong>Under arm:</strong> "I make space for who I'm becoming"<br><br>
<strong style="color: #b59197;">Round 2 — Embodying Self-Trust</strong><br>
<strong>Top of head:</strong> "I trust my body's wisdom"<br>
<strong>Eyebrow:</strong> "I trust my decisions, even when they're hard"<br>
<strong>Side of eye:</strong> "I trust my instincts — they've kept me alive"<br>
<strong>Under eye:</strong> "I trust that I'll figure it out"<br>
<strong>Under nose:</strong> "I've survived 100% of my worst days"<br>
<strong>Chin:</strong> "My track record speaks for itself"<br>
<strong>Collarbone:</strong> "I am more capable than I give myself credit for"<br>
<strong>Under arm:</strong> "I trust myself completely"<br><br>
<strong style="color: #b59197;">Round 3 — Integration & Power</strong><br>
<strong>Top of head:</strong> "I am exactly where I need to be"<br>
<strong>Eyebrow:</strong> "Every step I take is building my empire"<br>
<strong>Side of eye:</strong> "I am both soft and powerful"<br>
<strong>Under eye:</strong> "My sensitivity is a superpower, not a weakness"<br>
<strong>Under nose:</strong> "I move through fear and take action anyway"<br>
<strong>Chin:</strong> "I am devoted to myself in every season"<br>
<strong>Collarbone:</strong> "I embody the woman I'm becoming right now"<br>
<strong>Under arm:</strong> "I am whole, worthy, and wildly loved"`,
 journalPrompt: 'Who am I becoming? What version of me am I growing into, and what does she need from me today?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. Essence<br>3. Niacinamide<br>4. Eye retinal<br>5. Snail cream'
 }
 },
 5: { // Friday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Rest or Gentle Walking (20-30 min)<br><em>Complete rest day OR optional treadmill walk with minimal incline. Wear supportive shoes.<br>Optional: Heat, 5 min breathing, gentle chin tucks</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Honor the Grief (don't skip this)</strong><br>
<strong>Top of head:</strong> "The world feels absurd sometimes"<br>
<strong>Eyebrow:</strong> "There is so much pain and chaos out there"<br>
<strong>Side of eye:</strong> "I grieve for the world I wish we had"<br>
<strong>Under eye:</strong> "It's heavy carrying this awareness"<br>
<strong>Under nose:</strong> "The financial stress sits in my body too"<br>
<strong>Chin:</strong> "The bills are real. The pressure is real."<br>
<strong>Collarbone:</strong> "I feel the weight of all of it"<br>
<strong>Under arm:</strong> "And I'm allowed to feel every bit of this"<br><br>
<strong style="color: #b59197;">Round 2 — The Pivot (not bypassing — bridging)</strong><br>
<strong>Top of head:</strong> "What if the grief means I care deeply"<br>
<strong>Eyebrow:</strong> "What if caring deeply is my strength"<br>
<strong>Side of eye:</strong> "The absurdity allows me to be absurd myself"<br>
<strong>Under eye:</strong> "I can grieve AND still build"<br>
<strong>Under nose:</strong> "Money stress is temporary — I've survived worse"<br>
<strong>Chin:</strong> "I am building something real right now"<br>
<strong>Collarbone:</strong> "I choose to find joy in the building"<br>
<strong>Under arm:</strong> "Joy doesn't betray my grief — it honors it"<br><br>
<strong style="color: #b59197;">Round 3 — Defiance & Becoming</strong><br>
<strong>Top of head:</strong> "I am becoming someone I'm deeply proud of"<br>
<strong>Eyebrow:</strong> "I build my life in the middle of the chaos"<br>
<strong>Side of eye:</strong> "That takes more courage than most people will ever understand"<br>
<strong>Under eye:</strong> "The money is figuring itself out as I show up"<br>
<strong>Under nose:</strong> "I trust myself to handle what comes"<br>
<strong>Chin:</strong> "I am devoted to my own becoming"<br>
<strong>Collarbone:</strong> "I choose joy as an act of defiance"<br>
<strong>Under arm:</strong> "I choose myself, again and again"`,
 journalPrompt: 'What did I do this week that I\'m proud of? Even the small things — how did I show up for myself?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. Essence (damp skin)<br>3. Niacinamide<br>4. Eye retinal<br>5. Snail cream'
 }
 },
 6: { // Saturday
 morning: {
 skincare: '1. Cleanser<br>2. Essence (damp skin)<br>3. Vitamin C<br>4. Niacinamide<br>5. Under eye serum<br>6. Soothing cream<br>7. Sunscreen',
 workout: 'Full Body Calisthenics + Cardio (50 min)<br><em>Low-impact cardio (12 min) → Calisthenics circuit (22 min, 4 rounds) → Core finisher (5 min)<br>See Resources > Exercise > SATURDAY for full details</em>',
 tapping: `<strong style="color: #b59197;">Round 1 — Releasing Old Stories</strong><br>
<strong>Top of head:</strong> "I release the story that I'm not enough"<br>
<strong>Eyebrow:</strong> "I release the fear that I'll always struggle"<br>
<strong>Side of eye:</strong> "I let go the need to explain myself. It's perfectly safe to be misunderstood"<br>
<strong>Under eye:</strong> "I don't need to prove anything to anyone"<br>
<strong>Under nose:</strong> "My past does not define my future"<br>
<strong>Chin:</strong> "I am not my doubts or fears"<br>
<strong>Collarbone:</strong> "I am safe letting go of the victim that I once was"<br>
<strong>Under arm:</strong> "I make space for who I'm becoming"<br><br>
<strong style="color: #b59197;">Round 2 — Embodying Self-Trust</strong><br>
<strong>Top of head:</strong> "I trust my body's wisdom"<br>
<strong>Eyebrow:</strong> "I trust my decisions, even when they're hard"<br>
<strong>Side of eye:</strong> "I trust my instincts — they've kept me alive"<br>
<strong>Under eye:</strong> "I trust that I'll figure it out"<br>
<strong>Under nose:</strong> "I've survived 100% of my worst days"<br>
<strong>Chin:</strong> "My track record speaks for itself"<br>
<strong>Collarbone:</strong> "I am more capable than I give myself credit for"<br>
<strong>Under arm:</strong> "I trust myself completely"<br><br>
<strong style="color: #b59197;">Round 3 — Integration & Power</strong><br>
<strong>Top of head:</strong> "I am exactly where I need to be"<br>
<strong>Eyebrow:</strong> "Every step I take is building my empire"<br>
<strong>Side of eye:</strong> "I am both soft and powerful"<br>
<strong>Under eye:</strong> "My sensitivity is a superpower, not a weakness"<br>
<strong>Under nose:</strong> "I move through fear and take action anyway"<br>
<strong>Chin:</strong> "I am devoted to myself in every season"<br>
<strong>Collarbone:</strong> "I embody the woman I'm becoming right now"<br>
<strong>Under arm:</strong> "I am whole, worthy, and wildly loved"`,
 journalPrompt: 'What brings me joy just for the sake of joy? What would I do today if I wasn\'t afraid?'
 },
 evening: {
 skincare: '1. Double cleanse<br>2. AHA & wait 15 min<br>3. Essence<br>4. Niacinamide<br>5. Eye retinal<br>6. Snail cream<br>7. Sleeping mask'
 }
 }
 };

 function changeDay(direction) {
 currentViewingDay += direction;
 if (currentViewingDay > 6) currentViewingDay = 0;
 if (currentViewingDay < 0) currentViewingDay = 6;
 renderDailySchedule();
 }

 function renderDailySchedule() {
 const day = weeklySchedule[currentViewingDay];
 const dayName = dayNames[currentViewingDay];
 const today = new Date();
 const currentDay = today.getDay();
 
 // Calculate the date for the viewing day
 const dayOffset = currentViewingDay - currentDay;
 const viewingDate = new Date(today);
 viewingDate.setDate(today.getDate() + dayOffset);
 
 // Format as "Wednesday, February 5"
 const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
 'July', 'August', 'September', 'October', 'November', 'December'];
 const formattedDate = `${dayName}, ${monthNames[viewingDate.getMonth()]} ${viewingDate.getDate()}`;
 
 document.getElementById('currentDayDisplay').textContent = formattedDate;
 
 const container = document.getElementById('dailyScheduleContainer');
 container.innerHTML = `
 <!-- Morning Routine -->
 <div class="day-card">
 <div class="day-header" onclick="this.parentElement.classList.toggle('expanded')">
 <div>
 <div class="day-name"> Morning Routine (8:00 AM - 10:30 AM)</div>
 <div class="day-preview"></div>
 </div>
 <span class="arrow">&#9660;</span>
 </div>
 <div class="day-details">
 <div class="schedule-item">
 <span class="schedule-time">8:00 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Morning Supplements</div>
 <div class="schedule-details">
 • Wellbutrin<br>
 • Life Extension Neuro-Mag (3 caps = 144mg Mg L-threonate)<br>
 • Allergy pill - Kirkland (1 tab cetirizine or loratadine)<br>
 <strong>Take with full glass of water on empty stomach</strong>
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">8:05 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Morning Skin Care (10 min)</div>
 <div class="schedule-details">
 ${day.morning.skincare}
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">8:15 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Feed Wizzy & Moo, refresh water (10 min)</div>
 <div class="schedule-details">
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">8:25 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> ALTAR TIME (20 min) + 10000 Lux Light</div>
 <div class="schedule-details">
 <strong>Step 1:</strong> Cyclic sighing (5 min)<br>
 <em>Double inhale through nose (first full, second quick top-off), long slow exhale through mouth. Repeat.</em><br><br>
 <strong>Step 2:</strong> EFT tapping (7-8 min) - tap each point ~7 times<br>
 ${day.morning.tapping ? `
 <div class="tapping-collapsible">
 <div class="tapping-header" onclick="this.parentElement.classList.toggle('active')">
 <p class="tapping-header-text">View Today's Tapping Sequence</p>
 <span class="tapping-arrow">&#9660;</span>
 </div>
 <div class="tapping-content">${day.morning.tapping}</div>
 </div>
 ` : '<em>See Resources tab for tapping guide & create your own sequence</em>'}<br>
 <strong>Step 3:</strong> Journaling (5-7 min)<br>
 <div style="margin-top: 8px; padding: 10px; background: #faf8f6; border-left: 3px solid #d4a5a5; font-style: italic;">
 <strong style="color: #b59197;">Today's prompt:</strong> ${day.morning.journalPrompt}
 </div>
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">8:45 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> WORKOUT (30-45 min)</div>
 <div class="schedule-details">
 <button onclick="goToWorkout()" style="background: #a3b899; color: #1c1c1c; border: none; padding: 10px 24px; font-size: 0.9rem; font-weight: 600; font-family: inherit; cursor: pointer; margin: 4px 0;">Start Workout</button><br>
 <em>Subliminals/rampages OK during workout</em>
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">~9:30 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Smoothie + Morning Supplements</div>
 <div class="schedule-details">
 <strong>Smoothie Recipe (~322 cal, ~43g protein):</strong><br>
 • 1 cup unsweetened almond milk<br>
 • 1.5 tbsp cacao powder (NOT Dutch-processed)<br>
 • 1 scoop ON Gold Standard Banana Cream whey<br>
 • ~1/2 scoop Vital Proteins chocolate collagen (~12g)<br>
 • 5g L-glutamine<br>
 • 1 tsp Nature's Way MCT oil<br>
 • Optional: 1 cup frozen spinach, 1/2 cup frozen blueberries<br><br>
 <strong>Take WITH smoothie:</strong><br>
 • Thorne Basic Nutrients 2/Day (1 cap)<br>
 • Sports Research Omega-3 (1-2 softgels)<br>
 • Jarrow QH-Absorb CoQ10 200mg (1 softgel)<br>
 • Nutricost Riboflavin 400mg (1 cap)
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">10:00 AM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Creatine + Prep to Leave</div>
 <div class="schedule-details">
 Mix flavored creatine (5g) in water. Head out 10–10:30 AM
 </div>
 </div>
 </div>
 </div>
 </div>

 <!-- Daytime Routine -->
 <div class="day-card">
 <div class="day-header" onclick="this.parentElement.classList.toggle('expanded')">
 <div>
 <div class="day-name"> Daytime Routine (10:30 AM - 7 PM)</div>
 <div class="day-preview"></div>
 </div>
 <span class="arrow">&#9660;</span>
 </div>
 <div class="day-details">
 <div class="schedule-item">
 <span class="schedule-time">10:30 AM -<br>1:30 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Pet Care Visits</div>
 <div class="schedule-details">
 Client visits<br>
 Walking between homes counts as steps
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">2:00-3:00 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Lunch</div>
 <div class="schedule-details">
 Target: ~400-500 cal, protein-focused<br>
 If low on protein, add protein shake
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">3:00-7:00 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Work Block</div>
 <div class="schedule-details">
 Admin, bookings, client management<br>
 Subliminals/music OK in background
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">5:00 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Sunfiber (Optional Timing)</div>
 <div class="schedule-details">
 Heather's Tummy Fiber (1-2 tsp in water)<br>
 Best 2-3 hours before dinner
 </div>
 </div>
 </div>
 </div>
 </div>

 <!-- Evening Routine -->
 <div class="day-card">
 <div class="day-header" onclick="this.parentElement.classList.toggle('expanded')">
 <div>
 <div class="day-name"> Evening Routine (7 PM - 11 PM)</div>
 <div class="day-preview"></div>
 </div>
 <span class="arrow">&#9660;</span>
 </div>
 <div class="day-details">
 <div class="schedule-item">
 <span class="schedule-time">7:15 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Start Dinner Prep</div>
 <div class="schedule-details">
 Wrap up work<br>
 Rampages while cooking
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">7:30 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Dinner + Evening Supplements + Kefir</div>
 <div class="schedule-details">
 <strong>Take WITH dinner:</strong><br>
 • Doctor's Best Mag Glycinate (2 tablets = 200mg)<br>
 • Renew Life Women's Probiotic 25B (1 cap)<br>
 • Kefir 4-6 oz (side drink)
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">9:00 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Red Light + Vibration Plate + Subliminals (15-20 min)</div>
 <div class="schedule-details">
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">9:20 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Evening Myofascial Release (5 min)</div>
 <div class="schedule-details">
 Suboccipital release, thoracic extension, chest stretch, foam roll
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">9:25 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Evening Skin Care (5-10 min)</div>
 <div class="schedule-details">
 ${day.evening.skincare}
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">9:30 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Dim Lights</div>
 <div class="schedule-details">
 Lamps only. Night mode on screens. Wind down begins
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">10:30 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Celexa + Bedtime Routine</div>
 <div class="schedule-details">
 Take Celexa<br>
 Teeth, wind down
 </div>
 </div>
 </div>

 <div class="schedule-item">
 <span class="schedule-time">11:00 PM</span>
 <div class="schedule-content">
 <div class="schedule-title"> Quetiapine + 4-7-8 Breathing + Lights Out</div>
 <div class="schedule-details">
 Take Quetiapine<br>
 4-7-8 breathing technique<br>
 Phone face down or in another room<br>
 <strong>Target: 9 hours sleep (11 PM - 8 AM)</strong>
 </div>
 </div>
 </div>
 </div>
 </div>
 `;
 }

 document.addEventListener('DOMContentLoaded', function() {

 // Load custom habits first
 loadCustomHabits();
 
 // Force clear old cached habits if they don't match current list
 const saved = localStorage.getItem('bingoState_kasey');
 if (saved) {
 const data = JSON.parse(saved);
 // Check if saved habits include old values that need updating
 if (data.habits && (
 data.habits.includes('Walk 10k Steps') || 
 data.habits.includes('Dry Brushing') ||
 data.habits.includes('Sleep 7+ Hours') ||
 data.habits.includes('Time Outside')
 )) {
 // Clear the old saved state
 localStorage.removeItem('bingoState_kasey');
 }
 }
 
 initBoard();
 renderDailySchedule();
 loadVideos();
 loadResources();
 loadTodos();
 loadFutureTodos();
 });
 </script>

<script>
function toggleNav() {
    var h = document.getElementById('navHamburger');
    var o = document.getElementById('navOverlay');
    if (!h || !o) return;
    var isOpen = o.classList.contains('open');
    if (isOpen) {
        h.classList.remove('open');
        o.classList.remove('open');
        document.body.style.overflow = '';
    } else {
        h.classList.add('open');
        o.classList.add('open');
        document.body.style.overflow = 'hidden';
    }
}
</script>
</body>
</html>
