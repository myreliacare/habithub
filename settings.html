<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Settings - Our Life Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Philosopher:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:wght@300;400;500;600;700&family=Work+Sans:wght@400;500;600;700&family=Baloo+2:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Cardo:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Kalam:wght@300;400;700&family=Lobster&family=Indie+Flower&family=Gilda+Display&family=Cormorant+Infant:wght@300;400;500;600;700&family=DM+Serif+Display:ital@0;1&family=Tenor+Sans&family=Dancing+Script:wght@400;500;600;700&family=Satisfy&family=Great+Vibes&family=Abril+Fatface&display=swap" rel="stylesheet">
    <script>
    // Inline engine fallback — ensures settings page works even if external JS fails
    (function(){
        if (window.LifeHubSettings) return; // engine loaded fine

        var palettes = {
            sage:        { accent: '#a3b899', accentHover: '#aec1a5', accentMuted: 'rgba(163,184,153,0.2)', accentBorder: 'rgba(163,184,153,0.3)', accentText: 'rgba(163,184,153,0.6)' },
            blush:       { accent: '#d4919e', accentHover: '#d99eaa', accentMuted: 'rgba(212,145,158,0.2)', accentBorder: 'rgba(212,145,158,0.3)', accentText: 'rgba(212,145,158,0.6)' },
            cream:       { accent: '#e8ddd0', accentHover: '#ebe1d6', accentMuted: 'rgba(232,221,208,0.2)', accentBorder: 'rgba(232,221,208,0.3)', accentText: 'rgba(232,221,208,0.6)' },
            periwinkle:  { accent: '#8e9cc7', accentHover: '#9ca8ce', accentMuted: 'rgba(142,156,199,0.2)', accentBorder: 'rgba(142,156,199,0.3)', accentText: 'rgba(142,156,199,0.6)' },
            dustylilac:  { accent: '#c3a6c9', accentHover: '#cab1cf', accentMuted: 'rgba(195,166,201,0.2)', accentBorder: 'rgba(195,166,201,0.3)', accentText: 'rgba(195,166,201,0.6)' },
            powderblue:  { accent: '#a4c2d8', accentHover: '#afc9dd', accentMuted: 'rgba(164,194,216,0.2)', accentBorder: 'rgba(164,194,216,0.3)', accentText: 'rgba(164,194,216,0.6)' },
            softmint:    { accent: '#a8d8c4', accentHover: '#b2ddcb', accentMuted: 'rgba(168,216,196,0.2)', accentBorder: 'rgba(168,216,196,0.3)', accentText: 'rgba(168,216,196,0.6)' },
            moss:        { accent: '#8a9c6b', accentHover: '#98a87d', accentMuted: 'rgba(138,156,107,0.2)', accentBorder: 'rgba(138,156,107,0.3)', accentText: 'rgba(138,156,107,0.6)' },
            burntsienna: { accent: '#c97856', accentHover: '#cf886a', accentMuted: 'rgba(201,120,86,0.2)', accentBorder: 'rgba(201,120,86,0.3)', accentText: 'rgba(201,120,86,0.6)' },
            rosegold:    { accent: '#d4a4a4', accentHover: '#d9afaf', accentMuted: 'rgba(212,164,164,0.2)', accentBorder: 'rgba(212,164,164,0.3)', accentText: 'rgba(212,164,164,0.6)' },
            dustyteal:   { accent: '#6d9e9e', accentHover: '#7faaaa', accentMuted: 'rgba(109,158,158,0.2)', accentBorder: 'rgba(109,158,158,0.3)', accentText: 'rgba(109,158,158,0.6)' },
            petalpink:   { accent: '#e8b4b8', accentHover: '#ebbdc1', accentMuted: 'rgba(232,180,184,0.2)', accentBorder: 'rgba(232,180,184,0.3)', accentText: 'rgba(232,180,184,0.6)' },
            apricot:     { accent: '#e8b088', accentHover: '#ebb996', accentMuted: 'rgba(232,176,136,0.2)', accentBorder: 'rgba(232,176,136,0.3)', accentText: 'rgba(232,176,136,0.6)' },
            palejade:    { accent: '#8ec4a8', accentHover: '#9ccbb2', accentMuted: 'rgba(142,196,168,0.2)', accentBorder: 'rgba(142,196,168,0.3)', accentText: 'rgba(142,196,168,0.6)' },
            raspberry:   { accent: '#b0607a', accentHover: '#b9738a', accentMuted: 'rgba(176,96,122,0.2)', accentBorder: 'rgba(176,96,122,0.3)', accentText: 'rgba(176,96,122,0.6)' },
            denim:       { accent: '#6888a8', accentHover: '#7a96b2', accentMuted: 'rgba(104,136,168,0.2)', accentBorder: 'rgba(104,136,168,0.3)', accentText: 'rgba(104,136,168,0.6)' },
            nude:        { accent: '#d4b8a8', accentHover: '#d9c1b2', accentMuted: 'rgba(212,184,168,0.2)', accentBorder: 'rgba(212,184,168,0.3)', accentText: 'rgba(212,184,168,0.6)' },
            obsidian:    { accent: '#181818', accentHover: '#2a2a2a', accentMuted: 'rgba(24,24,24,0.2)', accentBorder: 'rgba(24,24,24,0.3)', accentText: 'rgba(24,24,24,0.6)' },
            darkplum:    { accent: '#3d2f31', accentHover: '#4e3e40', accentMuted: 'rgba(61,47,49,0.2)', accentBorder: 'rgba(61,47,49,0.3)', accentText: 'rgba(61,47,49,0.6)' },
            storm:       { accent: '#252830', accentHover: '#363a44', accentMuted: 'rgba(37,40,48,0.2)', accentBorder: 'rgba(37,40,48,0.3)', accentText: 'rgba(37,40,48,0.6)' }
        };
        var secondaryPalettes = {
            sage:'#d4a4a4',blush:'#a3b899',cream:'#d4a4a4',
            periwinkle:'#d4a4a4',dustylilac:'#d4a4a4',powderblue:'#d4a4a4',softmint:'#d4a4a4',
            moss:'#d4a4a4',burntsienna:'#a3b899',rosegold:'#a3b899',
            dustyteal:'#d4a4a4',petalpink:'#a3b899',
            apricot:'#a3b899',palejade:'#d4a4a4',raspberry:'#a3b899',
            denim:'#d4a4a4',nude:'#a3b899',
            obsidian:'#d4a4a4',darkplum:'#a3b899',storm:'#d4a4a4'
        };
        var bgColors = {
            dark:'#3d2f31',  forest:'#1f2e2a', 
            espresso:'#2b2220',  storm:'#252830', midnight:'#141420',
            warmcocoa:'#362a28', deepteal:'#1a2e2e',  
            warmlinen:'#f0e8dc', dustymauve:'#332830', obsidian:'#181818', softblush:'#f0d4da',
             bordeaux:'#301820'
        };
        var bgDarker = {
            dark:'#2a1f21',  forest:'#15231f', 
            espresso:'#1e1816',  storm:'#1b1d24', midnight:'#0d0d16',
            warmcocoa:'#281e1c', deepteal:'#122020',  
            warmlinen:'#e4dace', dustymauve:'#261c24', obsidian:'#101010', softblush:'#e5c8cf',
             bordeaux:'#221018'
        };
        var textColors = {
            dark:        { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            forest:      { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            espresso:    { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            storm:       { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            midnight:    { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            warmcocoa:   { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            deepteal:    { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            warmlinen:   { text:'#3d2f31', textMuted:'rgba(61,47,49,0.65)',    textFaint:'rgba(61,47,49,0.4)' },
            dustymauve:  { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            obsidian:    { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' },
            softblush:   { text:'#3d2f31', textMuted:'rgba(61,47,49,0.65)',    textFaint:'rgba(61,47,49,0.4)' },
            bordeaux:    { text:'#e0d2d0', textMuted:'rgba(242,235,224,0.6)', textFaint:'rgba(242,235,224,0.4)' }
        };
        var fontStacks = { philosopher:"'Philosopher',Georgia,serif", cormorant:"'Cormorant Garamond',Georgia,serif", worksans:"'Work Sans',sans-serif", baloo:"'Baloo 2',cursive", lora:"'Lora',Georgia,serif", cardo:"'Cardo',Georgia,serif", playfair:"'Playfair Display',Georgia,serif", kalam:"'Kalam',cursive", lobster:"'Lobster',cursive", indieflower:"'Indie Flower',cursive", gilda:"'Gilda Display',Georgia,serif", cormorantinfant:"'Cormorant Infant',Georgia,serif", dmserif:"'DM Serif Display',Georgia,serif", tenor:"'Tenor Sans',sans-serif", dancing:"'Dancing Script',cursive", satisfy:"'Satisfy',cursive", greatvibes:"'Great Vibes',cursive", abril:"'Abril Fatface',Georgia,serif" };

        var s;
        try {
            s = {
                appName: localStorage.getItem('appName') || 'Our Life Hub',
                names: JSON.parse(localStorage.getItem('userNames') || '{"name1":"Kasey","name2":"Charlie"}'),
                accentColor: localStorage.getItem('accentColor') || 'sage',
                secondaryColor: localStorage.getItem('secondaryColor') || '',
                bgColor: localStorage.getItem('bgColor') || 'dark',
                fontFamily: localStorage.getItem('fontFamily') || 'philosopher',
                headingFont: localStorage.getItem('headingFont') || 'philosopher',
                fontSize: parseInt(localStorage.getItem('fontSize') || '100', 10),
                archivedPages: JSON.parse(localStorage.getItem('archivedPages') || '[]'),
                archivedSections: JSON.parse(localStorage.getItem('archivedSections') || '{}'),
                features: JSON.parse(localStorage.getItem('features') || '{}'),
                pageLabels: JSON.parse(localStorage.getItem('pageLabels') || '{}')
            };
        } catch(e) {
            s = { appName:'Our Life Hub', names:{name1:'Kasey',name2:'Charlie'}, accentColor:'sage', secondaryColor:'', bgColor:'dark', fontFamily:'philosopher', headingFont:'philosopher', fontSize:100, archivedPages:[], archivedSections:{}, features:{}, pageLabels:{} };
        }

        // Apply CSS custom properties
        var p = palettes[s.accentColor] || palettes.sage;
        var bg = bgColors[s.bgColor] || bgColors.dark;
        var bgDk = bgDarker[s.bgColor] || bgDarker.dark;
        var defaultSecMap = { sage:'rosegold', blush:'sage', cream:'rosegold', periwinkle:'rosegold', dustylilac:'rosegold', powderblue:'rosegold', softmint:'rosegold', moss:'rosegold', burntsienna:'sage', rosegold:'sage', dustyteal:'rosegold', petalpink:'sage', apricot:'sage', palejade:'rosegold', raspberry:'sage', denim:'rosegold', nude:'sage', obsidian:'rosegold', darkplum:'sage', storm:'rosegold' };
        var secKey = s.secondaryColor || defaultSecMap[s.accentColor] || 'rosegold';
        var sec = (palettes[secKey] || palettes.rose).accent;
        var tc = textColors[s.bgColor] || textColors.dark;
        var font = fontStacks[s.fontFamily] || fontStacks.philosopher;
        var hFont = fontStacks[s.headingFont] || fontStacks.philosopher;
        var basePx = Math.round(16 * s.fontSize / 100);
        var root = document.documentElement;
        root.style.setProperty('--lh-accent', p.accent);
        root.style.setProperty('--lh-accent-hover', p.accentHover);
        root.style.setProperty('--lh-accent-muted', p.accentMuted);
        root.style.setProperty('--lh-accent-border', p.accentBorder);
        root.style.setProperty('--lh-accent-text', p.accentText);
        root.style.setProperty('--lh-secondary', sec);
        // Compute secondary variants from hex
        var secR = parseInt(sec.slice(1,3),16), secG = parseInt(sec.slice(3,5),16), secB = parseInt(sec.slice(5,7),16);
        root.style.setProperty('--lh-secondary-muted', 'rgba('+secR+','+secG+','+secB+',0.15)');
        root.style.setProperty('--lh-secondary-border', 'rgba('+secR+','+secG+','+secB+',0.3)');
        root.style.setProperty('--lh-bg', bg);
        root.style.setProperty('--lh-bg-darker', bgDk);
        root.style.setProperty('--lh-text', tc.text);
        root.style.setProperty('--lh-text-muted', tc.textMuted);
        root.style.setProperty('--lh-text-faint', tc.textFaint);
        root.style.setProperty('--lh-font', font);
        root.style.setProperty('--lh-heading-font', hFont);
        root.style.setProperty('--lh-font-size', basePx + 'px');
        root.style.background = bg;
        root.style.fontSize = basePx + 'px';

        // Load fonts dynamically
        var fontUrls = {philosopher:'Philosopher:ital,wght@0,400;0,700;1,400',cormorant:'Cormorant+Garamond:wght@300;400;500;600;700',worksans:'Work+Sans:wght@400;500;600;700;800',baloo:'Baloo+2:wght@400;500;600;700;800',lora:'Lora:ital,wght@0,400;0,500;0,600;0,700;1,400',cardo:'Cardo:ital,wght@0,400;0,700;1,400',playfair:'Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400',kalam:'Kalam:wght@300;400;700',lobster:'Lobster',indieflower:'Indie+Flower',gilda:'Gilda+Display',cormorantinfant:'Cormorant+Infant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400',dmserif:'DM+Serif+Display:ital@0;1',tenor:'Tenor+Sans',dancing:'Dancing+Script:wght@400;500;600;700',satisfy:'Satisfy',greatvibes:'Great+Vibes',abril:'Abril+Fatface'};
        var needed = [];
        [s.fontFamily, s.headingFont].forEach(function(f){ if(fontUrls[f] && needed.indexOf(fontUrls[f])===-1) needed.push(fontUrls[f]); });
        if(needed.length){ var lnk=document.createElement('link'); lnk.rel='stylesheet'; lnk.href='https://fonts.googleapis.com/css2?'+needed.map(function(f){return'family='+f;}).join('&')+'&display=swap'; document.head.appendChild(lnk); }

        // Heading font override
        // Heading font - always apply to all heading/title/label elements
        var hfSt=document.createElement('style'); hfSt.textContent='body{font-family:'+font+'!important} .top-nav,.nav-link,.nav-link-mobile{font-family:'+font+'!important} .nav-logo,.page-title,.home-title,.main-title{font-family:'+hFont+'!important}'; document.head.appendChild(hfSt);

        // Page archiving CSS
        var pageMap = { home:'index.html', person1:'kasey-hub.html', person2:'charlie-hub.html', dreams:'our-dreams.html', meals:'meal-plan.html', settings:'settings.html' };
        var archiveCSS = '';
        s.archivedPages.forEach(function(k){ var h=pageMap[k]; if(h) archiveCSS += 'a.nav-link[href="'+h+'"],a.nav-link-mobile[href="'+h+'"]{display:none!important}\n'; });
        if (archiveCSS) { var st=document.createElement('style'); st.textContent=archiveCSS; (document.head||document.documentElement).appendChild(st); }

        window.LifeHubSettings = {
            current: s,
            palettes: palettes,
            bgColors: bgColors,
            bgDarker: bgDarker,
            fontStacks: fontStacks,
            secondaryPalettes: secondaryPalettes,
            textColors: textColors,
            accentHexMap: Object.keys(palettes).reduce(function(m,k){m[k]=palettes[k].accent;return m;},{}),
            defaultSecMap: defaultSecMap,
            getName: function(person) { return person===1||person==='person1' ? s.names.name1 : s.names.name2; },
            isPageArchived: function(k) { return s.archivedPages.indexOf(k)!==-1; },
            isSectionArchived: function(pk,sk) { var a=s.archivedSections[pk]; return a?a.indexOf(sk)!==-1:false; },
            getPageLabel: function(k,fb) { return s.pageLabels[k]||fb; }
        };

        // Apply names on DOM ready
        function onReady(fn){ if(document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded',fn); }
        onReady(function(){
            document.querySelectorAll('.nav-logo').forEach(function(el){ el.textContent=s.appName; });
            document.querySelectorAll('.nav-link,.nav-link-mobile').forEach(function(link){
                var href=link.getAttribute('href')||'';
                if(href==='kasey-hub.html') link.textContent=s.names.name1;
                if(href==='charlie-hub.html') link.textContent=s.names.name2;
            });
            var title=document.title;
            if(title.indexOf('Our Life Hub')!==-1) document.title=title.replace('Our Life Hub',s.appName);
        });
    })();
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { background: var(--lh-bg, #3d2f31) !important; }
        
        body {
            background: var(--lh-bg, #3d2f31) !important;
            color: var(--lh-text, #e0d2d0);
            font-family: var(--lh-font, 'Philosopher', Georgia, serif);
            font-weight: 500;
            min-height: 100vh;
            line-height: 1.6;
            padding-top: 76px;
        }

        /* ===== NAV — GOLD STANDARD ===== */
        .top-nav {
            position: fixed !important;
            top: 0 !important; left: 0 !important; right: 0 !important;
            background: var(--lh-bg-darker, #2a1f21) !important;
            border-bottom: 1px solid var(--lh-accent-border, rgba(163,184,153,0.2)) !important;
            z-index: 9999 !important;
            padding: 0 24px !important;
            font-family: var(--lh-font, 'Philosopher', Georgia, serif) !important;
        }
        .nav-container {
            max-width: 1200px !important;
            margin: 0 auto !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
            height: 56px !important;
        }
        .nav-logo {
            font-size: 1.1rem !important;
            font-weight: 700 !important;
            font-family: var(--lh-heading-font, var(--lh-font, 'Philosopher', Georgia, serif)) !important;
            color: var(--lh-accent, #a3b899) !important;
            text-decoration: none !important;
            white-space: nowrap !important;
        }
        .nav-links { display: flex !important; gap: 28px !important; align-items: center !important; }
        .nav-link {
            color: var(--lh-text-muted, rgba(242,235,224,0.6)) !important;
            text-decoration: none !important;
            font-size: 0.88rem !important;
            font-weight: 500 !important;
            white-space: nowrap !important;
            transition: color 0.2s !important;
        }
        .nav-link:hover { color: var(--lh-text, #f2ebe0) !important; }
        .nav-link.active { color: var(--lh-accent, #a3b899) !important; }
        .nav-refresh {
            display: block; background: none; border: none;
            color: var(--lh-secondary, #b59197); font-size: 1.4rem;
            cursor: pointer; padding: 2px 0; z-index: 10001; line-height: 1;
        }
        .nav-refresh:active { transform: rotate(180deg); transition: transform 0.3s; }
        .nav-hamburger {
            display: none !important; background: none !important; border: none !important;
            cursor: pointer !important; padding: 10px !important; z-index: 10001 !important;
        }
        .nav-hamburger span {
            display: block !important; width: 24px !important; height: 2px !important;
            background: var(--lh-accent, #a3b899) !important; margin: 5px 0 !important;
            transition: all 0.3s ease !important;
        }
        .nav-hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px,5px) !important; }
        .nav-hamburger.open span:nth-child(2) { opacity: 0 !important; }
        .nav-hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px,-5px) !important; }
        .nav-overlay {
            display: none !important; position: fixed !important;
            top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important;
            background: var(--lh-bg-darker, #2a1f21) !important; z-index: 10000 !important;
            flex-direction: column !important; align-items: center !important;
            justify-content: center !important; gap: 0 !important;
        }
        .nav-overlay.open { display: flex !important; }
        .nav-link-mobile {
            color: var(--lh-text-muted, rgba(242,235,224,0.7)) !important; text-decoration: none !important;
            font-size: 1.05rem !important; font-family: var(--lh-font, 'Philosopher', Georgia, serif) !important;
            font-weight: 500 !important; padding: 12px 40px !important;
            display: block !important; width: 100% !important; text-align: center !important;
        }
        .nav-link-mobile:hover { color: var(--lh-text, #f2ebe0) !important; }
        .nav-link-mobile.active { color: var(--lh-accent, #a3b899) !important; }
        @media (max-width: 768px) {
            .nav-hamburger { display: block !important; }
            .nav-links { display: none !important; }
        }
        /* ===== END NAV ===== */

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 24px 24px 80px;
        }

        .page-header { margin-bottom: 40px; }
        .page-title {
            font-size: 2.5rem;
            color: var(--lh-accent, #a3b899);
            margin-bottom: 8px;
        }
        .page-subtitle {
            color: var(--lh-text-muted, rgba(242,235,224,0.6));
            font-size: 1rem;
        }

        /* Settings Sections */
        .settings-section {
            background: var(--lh-bg-darker, #2a1f21);
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.2));
            margin-bottom: 6px;
            overflow: hidden;
        }
        .settings-section.open {
            overflow: visible;
        }
        .section-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 13px 20px; cursor: pointer; user-select: none; transition: background 0.15s;
        }
        .section-header:hover { background: var(--lh-accent-muted, rgba(163,184,153,0.06)); }
        .section-title {
            font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.14em;
            color: var(--lh-accent, #a3b899); font-weight: 700; margin: 0;
        }
        .section-arrow {
            color: var(--lh-text-muted, rgba(242,235,224,0.4)); font-size: 0.7rem; transition: transform 0.2s;
        }
        .settings-section.open .section-arrow { transform: rotate(180deg); }
        .section-body { display: none; padding: 0 20px 16px; }
        .settings-section.open .section-body { display: block; }
        .section-description {
            color: var(--lh-text-muted, rgba(242,235,224,0.5)); font-size: 0.8rem; margin-bottom: 12px; line-height: 1.4;
        }
        .setting-item { margin-bottom: 14px; }
        .setting-item:last-child { margin-bottom: 0; }

        .setting-label {
            display: block;
            color: var(--lh-text, #f2ebe0);
            font-size: 0.92rem;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .setting-description {
            color: var(--lh-text-muted, rgba(242,235,224,0.5));
            font-size: 0.82rem;
            margin-bottom: 10px;
        }

        .setting-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 10px;
        }
        .setting-label-inline {
            color: var(--lh-text, #f2ebe0);
            font-size: 0.88rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: 90px;
        }
        .setting-input-inline {
            flex: 1;
            background: var(--lh-bg-darker, rgba(61,47,49,0.3));
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            color: var(--lh-text, #f2ebe0);
            padding: 8px 12px;
            font-size: 0.88rem;
            font-family: inherit;
            border-radius: 4px;
        }
        .setting-input-inline:focus {
            outline: none;
            border-color: var(--lh-accent, #a3b899);
        }
        .setting-select-inline {
            flex: 1;
            background: var(--lh-bg-darker, #2a1f21);
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            color: var(--lh-text, #f2ebe0);
            padding: 8px 12px;
            font-size: 0.88rem;
            font-family: inherit;
            cursor: pointer;
            border-radius: 4px;
        }
        .setting-select-inline option {
            background: var(--lh-bg-darker, #2a1f21);
            color: var(--lh-text, #f2ebe0);
        }
        .label-grid {
            display: grid;
            grid-template-columns: 70px 1fr;
            gap: 6px;
            align-items: center;
        }
        .label-tag {
            color: var(--lh-text-muted, rgba(242,235,224,0.5));
            font-size: 0.8rem;
        }
        .field-hint {
            display: block;
            color: var(--lh-text-muted, rgba(242,235,224,0.5));
            font-size: 0.78rem;
            margin-bottom: 3px;
        }
        .hub-theme-block {
            padding: 12px;
            background: var(--lh-bg, rgba(61,47,49,0.15));
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.1));
            border-radius: 6px;
        }
        .hub-theme-grid {
            display: grid;
            grid-template-columns: 90px 1fr;
            gap: 6px;
            align-items: center;
            margin-top: 6px;
        }
        .hub-dd { margin-top: 0; }
        .hub-dd .color-dropdown-trigger { padding: 7px 10px; }
        .hub-dd .color-dropdown-trigger .color-dd-swatch { order: 2; width: 18px; height: 18px; min-width: 18px; }
        .hub-dd .color-dropdown-trigger .color-dd-label { order: 0; font-size: 0.88rem; flex: 1; }
        .hub-dd .color-dropdown-trigger .color-dd-arrow { order: 3; }
        .hub-dd .color-dd-option { padding: 7px 10px; font-size: 0.85rem; }
        .hub-dd .color-dd-option .color-dd-swatch { order: 2; width: 16px; height: 16px; min-width: 16px; margin-left: auto; }
        .hub-dd .color-dd-option span:not(.color-dd-swatch) { order: 0; }

        .setting-input {
            width: 100%;
            background: var(--lh-bg-darker, rgba(61,47,49,0.3));
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            color: var(--lh-text, #f2ebe0);
            padding: 12px 16px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: all 0.2s;
        }
        .setting-input:focus {
            outline: none;
            border-color: var(--lh-accent, #a3b899);
            background: var(--lh-bg-darker, rgba(61,47,49,0.5));
        }

        .setting-select {
            width: 100%;
            background: var(--lh-bg-darker, #2a1f21);
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            color: var(--lh-text, #f2ebe0);
            padding: 12px 16px;
            font-size: 0.95rem;
            font-family: inherit;
            cursor: pointer;
            border-radius: 6px;
        }
        .setting-select option {
            background: var(--lh-bg-darker, #2a1f21);
            color: var(--lh-text, #f2ebe0);
            padding: 8px;
        }
        .setting-select:focus {
            outline: none;
            border-color: var(--lh-accent, #a3b899);
        }

        textarea.setting-input {
            min-height: 100px;
            resize: vertical;
        }

        /* Buttons */
        .btn {
            background: var(--lh-accent, #a3b899);
            border: 1px solid var(--lh-accent, #a3b899);
            color: #1c1c1c;
            padding: 12px 24px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }
        .btn:hover { background: var(--lh-accent-hover, #b4c9aa); border-color: var(--lh-accent-hover, #b4c9aa); }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.4));
            color: var(--lh-accent, #a3b899);
        }
        .btn-secondary:hover { background: var(--lh-accent-muted, rgba(163,184,153,0.1)); }

        .btn-danger {
            background: transparent;
            border: 1px solid var(--lh-secondary-border, rgba(201,169,166,0.4));
            color: var(--lh-secondary, #c9a9a6);
        }
        .btn-danger:hover { background: var(--lh-secondary-muted, rgba(201,169,166,0.1)); }

        .btn-small { padding: 6px 14px; font-size: 0.8rem; }

        .btn-inline { margin-top: 8px; }

        /* Info / Warning Boxes */
        .info-box {
            background: var(--lh-accent-muted, rgba(163,184,153,0.1));
            padding: 12px 16px;
            border-left: 3px solid var(--lh-accent, #a3b899);
            font-size: 0.9rem;
            color: var(--lh-text, rgba(242,235,224,0.8));
        }

        .warning-box {
            background: var(--lh-secondary-muted, rgba(201,169,166,0.1));
            padding: 12px 16px;
            border-left: 3px solid var(--lh-secondary, #c9a9a6);
            font-size: 0.9rem;
            color: var(--lh-text, rgba(242,235,224,0.8));
        }

        /* Color Grid */
        .color-dropdown {
            position: relative;
            margin-top: 8px;
        }
        .color-dropdown-trigger {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            background: var(--lh-bg-darker, #2a1f21);
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            border-radius: 6px;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .color-dropdown-trigger:hover {
            border-color: var(--lh-accent, #a3b899);
        }
        .color-dd-swatch {
            width: 24px; height: 24px; min-width: 24px;
            border-radius: 4px;
            border: 1px solid rgba(128,128,128,0.25);
        }
        .color-dd-label {
            flex: 1;
            color: var(--lh-text, #f2ebe0);
            font-size: 0.95rem;
        }
        .color-dd-arrow {
            color: var(--lh-text-muted, rgba(242,235,224,0.5));
            font-size: 0.9rem;
            transition: transform 0.2s;
        }
        .color-dropdown.open .color-dd-arrow {
            transform: rotate(180deg);
        }
        .color-dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0; right: 0;
            background: var(--lh-bg-darker, #2a1f21);
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.25));
            border-top: none;
            border-radius: 0 0 6px 6px;
            max-height: 260px;
            overflow-y: auto;
            z-index: 100;
        }
        .color-dropdown.open .color-dropdown-menu {
            display: block;
        }
        .color-dd-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 9px 14px;
            cursor: pointer;
            transition: background 0.15s;
            color: var(--lh-text, #f2ebe0);
            font-size: 0.9rem;
        }
        .color-dd-option:hover {
            background: rgba(163,184,153,0.12);
        }
        .color-dd-option.active {
            background: var(--lh-accent-muted, rgba(163,184,153,0.15));
        }
        .color-dd-option .color-dd-swatch {
            width: 20px; height: 20px; min-width: 20px;
        }

        /* Toggle Switch */
        .setting-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .toggle-switch {
            position: relative;
            width: 50px; height: 26px;
            background: rgba(163,184,153,0.2);
            border-radius: 13px;
            cursor: pointer;
            transition: background 0.3s;
            flex-shrink: 0;
        }
        .toggle-switch.active { background: var(--lh-accent, #a3b899); }
        .toggle-slider {
            position: absolute; top: 3px; left: 3px;
            width: 20px; height: 20px;
            background: var(--lh-text, #f2ebe0); border-radius: 50%;
            transition: transform 0.3s;
        }
        .toggle-switch.active .toggle-slider { transform: translateX(24px); }

        /* Habit List */
        .habit-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.2));
            padding: 12px;
            margin-top: 12px;
            background: var(--lh-bg-darker, rgba(61,47,49,0.3));
        }
        .habit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin-bottom: 8px;
            background: var(--lh-bg, rgba(61,47,49,0.5));
            border-left: 2px solid var(--lh-accent, #a3b899);
        }
        .habit-text { flex: 1; color: var(--lh-text, #f2ebe0); font-size: 0.9rem; }
        .habit-actions { display: flex; gap: 8px; }

        /* Archive Grid */
        .archive-grid {
            display: grid;
            gap: 8px;
            margin-top: 12px;
        }
        .archive-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--lh-bg-darker, rgba(61,47,49,0.3));
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.15));
            transition: all 0.2s;
        }
        .archive-item.archived {
            opacity: 0.5;
            border-style: dashed;
        }
        .archive-item-info {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        .archive-item-icon {
            font-size: 1rem;
            width: 28px;
            text-align: center;
            flex-shrink: 0;
        }
        .archive-item-name {
            color: var(--lh-text, #f2ebe0);
            font-size: 0.9rem;
            font-weight: 600;
        }
        .archive-item-desc {
            color: var(--lh-text-faint, rgba(242,235,224,0.4));
            font-size: 0.8rem;
        }
        .archive-toggle-btn {
            background: none;
            border: 1px solid var(--lh-accent-border, rgba(163,184,153,0.3));
            color: var(--lh-accent, #a3b899);
            padding: 6px 14px;
            font-size: 0.8rem;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .archive-toggle-btn:hover {
            background: var(--lh-accent-muted, rgba(163,184,153,0.1));
        }
        .archive-toggle-btn.restore {
            border-color: var(--lh-secondary-border, rgba(201,169,166,0.3));
            color: var(--lh-secondary, #c9a9a6);
        }
        .archive-toggle-btn.restore:hover {
            background: var(--lh-secondary-muted, rgba(201,169,166,0.1));
        }

        /* Section Groups in Archive */
        .archive-group {
            margin-bottom: 20px;
        }
        .archive-group-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--lh-text-faint, rgba(242,235,224,0.4));
            margin-bottom: 8px;
            padding-left: 4px;
        }

        /* Save indicator */
        .save-flash {
            display: inline-block;
            color: var(--lh-accent, #a3b899);
            font-size: 0.85rem;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s;
            margin-left: 12px;
        }
        .save-flash.show { opacity: 1; }

        /* ===== MOBILE ===== */
        html, body { overflow-x: hidden !important; max-width: 100vw !important; }
        @media screen and (max-width: 768px) {
            input, textarea, select { font-size: 16px !important; }
            .container { padding: 16px 16px 60px; }
            .section-body { padding: 0 16px 14px; }
            .section-header { padding: 12px 16px; }
            .page-title { font-size: 1.8rem; }
            .setting-row { flex-direction: column; align-items: stretch; gap: 4px; }
            .setting-label-inline { min-width: auto; }
            .label-grid { grid-template-columns: 60px 1fr; }
        }
        @media screen and (max-width: 380px) {
            .container { padding: 12px 10px 60px; }
            .section-body { padding: 0 12px 12px; }
            .section-header { padding: 10px 12px; }
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">Our Life Hub</a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="kasey-hub.html" class="nav-link">Kasey</a>
                <a href="charlie-hub.html" class="nav-link">Charlie</a>
                <a href="our-dreams.html" class="nav-link">Us ♡</a>
                <a href="meal-plan.html" class="nav-link">Meals</a>
                <a href="settings.html" class="nav-link active">Settings</a>
            </div>
            <div style="display:flex;align-items:center;gap:2px;">
                <button class="nav-refresh" onclick="location.reload(true)" aria-label="Refresh" title="Refresh page">↻</button>
                <button class="nav-hamburger" id="navHamburger" onclick="toggleNav()" aria-label="Menu">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </nav>
    <div class="nav-overlay" id="navOverlay" onclick="toggleNav()">
        <a href="index.html" class="nav-link-mobile">Home</a>
        <a href="kasey-hub.html" class="nav-link-mobile">Kasey</a>
        <a href="charlie-hub.html" class="nav-link-mobile">Charlie</a>
        <a href="our-dreams.html" class="nav-link-mobile">Us ♡</a>
        <a href="meal-plan.html" class="nav-link-mobile">Meals</a>
        <a href="settings.html" class="nav-link-mobile active">Settings</a>
    </div>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">Settings</h1>
            <p class="page-subtitle">Customize your Life Hub experience</p>
        </div>

        <!-- 1. BRANDING & IDENTITY -->
        <div class="settings-section open" id="sec-branding">
            <div class="section-header" onclick="toggleSection('sec-branding')">
                <h2 class="section-title">Branding & Identity</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-row">
                    <label class="setting-label-inline">App Name</label>
                    <input type="text" id="appName" class="setting-input-inline" placeholder="Our Life Hub">
                </div>
                <div class="setting-row">
                    <label class="setting-label-inline">Person 1</label>
                    <input type="text" id="name1" class="setting-input-inline" placeholder="Kasey">
                </div>
                <div class="setting-row">
                    <label class="setting-label-inline">Person 2</label>
                    <input type="text" id="name2" class="setting-input-inline" placeholder="Charlie">
                </div>
                <div style="text-align:right;margin-top:6px;">
                    <button class="btn btn-small" onclick="saveAppName();saveNames()">Save</button>
                    <span class="save-flash" id="appNameFlash">✓ Saved</span>
                    <span class="save-flash" id="namesFlash"></span>
                </div>

                <div style="margin-top:14px;padding-top:14px;border-top:1px solid var(--lh-accent-border,rgba(163,184,153,0.1));">
                    <label class="setting-label" style="margin-bottom:8px;">Page Labels</label>
                    <div class="label-grid">
                        <span class="label-tag">Home</span>
                        <input type="text" id="labelHome" class="setting-input-inline" placeholder="Home">
                        <span class="label-tag">Dreams</span>
                        <input type="text" id="labelDreams" class="setting-input-inline" placeholder="Us ♡">
                        <span class="label-tag">Meals</span>
                        <input type="text" id="labelMeals" class="setting-input-inline" placeholder="Meals">
                        <span class="label-tag">Settings</span>
                        <input type="text" id="labelSettings" class="setting-input-inline" placeholder="Settings">
                    </div>
                    <div style="text-align:right;margin-top:6px;">
                        <button class="btn btn-small" onclick="savePageLabels()">Save Labels</button>
                        <span class="save-flash" id="labelsFlash">✓ Saved</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. APPEARANCE -->
        <div class="settings-section" id="sec-appearance">
            <div class="section-header" onclick="toggleSection('sec-appearance')">
                <h2 class="section-title">Appearance</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-item">
                    <label class="setting-label">Accent Color</label>
                    <div class="color-dropdown" id="accentDropdown">
                        <div class="color-dropdown-trigger" onclick="toggleColorDropdown('accent')">
                            <span class="color-dd-swatch" id="accentPreview"></span>
                            <span class="color-dd-label" id="accentLabel">Sage Green</span>
                            <span class="color-dd-arrow">▾</span>
                        </div>
                        <div class="color-dropdown-menu" id="accentMenu"></div>
                    </div>
                </div>

                <div class="setting-item">
                    <label class="setting-label">Secondary Color</label>
                    <div class="color-dropdown" id="secondaryDropdown">
                        <div class="color-dropdown-trigger" onclick="toggleColorDropdown('secondary')">
                            <span class="color-dd-swatch" id="secondaryPreview"></span>
                            <span class="color-dd-label" id="secondaryLabel">Dusty Rose</span>
                            <span class="color-dd-arrow">▾</span>
                        </div>
                        <div class="color-dropdown-menu" id="secondaryMenu"></div>
                    </div>
                </div>

                <div class="setting-item">
                    <label class="setting-label">Background</label>
                    <div class="color-dropdown" id="bgDropdown">
                        <div class="color-dropdown-trigger" onclick="toggleColorDropdown('bg')">
                            <span class="color-dd-swatch" id="bgPreview"></span>
                            <span class="color-dd-label" id="bgLabel">Dark Plum</span>
                            <span class="color-dd-arrow">▾</span>
                        </div>
                        <div class="color-dropdown-menu" id="bgMenu"></div>
                    </div>
                </div>

                <div class="setting-row">
                    <label class="setting-label-inline">Body Font</label>
                    <select id="fontFamily" class="setting-select-inline" onchange="setFontFamily()">
                        <option value="philosopher" style="font-family:'Philosopher',serif">Philosopher</option>
                        <option value="cormorant" style="font-family:'Cormorant Garamond',serif">Cormorant Garamond</option>
                        <option value="worksans" style="font-family:'Work Sans',sans-serif">Work Sans</option>
                        <option value="baloo" style="font-family:'Baloo 2',cursive">Baloo 2</option>
                        <option value="lora" style="font-family:'Lora',serif">Lora</option>
                        <option value="cardo" style="font-family:'Cardo',serif">Cardo</option>
                        <option value="playfair" style="font-family:'Playfair Display',serif">Playfair Display</option>
                        <option value="kalam" style="font-family:'Kalam',cursive">Kalam</option>
                        <option value="lobster" style="font-family:'Lobster',cursive">Lobster</option>
                        <option value="indieflower" style="font-family:'Indie Flower',cursive">Indie Flower</option>
                        <option value="gilda" style="font-family:'Gilda Display',serif">Gilda Display</option>
                        <option value="cormorantinfant" style="font-family:'Cormorant Infant',serif">Cormorant Infant</option>
                        <option value="dmserif" style="font-family:'DM Serif Display',serif">DM Serif Display</option>
                        <option value="tenor" style="font-family:'Tenor Sans',sans-serif">Tenor Sans</option>
                    </select>
                </div>

                <div class="setting-row">
                    <label class="setting-label-inline">Heading Font</label>
                    <select id="headingFont" class="setting-select-inline" onchange="setHeadingFont()">
                        <option value="philosopher" style="font-family:'Philosopher',serif">Philosopher</option>
                        <option value="cormorant" style="font-family:'Cormorant Garamond',serif">Cormorant Garamond</option>
                        <option value="worksans" style="font-family:'Work Sans',sans-serif">Work Sans</option>
                        <option value="baloo" style="font-family:'Baloo 2',cursive">Baloo 2</option>
                        <option value="lora" style="font-family:'Lora',serif">Lora</option>
                        <option value="cardo" style="font-family:'Cardo',serif">Cardo</option>
                        <option value="playfair" style="font-family:'Playfair Display',serif">Playfair Display</option>
                        <option value="kalam" style="font-family:'Kalam',cursive">Kalam</option>
                        <option value="lobster" style="font-family:'Lobster',cursive">Lobster</option>
                        <option value="indieflower" style="font-family:'Indie Flower',cursive">Indie Flower</option>
                        <option value="gilda" style="font-family:'Gilda Display',serif">Gilda Display</option>
                        <option value="cormorantinfant" style="font-family:'Cormorant Infant',serif">Cormorant Infant</option>
                        <option value="dmserif" style="font-family:'DM Serif Display',serif">DM Serif Display</option>
                        <option value="tenor" style="font-family:'Tenor Sans',sans-serif">Tenor Sans</option>
                        <option value="dancing" style="font-family:'Dancing Script',cursive">Dancing Script</option>
                        <option value="satisfy" style="font-family:'Satisfy',cursive">Satisfy</option>
                        <option value="greatvibes" style="font-family:'Great Vibes',cursive">Great Vibes</option>
                        <option value="abril" style="font-family:'Abril Fatface',serif">Abril Fatface</option>
                    </select>
                </div>

                <div class="setting-row">
                    <label class="setting-label-inline">Font Size</label>
                    <div style="display:flex;align-items:center;gap:10px;">
                        <button class="btn-secondary btn btn-small" onclick="adjustFontSize(-1)">A−</button>
                        <span id="fontSizeDisplay" style="color:var(--lh-accent);font-weight:600;min-width:36px;text-align:center;">100%</span>
                        <button class="btn-secondary btn btn-small" onclick="adjustFontSize(1)">A+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2b. PERSONAL HUB THEMES -->
        <div class="settings-section" id="sec-hubthemes">
            <div class="section-header" onclick="toggleSection('sec-hubthemes')">
                <h2 class="section-title">Personal Hub Themes</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <p class="section-description">Override the global theme on each person's hub. Leave on "Use Global" to inherit the shared theme.</p>

                <div class="hub-theme-block">
                    <label class="setting-label" id="hubTheme1Label">Kasey's Hub</label>
                    <div class="hub-theme-grid">
                        <span class="field-hint">Accent</span>
                        <div class="color-dropdown hub-dd" id="p1AccentDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p1AccentDD')">
                                <span class="color-dd-swatch" id="p1AccentSwatch"></span>
                                <span class="color-dd-label" id="p1AccentLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p1AccentMenu"></div>
                        </div>
                        <span class="field-hint">Secondary</span>
                        <div class="color-dropdown hub-dd" id="p1SecondaryDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p1SecondaryDD')">
                                <span class="color-dd-swatch" id="p1SecondarySwatch"></span>
                                <span class="color-dd-label" id="p1SecondaryLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p1SecondaryMenu"></div>
                        </div>
                        <span class="field-hint">Background</span>
                        <div class="color-dropdown hub-dd" id="p1BgDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p1BgDD')">
                                <span class="color-dd-swatch" id="p1BgSwatch"></span>
                                <span class="color-dd-label" id="p1BgLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p1BgMenu"></div>
                        </div>
                        <span class="field-hint">Body Font</span>
                        <div class="color-dropdown hub-dd" id="p1FontDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p1FontDD')">
                                <span class="color-dd-label" id="p1FontLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p1FontMenu"></div>
                        </div>
                        <span class="field-hint">Heading Font</span>
                        <div class="color-dropdown hub-dd" id="p1HFontDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p1HFontDD')">
                                <span class="color-dd-label" id="p1HFontLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p1HFontMenu"></div>
                        </div>
                    </div>
                </div>

                <div class="hub-theme-block" style="margin-top:16px;">
                    <label class="setting-label" id="hubTheme2Label">Charlie's Hub</label>
                    <div class="hub-theme-grid">
                        <span class="field-hint">Accent</span>
                        <div class="color-dropdown hub-dd" id="p2AccentDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p2AccentDD')">
                                <span class="color-dd-swatch" id="p2AccentSwatch"></span>
                                <span class="color-dd-label" id="p2AccentLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p2AccentMenu"></div>
                        </div>
                        <span class="field-hint">Secondary</span>
                        <div class="color-dropdown hub-dd" id="p2SecondaryDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p2SecondaryDD')">
                                <span class="color-dd-swatch" id="p2SecondarySwatch"></span>
                                <span class="color-dd-label" id="p2SecondaryLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p2SecondaryMenu"></div>
                        </div>
                        <span class="field-hint">Background</span>
                        <div class="color-dropdown hub-dd" id="p2BgDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p2BgDD')">
                                <span class="color-dd-swatch" id="p2BgSwatch"></span>
                                <span class="color-dd-label" id="p2BgLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p2BgMenu"></div>
                        </div>
                        <span class="field-hint">Body Font</span>
                        <div class="color-dropdown hub-dd" id="p2FontDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p2FontDD')">
                                <span class="color-dd-label" id="p2FontLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p2FontMenu"></div>
                        </div>
                        <span class="field-hint">Heading Font</span>
                        <div class="color-dropdown hub-dd" id="p2HFontDD">
                            <div class="color-dropdown-trigger" onclick="toggleHubDD('p2HFontDD')">
                                <span class="color-dd-label" id="p2HFontLabel">Use Global</span>
                                <span class="color-dd-arrow">▾</span>
                            </div>
                            <div class="color-dropdown-menu" id="p2HFontMenu"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. PAGE MANAGEMENT -->
        <div class="settings-section" id="sec-pages">
            <div class="section-header" onclick="toggleSection('sec-pages')">
                <h2 class="section-title">Page Management</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="archive-grid" id="pageArchiveGrid"></div>
            </div>
        </div>

        <!-- 4. SECTION MANAGEMENT -->
        <div class="settings-section" id="sec-sections">
            <div class="section-header" onclick="toggleSection('sec-sections')">
                <h2 class="section-title">Section Management</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div id="sectionArchiveContainer"></div>
            </div>
        </div>

        <!-- 5. HABIT CUSTOMIZATION -->
        <div class="settings-section" id="sec-habits">
            <div class="section-header" onclick="toggleSection('sec-habits')">
                <h2 class="section-title">Habit Customization</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-item">
                    <label class="setting-label" id="habits1Label">Person 1 Habits</label>
                    <div id="habits1List" class="habit-list"></div>
                    <div style="display:flex;gap:8px;margin-top:8px;">
                        <input type="text" id="newHabit1" class="setting-input" placeholder="Add new habit..." style="flex:1;padding:8px 12px;" onkeypress="if(event.key==='Enter') addHabit('person1')">
                        <button class="btn btn-small" onclick="addHabit('person1')">Add</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label class="setting-label" id="habits2Label">Person 2 Habits</label>
                    <div id="habits2List" class="habit-list"></div>
                    <div style="display:flex;gap:8px;margin-top:8px;">
                        <input type="text" id="newHabit2" class="setting-input" placeholder="Add new habit..." style="flex:1;padding:8px 12px;" onkeypress="if(event.key==='Enter') addHabit('person2')">
                        <button class="btn btn-small" onclick="addHabit('person2')">Add</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. CONTENT -->
        <div class="settings-section" id="sec-content">
            <div class="section-header" onclick="toggleSection('sec-content')">
                <h2 class="section-title">Content</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-item">
                    <label class="setting-label">Daily Prompts <span style="font-weight:400;color:var(--lh-text-muted);font-size:0.8rem;">(one per line, min 10)</span></label>
                    <textarea id="customPrompts" class="setting-input" style="min-height:80px;resize:vertical;" placeholder="What's one thing I did today that made you smile?&#10;What's your favorite memory of us from this past month?"></textarea>
                    <div style="display:flex;align-items:center;gap:12px;margin-top:6px;">
                        <button class="btn btn-small" onclick="saveCustomPrompts()">Save</button>
                        <span class="save-flash" id="promptsFlash">✓ Saved</span>
                        <span style="color:var(--lh-text-faint);font-size:0.78rem;"><span id="promptCount">0</span> saved</span>
                    </div>
                </div>
                <div class="setting-item">
                    <label class="setting-label">Monthly Challenges <span style="font-weight:400;color:var(--lh-text-muted);font-size:0.8rem;">(one per line, exactly 12)</span></label>
                    <textarea id="customChallenges" class="setting-input" style="min-height:80px;resize:vertical;" placeholder="Write each other a love letter&#10;Go on a walk together 3 times per week"></textarea>
                    <div style="display:flex;align-items:center;gap:12px;margin-top:6px;">
                        <button class="btn btn-small" onclick="saveCustomChallenges()">Save</button>
                        <span class="save-flash" id="challengesFlash">✓ Saved</span>
                        <span style="color:var(--lh-text-faint);font-size:0.78rem;"><span id="challengeCount">0</span> saved</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 7. MEAL PLAN -->
        <div class="settings-section" id="sec-meals">
            <div class="section-header" onclick="toggleSection('sec-meals')">
                <h2 class="section-title">Meal Plan</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-item">
                    <label class="setting-label" id="mealPerson1Label">Person 1 Targets</label>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:4px;">
                        <div>
                            <span class="field-hint">Calories/day</span>
                            <input type="text" id="meal1Calories" class="setting-input" placeholder="1,350-1,700" style="padding:8px 12px;">
                        </div>
                        <div>
                            <span class="field-hint">Protein/day</span>
                            <input type="text" id="meal1Protein" class="setting-input" placeholder="140-165g" style="padding:8px 12px;">
                        </div>
                    </div>
                </div>
                <div class="setting-item">
                    <label class="setting-label" id="mealPerson2Label">Person 2 Targets</label>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:4px;">
                        <div>
                            <span class="field-hint">Calories/day</span>
                            <input type="text" id="meal2Calories" class="setting-input" placeholder="2,200-2,500" style="padding:8px 12px;">
                        </div>
                        <div>
                            <span class="field-hint">Protein/day</span>
                            <input type="text" id="meal2Protein" class="setting-input" placeholder="180-210g" style="padding:8px 12px;">
                        </div>
                    </div>
                    <div style="text-align:right;margin-top:6px;">
                        <button class="btn btn-small" onclick="saveMealSettings()">Save Meal Settings</button>
                        <span class="save-flash" id="mealsFlash">✓ Saved</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 8. PREFERENCES -->
        <div class="settings-section" id="sec-prefs">
            <div class="section-header" onclick="toggleSection('sec-prefs')">
                <h2 class="section-title">Preferences</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div class="setting-row">
                    <label class="setting-label-inline">Time Zone</label>
                    <select id="timezone" class="setting-select-inline" onchange="saveTimezone()">
                        <option value="America/New_York">Eastern (ET)</option>
                        <option value="America/Chicago">Central (CT)</option>
                        <option value="America/Denver">Mountain (MT)</option>
                        <option value="America/Los_Angeles">Pacific (PT)</option>
                        <option value="America/Anchorage">Alaska (AKT)</option>
                        <option value="Pacific/Honolulu">Hawaii (HST)</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label class="setting-label-inline">Week Starts</label>
                    <select id="weekStart" class="setting-select-inline" onchange="saveWeekStart()">
                        <option value="0">Sunday</option>
                        <option value="1">Monday</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 9. DATA -->
        <div class="settings-section" id="sec-data">
            <div class="section-header" onclick="toggleSection('sec-data')">
                <h2 class="section-title">Data Management</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <div style="display:flex;gap:8px;flex-wrap:wrap;">
                    <button class="btn-secondary btn btn-small" onclick="exportData()">Export Backup</button>
                    <input type="file" id="importFile" accept=".json" style="display:none;" onchange="importData(event)">
                    <button class="btn-secondary btn btn-small" onclick="document.getElementById('importFile').click()">Import Backup</button>
                    <button class="btn-danger btn btn-small" onclick="resetSettings()">Reset to Defaults</button>
                </div>
            </div>
        </div>

        <!-- 10. ABOUT -->
        <div class="settings-section" id="sec-about">
            <div class="section-header" onclick="toggleSection('sec-about')">
                <h2 class="section-title">About</h2>
                <span class="section-arrow">▾</span>
            </div>
            <div class="section-body">
                <p style="color:var(--lh-text-muted);font-size:0.82rem;line-height:1.5;">
                    <strong data-lh-name="app" style="color:var(--lh-text);">Our Life Hub</strong> v2.0 — Personal habit tracking & life management. Data stored locally + synced to Firebase.
                </p>
            </div>
        </div>
    </div>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCDda9sPwSY-RQ5rrM5THOvcLtHvcPRYd4",
            authDomain: "our-habit-hub.firebaseapp.com",
            projectId: "our-habit-hub",
            storageBucket: "our-habit-hub.firebasestorage.app",
            messagingSenderId: "78555830496",
            appId: "1:78555830496:web:3e457e54729cc11b825885"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
        window.firestoreImports = { doc, setDoc, getDoc };
    </script>

    <script>
        // ══════════════════════════════════════════════
        // SETTINGS PAGE LOGIC
        // ══════════════════════════════════════════════

        const LH = window.LifeHubSettings;
        const S = LH.current;

        function toggleSection(id) {
            document.getElementById(id).classList.toggle('open');
            _saveOpenSections();
        }

        function _saveOpenSections() {
            var open = [];
            document.querySelectorAll('.settings-section.open').forEach(function(el) { open.push(el.id); });
            sessionStorage.setItem('_settingsOpenSections', JSON.stringify(open));
        }

        function _saveUIState(dropdownId) {
            _saveOpenSections();
            if (dropdownId) sessionStorage.setItem('_settingsOpenDD', dropdownId);
        }

        function _restoreUIState() {
            try {
                var sections = JSON.parse(sessionStorage.getItem('_settingsOpenSections') || '[]');
                if (sections.length) {
                    document.querySelectorAll('.settings-section').forEach(function(el) {
                        if (sections.indexOf(el.id) !== -1) el.classList.add('open');
                        else el.classList.remove('open');
                    });
                }
                var ddId = sessionStorage.getItem('_settingsOpenDD');
                if (ddId) {
                    sessionStorage.removeItem('_settingsOpenDD');
                    var dd = document.getElementById(ddId);
                    if (dd) {
                        dd.classList.add('open');
                        setTimeout(function() { dd.scrollIntoView({block:'center',behavior:'instant'}); }, 50);
                    }
                }
            } catch(e) {}
        }

        // ── Utility: flash a save indicator ──
        function flash(id) {
            const el = document.getElementById(id);
            if (!el) return;
            el.classList.add('show');
            setTimeout(() => el.classList.remove('show'), 2000);
        }

        // ── Firebase Settings Sync ──
        function syncToFirebase() {
            localStorage.setItem('_settingsLastSaved', Date.now().toString());
            if (!window.db || !window.firestoreImports) return Promise.resolve();
            try {
                const keys = ['accentColor','secondaryColor','bgColor','fontFamily','headingFont','fontSize','appName','userNames','archivedPages','archivedSections','pageLabels','features','customHabits_person1','customHabits_person2','customPrompts','customChallenges','timezone','weekStart','mealSettings','person1Appearance','person2Appearance'];
                const data = {};
                keys.forEach(k => {
                    const v = localStorage.getItem(k);
                    if (v !== null) data[k] = v;
                });
                data._lastUpdated = Date.now();
                const fi = window.firestoreImports;
                return fi.setDoc(fi.doc(window.db, 'settings', 'global'), data, { merge: true })
                    .catch(e => { console.log('Settings sync failed:', e); });
            } catch(e) { console.log('Settings sync error:', e); return Promise.resolve(); }
        }
        window.syncToFirebase = syncToFirebase;

        // ── Default Habits ──
        const defaultHabits = {
            person1: [
                "Drink 8 Glasses of Water", "Exercise 30+ Minutes", "Eat a Healthy Meal",
                "Read 10+ Pages", "Meditate", "Subliminals & Rampages", "Journal",
                "Walk 8k Steps", "Stretch", "Vibration Plate", "Take Vitamins & Supplements",
                "Morning Routine", "Evening Routine", "Do Laundry", "Altar Time",
                "Tidy Living Space", "Dry Brushing & Face Massage", "EFT Tapping",
                "Spend Time Outside", "No Social Media in the Morning"
            ],
            person2: [
                "Exercise 30+ Minutes", "Eat a Healthy Meal", "Read 10+ Pages",
                "Meditate", "Sleep 7+ Hours", "Journal", "Walk 10k Steps",
                "Vibration Plate", "Learn Something New", "Practice Gratitude",
                "Acupuncture Mat", "Tidy Living Space", "30 Mins of Guitar",
                "EFT Tapping", "Time in Nature", "Acts of Kindness"
            ]
        };

        // ── Color Definitions ──
        const colorDefs = {
            blush:       { name: 'Blush',         hex: '#d4919e' },
            petalpink:   { name: 'Petal Pink',    hex: '#e8b4b8' },
            rosegold:    { name: 'Rose Gold',     hex: '#d4a4a4' },
            raspberry:   { name: 'Raspberry',     hex: '#b0607a' },
            apricot:     { name: 'Apricot',       hex: '#e8b088' },
            burntsienna: { name: 'Burnt Sienna',  hex: '#c97856' },
            nude:        { name: 'Nude',          hex: '#d4b8a8' },
            cream:       { name: 'Cream',         hex: '#e8ddd0' },
            sage:        { name: 'Sage Green',    hex: '#a3b899' },
            moss:        { name: 'Moss',          hex: '#8a9c6b' },
            softmint:    { name: 'Soft Mint',     hex: '#a8d8c4' },
            palejade:    { name: 'Pale Jade',     hex: '#8ec4a8' },
            dustyteal:   { name: 'Dusty Teal',    hex: '#6d9e9e' },
            powderblue:  { name: 'Powder Blue',   hex: '#a4c2d8' },
            denim:       { name: 'Denim',         hex: '#6888a8' },
            periwinkle:  { name: 'Periwinkle',    hex: '#8e9cc7' },
            dustylilac:  { name: 'Dusty Lilac',   hex: '#c3a6c9' },
            darkplum:    { name: 'Dark Plum',     hex: '#3d2f31' },
            storm:       { name: 'Storm',         hex: '#252830' },
            obsidian:    { name: 'Obsidian',      hex: '#181818' }
        };

        const bgColorDefs = {
            dark:        { name: 'Dark Plum',     hex: '#3d2f31' },
            dustymauve:  { name: 'Dusty Mauve',   hex: '#332830' },
            bordeaux:    { name: 'Bordeaux',      hex: '#301820' },
            espresso:    { name: 'Espresso',      hex: '#2b2220' },
            warmcocoa:   { name: 'Warm Cocoa',    hex: '#362a28' },
            forest:      { name: 'Forest',        hex: '#1f2e2a' },
            deepteal:    { name: 'Deep Teal',     hex: '#1a2e2e' },
            storm:       { name: 'Storm',         hex: '#252830' },
            midnight:    { name: 'Midnight',      hex: '#141420' },
            obsidian:    { name: 'Obsidian',      hex: '#181818' },
            warmlinen:   { name: 'Warm Linen',    hex: '#f0e8dc' },
            softblush:   { name: 'Soft Blush',    hex: '#f0d4da' }
        };

        // ── Page & Section Definitions ──
        const pageDefs = [
            { key: 'home',    icon: '⌂', name: 'Home Page',       desc: 'Calendar, reminders, grocery list, phone book' },
            { key: 'person1', icon: '♡', name: S.names.name1 + "'s Hub", desc: 'Habits, wellness, journal, resources' },
            { key: 'person2', icon: '♡', name: S.names.name2 + "'s Hub", desc: 'Habits, wellness, journal, resources' },
            { key: 'dreams',  icon: '✧', name: 'Dreams & Goals',  desc: 'Restaurants, places, wishlists, bucket list' },
            { key: 'meals',   icon: '⚘', name: 'Meal Plan',      desc: 'Weekly meals, grocery sync, prep sessions' }
        ];

        const sectionDefs = {
            home: [
                { key: 'reminders',  name: 'Reminders' },
                { key: 'calendar',   name: 'Calendar' },
                { key: 'grocery',    name: 'Grocery List' },
                { key: 'phonebook',  name: 'Phone Book' }
            ],
            person1: [
                { key: 'bingo',     name: 'Habits & Wellness' },
                { key: 'todo',      name: 'To-Do List' },
                { key: 'resources', name: 'Resources' },
                { key: 'videos',    name: 'Video Hub' },
                { key: 'journal',   name: 'Journal' },
                { key: 'prompt',    name: 'Daily Prompt' },
                { key: 'spellbook', name: 'Spell Book' }
            ],
            person2: [
                { key: 'bingo',     name: 'Habits & Wellness' },
                { key: 'resources', name: 'Resources' },
                { key: 'videos',    name: 'Video Hub' },
                { key: 'todos',     name: 'To-Do List' },
                { key: 'journal',   name: 'Journal' },
                { key: 'prompt',    name: 'Daily Prompt' }
            ],
            dreams: [
                { key: 'restaurants',  name: 'Restaurants' },
                { key: 'places',       name: 'Places to Go' },
                { key: 'wishlists',    name: 'Wishlists' },
                { key: 'travel',       name: 'Travel' },
                { key: 'shows-movies', name: 'TV Shows & Movies' },
                { key: 'bucket',       name: 'Bucket List' },
                { key: 'home',         name: 'Dream Home' },
                { key: 'pets',         name: 'Future Pets' },
                { key: 'traditions',   name: 'Traditions' }
            ],
            meals: [
                { key: 'person1-meals', name: S.names.name1 + "'s Meals" },
                { key: 'person2-meals', name: S.names.name2 + "'s Meals" },
                { key: 'prep',          name: 'Prep Sessions' },
                { key: 'grocery-sync',  name: 'Grocery Sync' }
            ]
        };

        // ══════════════════════════════════════════════
        // BUILD UI
        // ══════════════════════════════════════════════

        function buildColorDropdowns() {
            const defaultSecMap = (LH && LH.defaultSecMap) || { sage:'rosegold', blush:'sage', cream:'rosegold', periwinkle:'rosegold', dustylilac:'rosegold', powderblue:'rosegold', softmint:'rosegold', moss:'rosegold', burntsienna:'sage', rosegold:'sage', dustyteal:'rosegold', petalpink:'sage', apricot:'sage', palejade:'rosegold', raspberry:'sage', denim:'rosegold', nude:'sage', obsidian:'rosegold', darkplum:'sage', storm:'rosegold' };

            function buildMenu(menuId, defs, currentKey, callback) {
                const menu = document.getElementById(menuId);
                menu.innerHTML = Object.keys(defs).map(key => {
                    const c = defs[key];
                    return '<div class="color-dd-option' + (currentKey === key ? ' active' : '') + '" onclick="' + callback + '(\'' + key + '\')">' +
                        '<span class="color-dd-swatch" style="background:' + c.hex + '"></span>' +
                        '<span>' + c.name + '</span></div>';
                }).join('');
            }

            // Accent
            const accentDef = colorDefs[S.accentColor] || colorDefs.sage;
            buildMenu('accentMenu', colorDefs, S.accentColor, 'setAccentColor');
            document.getElementById('accentPreview').style.background = accentDef.hex;
            document.getElementById('accentLabel').textContent = accentDef.name;

            // Secondary
            const currentSec = S.secondaryColor || (defaultSecMap && defaultSecMap[S.accentColor]) || 'rosegold';
            const secDef = colorDefs[currentSec] || colorDefs.rosegold;
            buildMenu('secondaryMenu', colorDefs, currentSec, 'setSecondaryColor');
            document.getElementById('secondaryPreview').style.background = secDef.hex;
            document.getElementById('secondaryLabel').textContent = secDef.name;

            // Background
            const bgDef = bgColorDefs[S.bgColor] || bgColorDefs.dark;
            buildMenu('bgMenu', bgColorDefs, S.bgColor, 'setBackgroundColor');
            document.getElementById('bgPreview').style.background = bgDef.hex;
            document.getElementById('bgLabel').textContent = bgDef.name;
        }

        window.toggleColorDropdown = function(which) {
            const dd = document.getElementById(which + 'Dropdown');
            const wasOpen = dd.classList.contains('open');
            // Close all
            document.querySelectorAll('.color-dropdown.open').forEach(d => d.classList.remove('open'));
            if (!wasOpen) dd.classList.add('open');
        };
        // Close on outside click
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.color-dropdown')) {
                document.querySelectorAll('.color-dropdown.open').forEach(d => d.classList.remove('open'));
            }
        });

        function buildPageArchiveGrid() {
            const grid = document.getElementById('pageArchiveGrid');
            const archived = S.archivedPages;

            grid.innerHTML = pageDefs.map(p => {
                const isArchived = archived.indexOf(p.key) !== -1;
                return '<div class="archive-item' + (isArchived ? ' archived' : '') + '">' +
                    '<div class="archive-item-info">' +
                        '<span class="archive-item-icon">' + p.icon + '</span>' +
                        '<div><div class="archive-item-name">' + p.name + '</div>' +
                        '<div class="archive-item-desc">' + p.desc + '</div></div>' +
                    '</div>' +
                    '<button class="archive-toggle-btn' + (isArchived ? ' restore' : '') + '" onclick="togglePageArchive(\'' + p.key + '\')">' +
                        (isArchived ? 'Restore' : 'Archive') +
                    '</button></div>';
            }).join('');
        }

        // ── Person Hub Theme Overrides (custom dropdowns) ──
        var _hubAccentDefs = {
            blush:'Blush',petalpink:'Petal Pink',rosegold:'Rose Gold',raspberry:'Raspberry',
            apricot:'Apricot',burntsienna:'Burnt Sienna',nude:'Nude',cream:'Cream',
            sage:'Sage Green',moss:'Moss',softmint:'Soft Mint',palejade:'Pale Jade',
            dustyteal:'Dusty Teal',powderblue:'Powder Blue',denim:'Denim',periwinkle:'Periwinkle',
            dustylilac:'Dusty Lilac',darkplum:'Dark Plum',storm:'Storm',obsidian:'Obsidian'
        };
        var _hubBgDefs = {
            dark:'Dark Plum',dustymauve:'Dusty Mauve',bordeaux:'Bordeaux',
            espresso:'Espresso',warmcocoa:'Warm Cocoa',
            forest:'Forest',deepteal:'Deep Teal',
            storm:'Storm',midnight:'Midnight',obsidian:'Obsidian',
            warmlinen:'Warm Linen',softblush:'Soft Blush'
        };
        var _hubAccentHex = (LH && LH.accentHexMap) || {};
        var _hubBgHex = (LH && LH.bgColors) || {};

        function _hubDDSetValue(ddId, key, label, hex) {
            var dd = document.getElementById(ddId);
            if (!dd) return;
            dd.setAttribute('data-value', key);
            var sw = dd.querySelector('.color-dd-swatch');
            var lb = dd.querySelector('.color-dd-label');
            if (sw) sw.style.background = hex || 'transparent';
            if (lb) lb.textContent = label || 'Use Global';
            dd.querySelectorAll('.color-dd-option').forEach(function(o) {
                o.classList.toggle('active', o.getAttribute('data-key') === key);
            });
        }

        function _hubDDBuildMenu(menuId, defs, hexMap, ddId, personN) {
            var menu = document.getElementById(menuId);
            if (!menu) return;
            var html = '<div class="color-dd-option" data-key="" onclick="_hubDDPick(\''+ddId+'\',\'\',\'Use Global\',\'\','+personN+')">' +
                '<span class="color-dd-swatch" style="background:transparent;border-style:dashed"></span>' +
                '<span>Use Global</span></div>';
            Object.keys(defs).forEach(function(k) {
                var hex = hexMap[k] || '#888';
                html += '<div class="color-dd-option" data-key="'+k+'" onclick="_hubDDPick(\''+ddId+'\',\''+k+'\',\''+defs[k]+'\',\''+hex+'\','+personN+')">' +
                    '<span class="color-dd-swatch" style="background:'+hex+'"></span>' +
                    '<span>'+defs[k]+'</span></div>';
            });
            menu.innerHTML = html;
        }

        window._hubDDPick = function(ddId, key, label, hex, personN) {
            _hubDDSetValue(ddId, key, label, hex);
            var dd = document.getElementById(ddId);
            if (dd) dd.classList.remove('open');
            savePersonTheme(personN);
        };

        window.toggleHubDD = function(ddId) {
            var dd = document.getElementById(ddId);
            var wasOpen = dd.classList.contains('open');
            document.querySelectorAll('.hub-dd.open').forEach(function(d) { d.classList.remove('open'); });
            if (!wasOpen) dd.classList.add('open');
        };

        function buildPersonThemeDropdowns() {
            var fontNames = {
                philosopher:'Philosopher',cormorant:'Cormorant Garamond',worksans:'Work Sans',baloo:'Baloo 2',
                lora:'Lora',cardo:'Cardo',playfair:'Playfair Display',kalam:'Kalam',lobster:'Lobster',
                indieflower:'Indie Flower',gilda:'Gilda Display',cormorantinfant:'Cormorant Infant',
                dmserif:'DM Serif Display',tenor:'Tenor Sans'
            };
            var hFontNames = Object.assign({}, fontNames, {
                dancing:'Dancing Script',satisfy:'Satisfy',greatvibes:'Great Vibes',abril:'Abril Fatface'
            });

            function buildFontMenu(menuId, defs, ddId, personN) {
                var menu = document.getElementById(menuId);
                if (!menu) return;
                var html = '<div class="color-dd-option" data-key="" onclick="_hubDDPick(\''+ddId+'\',\'\',\'Use Global\',\'\','+personN+')">' +
                    '<span>Use Global</span></div>';
                Object.keys(defs).forEach(function(k) {
                    var ff = _fontFaceMap[k] || 'inherit';
                    html += '<div class="color-dd-option" data-key="'+k+'" onclick="_hubDDPick(\''+ddId+'\',\''+k+'\',\''+defs[k]+'\',\'\','+personN+')" style="font-family:'+ff+'">' +
                        '<span>'+defs[k]+'</span></div>';
                });
                menu.innerHTML = html;
            }

            [1,2].forEach(function(n) {
                var p = 'p' + n;
                _hubDDBuildMenu(p+'AccentMenu', _hubAccentDefs, _hubAccentHex, p+'AccentDD', n);
                _hubDDBuildMenu(p+'SecondaryMenu', _hubAccentDefs, _hubAccentHex, p+'SecondaryDD', n);
                _hubDDBuildMenu(p+'BgMenu', _hubBgDefs, _hubBgHex, p+'BgDD', n);
                buildFontMenu(p+'FontMenu', fontNames, p+'FontDD', n);
                buildFontMenu(p+'HFontMenu', hFontNames, p+'HFontDD', n);
            });
        }

        function loadPersonThemes() {
            var fontNames = {
                philosopher:'Philosopher',cormorant:'Cormorant Garamond',worksans:'Work Sans',baloo:'Baloo 2',
                lora:'Lora',cardo:'Cardo',playfair:'Playfair Display',kalam:'Kalam',lobster:'Lobster',
                indieflower:'Indie Flower',gilda:'Gilda Display',cormorantinfant:'Cormorant Infant',
                dmserif:'DM Serif Display',tenor:'Tenor Sans',
                dancing:'Dancing Script',satisfy:'Satisfy',greatvibes:'Great Vibes',abril:'Abril Fatface'
            };
            [1,2].forEach(function(n) {
                var p = 'p' + n;
                var po = {};
                try { po = JSON.parse(localStorage.getItem('person'+n+'Appearance') || '{}'); } catch(e) {}
                // Color custom dropdowns
                var colorMap = {Accent:'accentColor',Secondary:'secondaryColor',Bg:'bgColor'};
                Object.keys(colorMap).forEach(function(suffix) {
                    var val = po[colorMap[suffix]] || '';
                    var ddId = p + suffix + 'DD';
                    var defs = (suffix === 'Bg') ? _hubBgDefs : _hubAccentDefs;
                    var hexMap = (suffix === 'Bg') ? _hubBgHex : _hubAccentHex;
                    var label = val ? (defs[val] || val) : 'Use Global';
                    var hex = val ? (hexMap[val] || '') : '';
                    _hubDDSetValue(ddId, val, label, hex);
                });
                // Font custom dropdowns
                var fontMap = {Font:'fontFamily',HFont:'headingFont'};
                Object.keys(fontMap).forEach(function(suffix) {
                    var val = po[fontMap[suffix]] || '';
                    var ddId = p + suffix + 'DD';
                    var label = val ? (fontNames[val] || val) : 'Use Global';
                    _hubDDSetValue(ddId, val, label, '');
                    // Set font-family on the trigger label
                    var triggerLabel = document.getElementById(p + suffix + 'Label');
                    if (triggerLabel) triggerLabel.style.fontFamily = val && _fontFaceMap[val] ? _fontFaceMap[val] : 'inherit';
                });
            });
        }

        window.savePersonTheme = function(n) {
            var p = 'p' + n;
            var key = 'person' + n + 'Appearance';
            var obj = {};
            // Read from all custom dropdowns
            var allMap = {Accent:'accentColor',Secondary:'secondaryColor',Bg:'bgColor',Font:'fontFamily',HFont:'headingFont'};
            Object.keys(allMap).forEach(function(suffix) {
                var dd = document.getElementById(p + suffix + 'DD');
                var val = dd ? dd.getAttribute('data-value') : '';
                if (val) obj[allMap[suffix]] = val;
            });
            if (Object.keys(obj).length > 0) {
                localStorage.setItem(key, JSON.stringify(obj));
            } else {
                localStorage.removeItem(key);
            }
            // Update font trigger labels
            ['Font','HFont'].forEach(function(suffix) {
                var dd = document.getElementById(p + suffix + 'DD');
                var val = dd ? dd.getAttribute('data-value') : '';
                var triggerLabel = document.getElementById(p + suffix + 'Label');
                if (triggerLabel) triggerLabel.style.fontFamily = val && _fontFaceMap[val] ? _fontFaceMap[val] : 'inherit';
            });
            syncToFirebase();
        };

        function buildSectionArchiveContainer() {
            const container = document.getElementById('sectionArchiveContainer');
            const archived = S.archivedSections;

            const pageNames = {
                home: 'Home Page',
                person1: S.names.name1 + "'s Hub",
                person2: S.names.name2 + "'s Hub",
                dreams: 'Dreams & Goals',
                meals: 'Meal Plan'
            };

            let html = '';
            Object.keys(sectionDefs).forEach(pageKey => {
                const sections = sectionDefs[pageKey];
                const archivedSections = archived[pageKey] || [];

                html += '<div class="archive-group">';
                html += '<div class="archive-group-title">' + (pageNames[pageKey] || pageKey) + '</div>';
                html += '<div class="archive-grid">';

                sections.forEach(sec => {
                    const isArchived = archivedSections.indexOf(sec.key) !== -1;
                    html += '<div class="archive-item' + (isArchived ? ' archived' : '') + '">' +
                        '<div class="archive-item-info">' +
                            '<div class="archive-item-name">' + sec.name + '</div>' +
                        '</div>' +
                        '<button class="archive-toggle-btn' + (isArchived ? ' restore' : '') + '" onclick="toggleSectionArchive(\'' + pageKey + '\', \'' + sec.key + '\')">' +
                            (isArchived ? 'Restore' : 'Archive') +
                        '</button></div>';
                });

                html += '</div></div>';
            });

            container.innerHTML = html;
        }

        // ══════════════════════════════════════════════
        // SAVE FUNCTIONS
        // ══════════════════════════════════════════════

        // App Name
        window.saveAppName = function() {
            const val = document.getElementById('appName').value || 'Our Life Hub';
            localStorage.setItem('appName', val);
            flash('appNameFlash'); syncToFirebase();
            document.querySelector('.nav-logo').textContent = val;
        };

        // Names
        window.saveNames = function() {
            const names = {
                name1: document.getElementById('name1').value || 'Kasey',
                name2: document.getElementById('name2').value || 'Charlie'
            };
            localStorage.setItem('userNames', JSON.stringify(names));
            flash('namesFlash'); syncToFirebase();
            // Update nav links live
            document.querySelectorAll('.nav-link, .nav-link-mobile').forEach(link => {
                const href = link.getAttribute('href') || '';
                if (href === 'kasey-hub.html') link.textContent = names.name1;
                if (href === 'charlie-hub.html') link.textContent = names.name2;
            });
            // Update labels in this page
            document.getElementById('habits1Label').textContent = names.name1 + "'s Habits";
            document.getElementById('habits2Label').textContent = names.name2 + "'s Habits";
            document.getElementById('mealPerson1Label').textContent = names.name1 + "'s Targets";
            document.getElementById('mealPerson2Label').textContent = names.name2 + "'s Targets";
            if(document.getElementById('hubTheme1Label')) document.getElementById('hubTheme1Label').textContent = names.name1 + "'s Hub";
            if(document.getElementById('hubTheme2Label')) document.getElementById('hubTheme2Label').textContent = names.name2 + "'s Hub";
        };

        // Page Labels
        window.savePageLabels = function() {
            const labels = {};
            const home = document.getElementById('labelHome').value.trim();
            const dreams = document.getElementById('labelDreams').value.trim();
            const meals = document.getElementById('labelMeals').value.trim();
            const settings = document.getElementById('labelSettings').value.trim();
            if (home) labels.home = home;
            if (dreams) labels.dreams = dreams;
            if (meals) labels.meals = meals;
            if (settings) labels.settings = settings;
            localStorage.setItem('pageLabels', JSON.stringify(labels));
            flash('labelsFlash'); syncToFirebase();
        };

        // Accent Color
        window.setAccentColor = function(key) {
            localStorage.setItem('accentColor', key);
            document.getElementById('accentPreview').style.background = colorDefs[key].hex;
            _saveUIState('accentDropdown');
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Secondary Color
        window.setSecondaryColor = function(key) {
            localStorage.setItem('secondaryColor', key);
            document.getElementById('secondaryPreview').style.background = colorDefs[key].hex;
            _saveUIState('secondaryDropdown');
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Background Color
        window.setBackgroundColor = function(key) {
            localStorage.setItem('bgColor', key);
            document.getElementById('bgPreview').style.background = bgColorDefs[key].hex;
            _saveUIState('bgDropdown');
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Sync font select elements to display in their selected font
        var _fontFaceMap = {
            philosopher:"'Philosopher',serif",cormorant:"'Cormorant Garamond',serif",worksans:"'Work Sans',sans-serif",
            baloo:"'Baloo 2',cursive",lora:"'Lora',serif",cardo:"'Cardo',serif",playfair:"'Playfair Display',serif",
            kalam:"'Kalam',cursive",lobster:"'Lobster',cursive",indieflower:"'Indie Flower',cursive",
            gilda:"'Gilda Display',serif",cormorantinfant:"'Cormorant Infant',serif",dmserif:"'DM Serif Display',serif",
            tenor:"'Tenor Sans',sans-serif",dancing:"'Dancing Script',cursive",satisfy:"'Satisfy',cursive",
            greatvibes:"'Great Vibes',cursive",abril:"'Abril Fatface',serif"
        };
        function syncFontSelectStyles() {
            ['fontFamily','headingFont'].forEach(function(id) {
                var sel = document.getElementById(id);
                if (!sel) return;
                var val = sel.value;
                sel.style.fontFamily = (val && _fontFaceMap[val]) ? _fontFaceMap[val] : 'inherit';
            });
        }

        // Font
        window.setFontFamily = function() {
            const val = document.getElementById('fontFamily').value;
            localStorage.setItem('fontFamily', val);
            _saveUIState();
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Heading Font
        window.setHeadingFont = function() {
            const val = document.getElementById('headingFont').value;
            localStorage.setItem('headingFont', val);
            _saveUIState();
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Font Size
        window.adjustFontSize = function(direction) {
            let current = parseInt(localStorage.getItem('fontSize') || '100');
            current += (direction * 10);
            current = Math.max(80, Math.min(130, current));
            localStorage.setItem('fontSize', current.toString());
            document.getElementById('fontSizeDisplay').textContent = current + '%'; syncToFirebase();
            document.documentElement.style.fontSize = (16 * current / 100) + 'px';
        };

        // Page Archive
        window.togglePageArchive = function(pageKey) {
            let archived = JSON.parse(localStorage.getItem('archivedPages') || '[]');
            const idx = archived.indexOf(pageKey);
            if (idx !== -1) {
                archived.splice(idx, 1);
            } else {
                archived.push(pageKey);
            }
            localStorage.setItem('archivedPages', JSON.stringify(archived));
            S.archivedPages = archived;
            buildPageArchiveGrid();
            // Live-update nav
            syncToFirebase().then(function(){ location.reload(); });
        };

        // Section Archive
        window.toggleSectionArchive = function(pageKey, sectionKey) {
            let archived = JSON.parse(localStorage.getItem('archivedSections') || '{}');
            if (!archived[pageKey]) archived[pageKey] = [];
            const idx = archived[pageKey].indexOf(sectionKey);
            if (idx !== -1) {
                archived[pageKey].splice(idx, 1);
                if (archived[pageKey].length === 0) delete archived[pageKey];
            } else {
                archived[pageKey].push(sectionKey);
            }
            localStorage.setItem('archivedSections', JSON.stringify(archived));
            S.archivedSections = archived; syncToFirebase();
            buildSectionArchiveContainer();
        };

        // Habits
        window.addHabit = function(person) {
            const input = document.getElementById(person === 'person1' ? 'newHabit1' : 'newHabit2');
            const text = input.value.trim();
            if (!text) { alert('Please enter a habit name'); return; }
            const habits = JSON.parse(localStorage.getItem('customHabits_' + person) || JSON.stringify(defaultHabits[person]));
            habits.push(text);
            localStorage.setItem('customHabits_' + person, JSON.stringify(habits));
            input.value = '';
            renderHabits(person); syncToFirebase();
        };

        window.deleteHabit = function(person, index) {
            if (!confirm('Delete this habit?')) return;
            const habits = JSON.parse(localStorage.getItem('customHabits_' + person) || JSON.stringify(defaultHabits[person]));
            habits.splice(index, 1);
            localStorage.setItem('customHabits_' + person, JSON.stringify(habits));
            renderHabits(person); syncToFirebase();
        };

        function renderHabits(person) {
            const listId = person === 'person1' ? 'habits1List' : 'habits2List';
            const habits = JSON.parse(localStorage.getItem('customHabits_' + person) || JSON.stringify(defaultHabits[person]));
            const list = document.getElementById(listId);
            list.innerHTML = habits.map((habit, i) =>
                '<div class="habit-item"><div class="habit-text">' + habit + '</div>' +
                '<div class="habit-actions"><button class="btn-danger btn btn-small" onclick="deleteHabit(\'' + person + '\',' + i + ')">Delete</button></div></div>'
            ).join('');
        }

        // Custom Prompts
        window.saveCustomPrompts = function() {
            const text = document.getElementById('customPrompts').value.trim();
            const arr = text.split('\n').filter(p => p.trim());
            if (arr.length < 10) { alert('Please enter at least 10 prompts (one per line)'); return; }
            localStorage.setItem('customPrompts', JSON.stringify(arr));
            document.getElementById('promptCount').textContent = arr.length;
            flash('promptsFlash'); syncToFirebase();
        };

        // Custom Challenges
        window.saveCustomChallenges = function() {
            const text = document.getElementById('customChallenges').value.trim();
            const arr = text.split('\n').filter(c => c.trim());
            if (arr.length !== 12) { alert('Please enter exactly 12 challenges (one per line, for each month)'); return; }
            localStorage.setItem('customChallenges', JSON.stringify(arr));
            document.getElementById('challengeCount').textContent = arr.length;
            flash('challengesFlash'); syncToFirebase();
        };

        // Meal Settings
        window.saveMealSettings = function() {
            const settings = {
                person1: {
                    calories: document.getElementById('meal1Calories').value || '1,350-1,700',
                    protein: document.getElementById('meal1Protein').value || '140-165g'
                },
                person2: {
                    calories: document.getElementById('meal2Calories').value || '2,200-2,500',
                    protein: document.getElementById('meal2Protein').value || '180-210g'
                }
            };
            localStorage.setItem('mealSettings', JSON.stringify(settings));
            flash('mealsFlash'); syncToFirebase();
        };

        // Timezone
        window.saveTimezone = function() {
            localStorage.setItem('timezone', document.getElementById('timezone').value); syncToFirebase();
        };

        // Week Start
        window.saveWeekStart = function() {
            localStorage.setItem('weekStart', document.getElementById('weekStart').value); syncToFirebase();
        };

        // Export
        window.exportData = function() {
            const data = { version: '2.0', exportDate: new Date().toISOString(), localStorage: {} };
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                data.localStorage[key] = localStorage.getItem(key);
            }
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lifehub-backup-' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
        };

        // Import
        window.importData = function(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (!data.localStorage) { alert('Invalid backup file format.'); return; }
                    if (confirm('This will replace all current data with the backup. Continue?')) {
                        localStorage.clear();
                        Object.keys(data.localStorage).forEach(key => {
                            localStorage.setItem(key, data.localStorage[key]);
                        });
                        localStorage.setItem('_settingsLastSaved', Date.now().toString());
                        alert('Data restored! The page will now reload.');
                        syncToFirebase().then(function(){ location.reload(); });
                    }
                } catch (err) {
                    alert('Error reading backup file: ' + err.message);
                }
            };
            reader.readAsText(file);
        };

        // Reset
        window.resetSettings = function() {
            if (!confirm('Reset all customizations to default? This will NOT delete your data (calendar, habits, etc.), only your appearance, archive, and feature settings.')) return;
            const keys = ['appName', 'userNames', 'accentColor', 'bgColor', 'fontFamily', 'fontSize',
                'features', 'customHabits_person1', 'customHabits_person2', 'customPrompts',
                'customChallenges', 'timezone', 'weekStart', 'archivedPages', 'archivedSections',
                'pageLabels', 'mealSettings', 'person1Appearance', 'person2Appearance'];
            keys.forEach(key => localStorage.removeItem(key));
            localStorage.setItem('_settingsLastSaved', Date.now().toString());
            alert('Settings reset! The page will now reload.');
            syncToFirebase().then(function(){ location.reload(); });
        };

        // ══════════════════════════════════════════════
        // LOAD ALL SETTINGS ON PAGE LOAD
        // ══════════════════════════════════════════════
        function loadSettings() {
            // App name
            document.getElementById('appName').value = S.appName;

            // Names
            document.getElementById('name1').value = S.names.name1;
            document.getElementById('name2').value = S.names.name2;
            document.getElementById('habits1Label').textContent = S.names.name1 + "'s Habits";
            document.getElementById('habits2Label').textContent = S.names.name2 + "'s Habits";
            if(document.getElementById('hubTheme1Label')) document.getElementById('hubTheme1Label').textContent = S.names.name1 + "'s Hub";
            if(document.getElementById('hubTheme2Label')) document.getElementById('hubTheme2Label').textContent = S.names.name2 + "'s Hub";
            document.getElementById('mealPerson1Label').textContent = S.names.name1 + "'s Targets";
            document.getElementById('mealPerson2Label').textContent = S.names.name2 + "'s Targets";

            // Page labels
            const labels = S.pageLabels || {};
            document.getElementById('labelHome').value = labels.home || '';
            document.getElementById('labelDreams').value = labels.dreams || '';
            document.getElementById('labelMeals').value = labels.meals || '';
            document.getElementById('labelSettings').value = labels.settings || '';

            // Font
            document.getElementById('fontFamily').value = S.fontFamily;
            document.getElementById('headingFont').value = S.headingFont || 'philosopher';
            syncFontSelectStyles();

            // Font size
            document.getElementById('fontSizeDisplay').textContent = S.fontSize + '%';

            // Build grids
            buildColorDropdowns();
            buildPersonThemeDropdowns();
            loadPersonThemes();
            buildPageArchiveGrid();
            buildSectionArchiveContainer();

            // Habits
            renderHabits('person1');
            renderHabits('person2');

            // Prompts
            const prompts = localStorage.getItem('customPrompts');
            if (prompts) {
                const arr = JSON.parse(prompts);
                document.getElementById('customPrompts').value = arr.join('\n');
                document.getElementById('promptCount').textContent = arr.length;
            }

            // Challenges
            const challenges = localStorage.getItem('customChallenges');
            if (challenges) {
                const arr = JSON.parse(challenges);
                document.getElementById('customChallenges').value = arr.join('\n');
                document.getElementById('challengeCount').textContent = arr.length;
            }

            // Meal settings
            const mealSettings = JSON.parse(localStorage.getItem('mealSettings') || '{}');
            if (mealSettings.person1) {
                document.getElementById('meal1Calories').value = mealSettings.person1.calories || '';
                document.getElementById('meal1Protein').value = mealSettings.person1.protein || '';
            }
            if (mealSettings.person2) {
                document.getElementById('meal2Calories').value = mealSettings.person2.calories || '';
                document.getElementById('meal2Protein').value = mealSettings.person2.protein || '';
            }

            // Timezone
            document.getElementById('timezone').value = localStorage.getItem('timezone') || 'America/New_York';

            // Week start
            document.getElementById('weekStart').value = localStorage.getItem('weekStart') || '0';
        }

        loadSettings();
        _restoreUIState();
    </script>

    <script>
        function toggleNav() {
            var h = document.getElementById('navHamburger');
            var o = document.getElementById('navOverlay');
            if (!h || !o) return;
            var isOpen = o.classList.contains('open');
            if (isOpen) {
                h.classList.remove('open');
                o.classList.remove('open');
                document.body.style.overflow = '';
            } else {
                h.classList.add('open');
                o.classList.add('open');
                document.body.style.overflow = 'hidden';
            }
        }
    </script>
</body>
</html>
